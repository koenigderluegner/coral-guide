import{a as oe,b as ne,c as ae}from"./chunk-HWSOVV66.js";import{a as ie}from"./chunk-H5W4AT7W.js";import{a as re}from"./chunk-MNWYFPKW.js";import"./chunk-CS6UDEWJ.js";import{a as te}from"./chunk-R5W7LKTI.js";import"./chunk-YRO3XTLN.js";import"./chunk-O2IAJ5L5.js";import{a as Y}from"./chunk-EGGJNKID.js";import{a as ee}from"./chunk-MEQFYU4V.js";import{a as K}from"./chunk-J2VJBRDY.js";import"./chunk-7RLGG3YK.js";import{a as X}from"./chunk-5EZIUWJI.js";import"./chunk-IYMAANR5.js";import"./chunk-DUMUFVPR.js";import"./chunk-GZYBMURB.js";import{a as R,c as U}from"./chunk-FKI6MOIH.js";import"./chunk-OYPR7CJS.js";import{a as Z}from"./chunk-VECDWYVT.js";import"./chunk-QYM5RSKG.js";import{b as H}from"./chunk-QLTEDVDB.js";import"./chunk-ZNXHGMTD.js";import"./chunk-XWGFS45Y.js";import"./chunk-IBXLELUQ.js";import{b as Q}from"./chunk-OU4TLBIG.js";import"./chunk-YOD5VGJA.js";import"./chunk-EJRI7FQQ.js";import"./chunk-XMGSTBON.js";import"./chunk-7VKCZCDP.js";import"./chunk-RIQ7EVWM.js";import{i as W,l as q}from"./chunk-U65D7S4X.js";import"./chunk-IJY46FI3.js";import"./chunk-3AJAQBMU.js";import{f as V}from"./chunk-7C5Y62SY.js";import"./chunk-VRZECYYF.js";import"./chunk-IIDJZWRT.js";import"./chunk-7MFI6IJ7.js";import"./chunk-HIFLNZD5.js";import"./chunk-ZALICU3N.js";import"./chunk-47OJ7DES.js";import{h as $}from"./chunk-UUI6UFCU.js";import"./chunk-BFCDBX46.js";import{b as z}from"./chunk-G2FIETR4.js";import"./chunk-7DQT77OQ.js";import{i as G}from"./chunk-OHR5KDYC.js";import{Hb as c,Jb as l,Lb as b,Lc as f,Mb as x,Mc as h,Nb as y,Ob as p,Pb as d,Qb as m,Rb as _,S as P,Sc as O,Yb as v,Za as s,Zc as S,ac as B,ca as N,cc as r,ia as w,ja as F,k as M,kb as g,ob as A,oc as T,q as E,qb as j,wc as J,xc as k,yc as L}from"./chunk-FPTGDBQG.js";import"./chunk-2QKSPLSF.js";function ce(e,o){if(e&1&&_(0,"app-crop",2),e&2){let i=o.$implicit;p("item",i)}}function le(e,o){if(e&1&&_(0,"app-animal-produce",3),e&2){let i=r().$implicit;p("animal",i.producedByAnimal)("shownItemId",i.item.id)}}function de(e,o){if(e&1&&_(0,"app-processing",5),e&2){let i=o.$implicit,t=o.$index;T("mt-3",t!==0),p("itemProcessing",i)}}function me(e,o){if(e&1&&(x(0,ce,1,1,"app-crop",2,b),c(2,le,1,2,"app-animal-produce",3),x(3,de,1,3,"app-processing",4,b)),e&2){let i=o.$implicit;y(i.isSeedFor),s(2),l(i.producedByAnimal?2:-1),s(),y(i.artisanResult)}}var pe=(()=>{let o=class o{constructor(){this.item=S.required(),this.toDoContext=S.required()}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=g({type:o,selectors:[["app-produce-details"]],inputs:{item:[1,"item"],toDoContext:[1,"toDoContext"]},decls:3,vars:4,consts:[[3,"context","itemId"],["appDatabaseItemDetails",""],[1,"mb-4",3,"item"],[3,"animal","shownItemId"],[3,"mt-3","itemProcessing"],[3,"itemProcessing"]],template:function(n,a){if(n&1&&(d(0,"app-database-item-details",0),f(1,"isBaseCrop"),j(2,me,5,1,"ng-template",1),m()),n&2){let u=a.item();p("context",a.toDoContext())("itemId",(h(1,2,u)?u.dropData[0].item:u).id)}},dependencies:[te,oe,ae,X,Y,ne],encapsulation:2});let e=o;return e})();function _e(e,o){if(e&1&&_(0,"app-produce-details",0),e&2){let i=r();p("item",i.selectedEntity)("toDoContext",i.toDoContext())}}function ue(e,o){if(e&1){let i=v();d(0,"app-item-icon",6),f(1,"isMinimalItem"),f(2,"isMinimalItem"),f(3,"isMinimalItem"),B("click",function(){let n=w(i).$implicit,a=r(4);return F(a.showDetails(n))}),m()}if(e&2){let i=o.$implicit,t=r(4);T("selected-icon",(h(1,3,t.selectedEntity)?t.selectedEntity.id:t.selectedEntity==null||t.selectedEntity.dropData==null||t.selectedEntity.dropData[0]==null||t.selectedEntity.dropData[0].item==null?null:t.selectedEntity.dropData[0].item.id)===(h(2,5,i)?i.id:i.dropData[0].item.id)),p("itemName",h(3,7,i)?i.iconName:i.dropData[0].item.iconName)}}function Ce(e,o){if(e&1&&(d(0,"div",4),x(1,ue,4,9,"app-item-icon",5,b),m()),e&2){let i=r();s(),y(i)}}function fe(e,o){if(e&1&&_(0,"app-non-specialized-table",7),e&2){let i=r(2),t=r(2);p("dataSource",t.castToItemArray(i))}}function he(e,o){if(e&1&&_(0,"app-crop-table",7),e&2){let i=r(2),t=r(2);p("dataSource",t.castToBaseCropArray(i))}}function be(e,o){if(e&1&&(c(0,fe,1,1,"app-non-specialized-table",7),c(1,he,1,1,"app-crop-table",7)),e&2){let i=r(2).$implicit,t=r();l(i.title!==t.tabs[0].title?0:-1),s(),l(i.title===t.tabs[0].title?1:-1)}}function xe(e,o){if(e&1&&(c(0,Ce,3,0,"div",4),c(1,be,2,2)),e&2){let i=r(2);l(i.showTable?-1:0),s(),l(i.showTable?1:-1)}}function ye(e,o){if(e&1){let i=v();d(0,"mat-tab",2)(1,"app-data-filter",3),L("showTableChange",function(n){w(i);let a=r();return k(a.showTable,n)||(a.showTable=n),F(n)}),m(),c(2,xe,2,2),f(3,"async"),m()}if(e&2){let i,t=o.$implicit,n=r();p("label",t.title),s(),J("showTable",n.showTable),p("parentFormGroup",n.formControl),s(),l((i=h(3,4,t.data))?2:-1,i)}}var Ue=(()=>{let o=class o extends K{constructor(){super(new W({season:new q([...$],{nonNullable:!0})})),this.isBeta=N(z).getSettings().useBeta,this.toDoContext=O(()=>{let t=this.selectedTabIndex();return t===0?"journal_crops":t===1?"journal_animal_produce":t===2?"artisan":t===3?"journal_ocean_produce":void 0}),this.tabs=[{title:"Crops",data:E([this._database.fetchCrops$(),this._database.fetchFruitTrees$(),this._database.fetchFruitPlants$()]).pipe(P(([t,n,a])=>this.getFilteredJournalData(this._database.fetchJournalOrder$("journal-crops"),this._database.fetchItems$().pipe(P(u=>M(u.map(C=>t.find(D=>D.pickupableItemId===C.id)??a.find(D=>D.dropData.some(I=>I.itemId===C.id))??n.find(D=>D.dropData.some(I=>I.itemId===C.id))).filter(V)))),0)))},{title:"Animal Products",data:this.getFilteredJournalData(this._database.fetchJournalOrder$("journal-animal-products"),this._database.fetchItems$(),1)},{title:"Artisan Products",data:this.getFilteredJournalData(this._database.fetchJournalOrder$("journal-artisan-products"),this._database.fetchItems$(),2)},{title:"Ocean",data:this.getFilteredJournalData(this._database.fetchJournalOrder$("journal-ocean-products"),this._database.fetchItems$(),3)}],this.activateTabFromRoute(this.tabs.map(t=>t.title))}filterPredicate(t,n){if(!("growableSeason"in t))return!0;if(!n.season?.length)return!1;let a=t.growableSeason.join(" ").toLowerCase();return n.season?.length===$.length||!!n.season?.some(C=>a.includes((""+C).toLowerCase()))}castToItemArray(t){return t}castToBaseCropArray(t){return t}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=g({type:o,selectors:[["app-produce"]],features:[A],decls:5,vars:2,consts:[["listDetail","",3,"item","toDoContext"],[3,"selectedTabChange","selectedIndex"],[3,"label"],[3,"showTableChange","showTable","parentFormGroup"],[1,"icon-grid"],[1,"icon-grid-item",3,"selected-icon","itemName"],[1,"icon-grid-item",3,"click","itemName"],[3,"dataSource"]],template:function(n,a){n&1&&(d(0,"app-list-detail-container"),c(1,_e,1,2,"app-produce-details",0),d(2,"mat-tab-group",1),B("selectedTabChange",function(C){return a.updateUrl(C)}),x(3,ye,4,6,"mat-tab",2,b),m()()),n&2&&(s(),l(a.selectedEntity?1:-1),s(),p("selectedIndex",a.selectedTabIndex()),s(),y(a.tabs))},dependencies:[H,pe,U,R,Z,Q,ee,re,G,ie],encapsulation:2});let e=o;return e})();export{Ue as ProduceComponent};
