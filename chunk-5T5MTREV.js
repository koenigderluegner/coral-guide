import{c as F,d as z,f as P,g as L}from"./chunk-PT2JM3JA.js";import{a as ke,b as Me}from"./chunk-5SUIQM33.js";import"./chunk-VIHDBGTU.js";import{a as we,b as Ie}from"./chunk-OKR7QHIK.js";import"./chunk-WP2B2A6N.js";import"./chunk-L5G7Q7YK.js";import{a as N}from"./chunk-ZB23GXIF.js";import"./chunk-OCVYEX7D.js";import"./chunk-KYJPB6XG.js";import"./chunk-HWSOVV66.js";import"./chunk-H5W4AT7W.js";import"./chunk-CS6UDEWJ.js";import"./chunk-R5W7LKTI.js";import"./chunk-YRO3XTLN.js";import"./chunk-O2IAJ5L5.js";import{a as ve}from"./chunk-EGGJNKID.js";import"./chunk-5EZIUWJI.js";import"./chunk-IYMAANR5.js";import{a as S}from"./chunk-DUMUFVPR.js";import"./chunk-GZYBMURB.js";import{a as he}from"./chunk-OYPR7CJS.js";import{a as be,b as Ee}from"./chunk-QYM5RSKG.js";import{b as ge,c as Ce}from"./chunk-QLTEDVDB.js";import"./chunk-ZNXHGMTD.js";import"./chunk-IBXLELUQ.js";import{a as xe,b as De}from"./chunk-OU4TLBIG.js";import{c as Se}from"./chunk-YOD5VGJA.js";import"./chunk-EJRI7FQQ.js";import{e as Te}from"./chunk-7VKCZCDP.js";import"./chunk-RIQ7EVWM.js";import{c as le,g as ce,l as de,m as me,p as pe,v as ue,w as fe}from"./chunk-U65D7S4X.js";import"./chunk-IJY46FI3.js";import"./chunk-3AJAQBMU.js";import"./chunk-7C5Y62SY.js";import{a as ye}from"./chunk-VRZECYYF.js";import{a as j}from"./chunk-IIDJZWRT.js";import"./chunk-7MFI6IJ7.js";import"./chunk-HIFLNZD5.js";import"./chunk-ZALICU3N.js";import{h as _e}from"./chunk-47OJ7DES.js";import{c as se}from"./chunk-UUI6UFCU.js";import"./chunk-BFCDBX46.js";import"./chunk-G2FIETR4.js";import"./chunk-7DQT77OQ.js";import"./chunk-OHR5KDYC.js";import{A as R,Hb as p,Jb as u,Lb as b,Mb as E,Nb as w,Ob as f,Pb as r,Qb as a,Rb as I,Rc as oe,Sc as ne,Tc as ie,Uc as re,Yb as v,Yc as A,Za as s,Zc as C,_c as ae,ac as g,ca as y,cc as d,dc as G,ec as W,ia as x,ja as D,kb as T,kc as H,lc as J,oa as U,ob as Q,oc as k,qb as Y,rc as l,sa as $,sc as _,tc as K,uc as X,wc as Z,xc as ee,yc as te}from"./chunk-FPTGDBQG.js";import{d as M,e as V,f as q}from"./chunk-2QKSPLSF.js";var O=["offerings","journal_fish","journal_critter","journal_insects","journal_gems","journal_fossils","journal_artifacts","journal_crops","journal_animal_produce","journal_scavangables","journal_ocean_produce","cooking_recipes","crafting","artisan","museum","uncategorized","item_mixing","database"],B={offerings:"Offerings",journal_fish:"Fish",journal_critter:"Sea Critter",journal_insects:"Insects",journal_gems:"Gems",journal_fossils:"Fossils",journal_artifacts:"Artifacts",journal_crops:"Crops",journal_animal_produce:"Animal Produce",journal_ocean_produce:"Ocean Produce",journal_scavangables:"Scavangables",cooking_recipes:"Cooking recipes",crafting:"Crafting",artisan:"Artisan",museum:"Museum",uncategorized:"Uncategorized",item_mixing:"Item mixing",database:"Database"};var Be=["*"];function Ve(e,n){if(e&1&&I(0,"app-rarity-icon",6),e&2){let t=d(2);f("quality",t.quality())}}function qe(e,n){if(e&1){let t=v();r(0,"div",3),g("click",function(){x(t);let c=d();return D(c.entrySelected.emit(c.item()))}),I(1,"app-item-icon",4),r(2,"span",5),l(3),a(),p(4,Ve,1,1,"app-rarity-icon",6),a()}if(e&2){let t=d();s(),f("itemName",t.item().iconName),s(),k("line-through",t.isChecked),s(),_(t.item().displayName),s(),u(t.quality()?4:-1)}}var je=(()=>{var n,t;let o=class o{constructor(){V(this,n);V(this,t);this.amount=C(),this.quality=C(),this.item=C.required(),this.category=C.required(),this.entrySelected=A(),this.checkbox=ae(N),this.qualities=se,this.isChecked=!1,q(this,n,y(S)),q(this,t,y(U))}ngOnInit(){M(this,n).categoryCompleted$().pipe(j(M(this,t)),R(i=>i===this.category())).subscribe({next:()=>{this.toggleCompletionStatus(!0);let i=this.checkbox();i&&(i.checked=!0)}})}toggleCompletionStatus(i){this.isChecked=i,M(this,n).updateStatus(this.category(),this.item(),i)}};n=new WeakMap,t=new WeakMap,o.\u0275fac=function(m){return new(m||o)},o.\u0275cmp=T({type:o,selectors:[["app-to-do-entry-base"]],viewQuery:function(m,h){m&1&&H(h.checkbox,N,5),m&2&&J()},hostVars:2,hostBindings:function(m,h){m&2&&k("opacity-50",h.isChecked)},inputs:{amount:[1,"amount"],quality:[1,"quality"],item:[1,"item"],category:[1,"category"]},outputs:{entrySelected:"entrySelected"},ngContentSelectors:Be,decls:5,vars:2,consts:[[1,"flex","gap-2","items-center","cursor-pointer"],[1,"ml-auto","font-semibold","mr-4"],[3,"change"],[1,"flex","gap-2","items-center","cursor-pointer",3,"click"],[1,"!w-7",3,"itemName"],[1,"ml-1","whitespace-nowrap"],[1,"!w-4",3,"quality"]],template:function(m,h){m&1&&(G(),p(0,qe,5,5,"div",0),W(1),r(2,"span",1),l(3),a(),r(4,"mat-checkbox",2),g("change",function(Pe){return h.toggleCompletionStatus(Pe.checked)}),a()),m&2&&(u(h.item()?0:-1),s(3),_(h.amount()?"x"+h.amount():""))},dependencies:[N,xe,De],styles:["[_nghost-%COMP%]{display:flex;height:48px;align-items:center;gap:.5rem;border-radius:1rem;background-color:rgb(0 0 0 / var(--tw-bg-opacity));--tw-bg-opacity: .05;padding-left:1rem;padding-right:1rem;font-size:1.125rem;line-height:1.75rem;--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity))}"]});let e=o;return e})();function Fe(e,n){if(e&1){let t=v();r(0,"app-to-do-entry-base",4),g("entrySelected",function(c){x(t);let i=d(2);return D(i.entrySelected.emit(c))}),a()}if(e&2){let t=n.$implicit,o=d(2);f("amount",t.amount)("category",o.context())("item",t.itemEntry)("quality",t.quality)("@leaveAnimation",void 0)}}function ze(e,n){if(e&1){let t=v();r(0,"header",0)(1,"h2",1),l(2),a(),r(3,"button",2),g("click",function(){x(t);let c=d();return D(c.completeList())}),l(4,"complete list"),a()(),r(5,"div"),E(6,Fe,1,5,"app-to-do-entry-base",3,b),a()}if(e&2){let t,o=d();s(2),_(o.context()==="uncategorized"||o.context()===void 0?"Uncategorized":o.ToDoContextDisplayNames[o.context()]),s(3),f("@.disabled",!((t=o.toDoId())!=null&&t.includes(o.context())||o.toDoId()===void 0)),s(),w(o.data)}}var Ne=(()=>{let n=class n{constructor(){this.entrySelected=A(),this.context=C.required(),this.toDoId=C(),this.hidden=ne(()=>!this.toDoId()?.includes(this.context())||!this.data.length),this.ToDoContextDisplayNames=B,this.toDoService=y(S)}get data(){return this.toDoService.getCategoryList(this.context()==="uncategorized"?void 0:this.context())}completeList(){this.toDoService.completeCategory(this.context()==="uncategorized"?void 0:this.context())}};n.\u0275fac=function(c){return new(c||n)},n.\u0275cmp=T({type:n,selectors:[["app-to-do-partial"]],hostVars:2,hostBindings:function(c,i){c&2&&k("hidden",i.hidden())},inputs:{context:[1,"context"],toDoId:[1,"toDoId"]},outputs:{entrySelected:"entrySelected"},decls:1,vars:1,consts:[[1,"flex","justify-between","items-center","mt-5","mb-2"],[1,"font-semibold","text-xl","text-black"],[1,"btn-amber",3,"click"],[1,"mb-2","block",3,"amount","category","item","quality"],[1,"mb-2","block",3,"entrySelected","amount","category","item","quality"]],template:function(c,i){if(c&1&&p(0,ze,8,2),c&2){let m;u(i.data.length&&((m=i.toDoId())!=null&&m.includes(i.context()))?0:-1)}},dependencies:[je],encapsulation:2,data:{animation:[F("leaveAnimation",[L(":leave",[P({height:"*",opacity:1}),z("200ms ease-in",P({height:0,opacity:0}))])])]}});let e=n;return e})();function Le(e,n){if(e&1&&I(0,"app-offering",15),e&2){let t=n.$implicit;f("details",t)}}function Oe(e,n){if(e&1&&(r(0,"app-item-card-switch",1),Y(1,Le,1,1,"ng-template",14),a()),e&2){let t=d();f("item",t.selectedEntity)("context",t.selectedContext())}}function Re(e,n){e&1&&l(0," All ")}function Ue(e,n){if(e&1&&(r(0,"span",16),l(1),a()),e&2){let t=d(3);s(),X(" (+",t.toDoCategoryControl.value.length-1," ",t.toDoCategoryControl.value.length===2?"other":"others"," ) ")}}function $e(e,n){if(e&1&&(l(0),p(1,Ue,2,2,"span",16)),e&2){let t=d(2);K(" ",t.toDoCategoryControl.value[0]!=="all"?t.toDoCategoryControl.value[0]==="uncategorized"?"Uncategorized":t.toDoContextDisplayNames[t.toDoCategoryControl.value[0]]:""," "),s(),u(t.toDoCategoryControl.value.length>1?1:-1)}}function Qe(e,n){if(e&1&&p(0,$e,2,2),e&2){let t=d();u(t.toDoCategoryControl.value.length?0:-1)}}function Ye(e,n){if(e&1&&(r(0,"mat-option",7)(1,"div",2)(2,"span"),l(3),a(),r(4,"span"),l(5),a()()()),e&2){let t=n.$implicit,o=d();f("value",t),s(3),_(o.toDoContextDisplayNames[t]),s(2),_(o.toDoService.getCategoryList(t).length)}}function Ge(e,n){if(e&1){let t=v();r(0,"app-to-do-partial",17),g("entrySelected",function(c){let i=x(t).$implicit,m=d();return D(m.openEntry(c,i))}),a()}if(e&2){let t=n.$implicit,o=d();f("context",t)("toDoId",o.toDoCategoryControl.value)}}function We(e,n){e&1&&(r(0,"div",13)(1,"h2",9),l(2,"No entries in to-do list"),a(),r(3,"p",18),l(4," Your current to-do list is empty! Visit the "),r(5,"a",19),l(6,"journal"),a(),l(7,", the "),r(8,"a",20),l(9,"offerings"),a(),l(10," or other places to add entries to your to-do list. "),a()())}function He(e,n){e&1&&(r(0,"div",13)(1,"h2",9),l(2,"No entries for selection"),a(),r(3,"p",18),l(4," There are no entries for your current filter settings. "),a()())}var Jt=(()=>{let n=class n extends Ce{constructor(){super(),this.toDoContexts=O,this.toDoContextDisplayNames=B,this.toDoCategoryControl=new de(["all",...O,"uncategorized"],{nonNullable:!0}),this.toDoService=y(S),this.userDataService=y(he),this.todoText=re(()=>this.userDataService.currentData().todoText),this.selectedContext=$("uncategorized"),this.hadAllBefore=!0,this.toDoCategoryControl.valueChanges.pipe(j()).subscribe({next:o=>{this.hadAllBefore&&!o.includes("all")?(this.toDoCategoryControl.setValue([],{emitEvent:!1}),this.hadAllBefore=!1):!this.hadAllBefore&&o.includes("all")?(this.toDoCategoryControl.setValue(["all",...this.toDoContexts],{emitEvent:!1}),this.hadAllBefore=!0):this.hadAllBefore&&o.length<this.toDoContexts.length+1&&(this.toDoCategoryControl.setValue(o.filter(c=>c!=="all"),{emitEvent:!1}),this.hadAllBefore=!1)}}),ie(()=>{let o=this.todoText();oe(()=>{this.userDataService.currentData().todoText=o,this.userDataService.save()})})}openEntry(o,c){this.showDetails(o),this.selectedContext.set(c)}};n.\u0275fac=function(c){return new(c||n)},n.\u0275cmp=T({type:n,selectors:[["app-to-do"]],features:[Q],decls:33,vars:10,consts:[[3,"removePlaceholder"],["listDetail","",3,"item","context"],[1,"flex","justify-between"],[1,"mb-4","font-semibold","text-2xl","text-black"],[1,"btn","btn-secondary"],["multiple","","placeholder","None",3,"formControl"],["value","all"],[3,"value"],["value","uncategorized"],[1,"mb-2","mt-4","font-semibold","text-xl","text-black"],[1,"btn","btn-secondary","mb-8"],["matInput","","cdkTextareaAutosize","false",1,"field-sizing-content","min-h-18","max-h-60",3,"ngModelChange","ngModel"],[3,"context","toDoId"],[1,"show-when-none-displayed"],["appDatabaseItemDetails",""],[3,"details"],[1,"text-sm","opacity-80"],[3,"entrySelected","context","toDoId"],[1,"text-black"],["routerLink","/journal/produce/crops",1,"underline"],["routerLink","/locations/lake-temple",1,"underline"]],template:function(c,i){c&1&&(r(0,"app-list-detail-container",0),p(1,Oe,2,2,"app-item-card-switch",1),r(2,"app-card")(3,"div",2)(4,"h1",3),l(5,"To-Dos"),a(),r(6,"mat-form-field",4)(7,"mat-select",5)(8,"mat-select-trigger"),p(9,Re,1,0),p(10,Qe,1,1),a(),r(11,"mat-option",6)(12,"div",2)(13,"span"),l(14,"All"),a(),r(15,"span"),l(16),a()()(),E(17,Ye,6,3,"mat-option",7,b),r(19,"mat-option",8)(20,"div",2)(21,"span"),l(22,"Uncategorized"),a(),r(23,"span"),l(24),a()()()()()(),r(25,"h2",9),l(26,"Custom to-dos"),a(),r(27,"mat-form-field",10)(28,"textarea",11),te("ngModelChange",function(h){return ee(i.todoText,h)||(i.todoText=h),h}),a()(),E(29,Ge,1,2,"app-to-do-partial",12,b),p(31,We,11,0,"div",13),p(32,He,5,0,"div",13),a()()),c&2&&(f("removePlaceholder",i.showTable),s(),u(i.selectedEntity?1:-1),s(6),f("formControl",i.toDoCategoryControl),s(2),u(i.toDoCategoryControl.value.includes("all")?9:-1),s(),u(i.toDoCategoryControl.value.includes("all")?-1:10),s(6),_(i.toDoService.currentToDoAmount),s(),w(i.toDoContexts),s(7),_(i.toDoService.getCategoryList().length),s(4),Z("ngModel",i.todoText),s(),w(i.toDoContexts),s(2),u(i.toDoService.currentIsEmpty?31:-1),s(),u(i.toDoService.currentIsEmpty?-1:32))},dependencies:[Ne,be,Ee,Te,ye,Me,ke,ge,ve,Se,fe,le,ce,pe,Ie,_e,we,ue,me],styles:["app-to-do-partial[_ngcontent-%COMP%]:not(.hidden) ~ .show-when-none-displayed[_ngcontent-%COMP%]{display:none}"]});let e=n;return e})();export{Jt as ToDoComponent};
