import{a as le}from"./chunk-JMLNX5PQ.js";import{a as ae}from"./chunk-JSS26DYL.js";import{a as oe,b as re}from"./chunk-D4XXG6A2.js";import"./chunk-XCXL4XHH.js";import"./chunk-SDZD6YCY.js";import"./chunk-M4K5OVLF.js";import{a as Q}from"./chunk-YH33I3GS.js";import"./chunk-DPHI5PSG.js";import"./chunk-XQTXOEWR.js";import"./chunk-6NCSHYGI.js";import"./chunk-OGS4EVII.js";import"./chunk-6YB7A7ZH.js";import"./chunk-GBZAIAZB.js";import"./chunk-ODWDCLXK.js";import"./chunk-F4TUYCIO.js";import"./chunk-4ZSEYW2U.js";import{a as te}from"./chunk-IEIN2YGJ.js";import"./chunk-SKYGTZSD.js";import"./chunk-4FC5X73U.js";import"./chunk-EEJJBISB.js";import{a as ie}from"./chunk-W62UHBDW.js";import{a as X,c as Y}from"./chunk-C5INTR5H.js";import"./chunk-MG3YOV2C.js";import{b as ee}from"./chunk-MCZ27GCN.js";import"./chunk-XCL4JOYZ.js";import"./chunk-EAHNU44C.js";import{b as ne}from"./chunk-3NZE6WSA.js";import"./chunk-DS5QD6KN.js";import"./chunk-4I65K53K.js";import{g as j,h as R,j as z,l as K,q as U,r as H,w as J}from"./chunk-AZ3T5YEV.js";import"./chunk-7MLGAPHH.js";import{d as W}from"./chunk-IP6ODCNA.js";import"./chunk-5BU3IDKS.js";import{i as M}from"./chunk-I7ZNO67X.js";import"./chunk-24VFFX2T.js";import{a as V}from"./chunk-7M6VBWZN.js";import"./chunk-C6P6X2N5.js";import"./chunk-YU6OV3L2.js";import"./chunk-OTWAXCZF.js";import"./chunk-NKAP6NYB.js";import"./chunk-KM3RDE6Q.js";import"./chunk-JY3RTIIU.js";import{b as L}from"./chunk-2SASL4UW.js";import"./chunk-B7M7KWVX.js";import{i as q,t as G}from"./chunk-PK2RARDK.js";import{$b as F,Bc as Z,Cc as _,Gb as h,Ib as u,Kb as C,Kc as m,Lb as g,Lc as d,Mb as x,Nb as f,Ob as l,Pb as c,Qb as v,Xb as T,Ya as a,Z as B,bc as s,ca as y,ia as b,ja as k,jb as E,nb as P,nc as S,p as O,pb as N,qc as w,rc as A,sa as D,sc as $}from"./chunk-ELCUH6OG.js";import"./chunk-IGH4DTA6.js";var ce=(()=>{let i=class i extends ae{constructor(){super("orchestra-zones")}};i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"});let t=i;return t})();function de(t,i){if(t&1&&v(0,"app-offering",3),t&2){let n=i.$implicit;f("details",n)}}function fe(t,i){if(t&1&&(l(0,"app-item-card-switch",0),N(1,de,1,1,"ng-template",2),c()),t&2){let n=s();f("item",n.selectedEntity)}}function _e(t,i){if(t&1){let n=T();l(0,"div",13),m(1,"entityKey"),l(2,"app-item-icon",14),F("click",function(){b(n);let o=s().$implicit,r=s(5);return k(r.showDetails(o))}),c(),l(3,"label",15),v(4,"mat-checkbox",16),c()()}if(t&2){let n,e=i,o=s().$implicit,r=s(5);S("checklist-checked",(n=r.checklistForm.get(e))==null?null:n.value)("selected-icon",r.selectedEntity&&d(1,14,r.selectedEntity)===e),a(2),f("amount",o.amount)("itemName",o.item.iconName)("quality",o.quality),a(),f("for",_("entry-",e,"-input")),a(),f("id",_("entry-",e))("name",_("entry-",e))("formControlName",e)}}function he(t,i){if(t&1&&(h(0,_e,5,16,"div",12),m(1,"entityKey")),t&2){let n,e=i.$implicit;u((n=d(1,1,e.item))?0:-1,n)}}function ue(t,i){if(t&1&&(l(0,"div",7)(1,"div",8),m(2,"translate"),m(3,"translate"),v(4,"img",9),m(5,"translate"),l(6,"div",10)(7,"div"),w(8),m(9,"translate"),c(),l(10,"div"),w(11),c()()(),l(12,"div",11),g(13,he,2,3,null,null,C),c()()),t&2){let n=i.$implicit,e=s(4);a(),S("bg-merino-300",d(2,8,e.activeOffering==null?null:e.activeOffering.title)===d(3,10,n.title)),a(3),f("alt",_("",d(5,12,n.title)," offering icon"))("ngSrc",_("",e.bundleAssetPath()+n.imageName,".webp")),a(4),A(d(9,14,n.title)),a(3),$(" ",n.numOfItemRequired===-1?"All":n.numOfItemRequired," required: "),a(2),x(n.requiredItems)}}function Ce(t,i){if(t&1&&(l(0,"div",6),g(1,ue,15,16,"div",7,C),c()),t&2){let n=s().$implicit;a(),x(n.offerings)}}function ge(t,i){if(t&1&&(l(0,"mat-tab",5),m(1,"translate"),m(2,"addSpacesToPascalCase"),h(3,Ce,3,0,"div",6),c()),t&2){let n=i.$implicit,e=s(2);f("label",Z(d(2,5,d(1,3,n.offeringGroupTitle)))),a(3),u(e.showTable?-1:3)}}function xe(t,i){if(t&1){let n=T();l(0,"mat-tab-group",4),F("selectedTabChange",function(o){b(n);let r=s();return k(r.updateUrl(o))}),g(1,ge,4,7,"mat-tab",5,C),c()}if(t&2){let n=s();f("formGroup",n.checklistForm)("selectedIndex",n.selectedTabIndex()),a(),x(i)}}var Ve=(()=>{let i=class i extends te{constructor(){super(),this.checklistService=y(ce),this.checklistForm=new z({}),this.useBeta=y(L).getSettings().useBeta,this.bundleAssetPath=D(`assets/${this.useBeta?"beta":"live"}/items/icons/`),this._altars=[],this.urlPathFromLabel=e=>{let o=e.toLowerCase().replaceAll(" ",""),r=this._altars.find(p=>p.offeringGroupTitle.toLowerCase().replaceAll(" ","")===o);return r?r.urlPath:e.toLowerCase().replaceAll(" ","")},this.checklistForm.valueChanges.pipe(V()).subscribe({next:e=>{let o=[];Object.keys(e).forEach(r=>{e[r]&&o.push(r)}),this.checklistService.set(o)}}),this.offerings$=this._database.fetchOfferings$().pipe(O(e=>{let o=e.filter(p=>p.offeringType==="Diving"),r=o.map(p=>p.urlPath);return this._altars=o,o.forEach(p=>{p.offerings.forEach(se=>{se.requiredItems.forEach(pe=>{let I=M(pe.item);this.checklistForm.addControl(I,new K(this.checklistService.isChecked(I),{nonNullable:!0}),{emitEvent:!1})})})}),this.activateTabFromRoute(r),o}))}showDetails(e){this.entryForToDo=e,e&&"amount"in e?super.showDetails(e.item):super.showDetails(e)}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=E({type:i,selectors:[["app-orchestra-zones-checklist"]],features:[P],decls:4,vars:4,consts:[["listDetail","","context","offerings",3,"item"],[3,"formGroup","selectedIndex"],["appDatabaseItemDetails",""],[3,"details"],[3,"selectedTabChange","formGroup","selectedIndex"],[3,"label"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"flex","flex-col","gap-y-2"],[1,"rounded-lg","bg-merino","flex","items-center","gap-4","p-4"],["height","64","width","64",3,"alt","ngSrc"],[1,"flex","flex-col","text-lg","font-semibold"],[1,"icon-grid","w-full"],[1,"icon-grid-item","checklist-item","flex","flex-col",3,"checklist-checked","selected-icon"],[1,"icon-grid-item","checklist-item","flex","flex-col"],[3,"click","amount","itemName","quality"],[1,"text-white","flex","justify-center",3,"for"],[1,"flex",3,"formControlName","id","name"]],template:function(o,r){if(o&1&&(l(0,"app-list-detail-container"),h(1,fe,2,1,"app-item-card-switch",0),h(2,xe,3,2,"mat-tab-group",1),m(3,"async"),c()),o&2){let p;a(),u(r.selectedEntity?1:-1),a(),u((p=d(3,2,r.offerings$))?2:-1,p)}},dependencies:[X,J,j,R,U,H,Y,re,oe,ee,ne,Q,G,ie,le,q,W],encapsulation:2});let t=i;return t})();export{Ve as OrchestraZonesChecklistComponent};
