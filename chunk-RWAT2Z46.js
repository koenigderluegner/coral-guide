import{a as re}from"./chunk-3E5SNKRJ.js";import{a as oe}from"./chunk-VYGI53R3.js";import"./chunk-YWPVSJQY.js";import{a as ie,b as ne}from"./chunk-5SUIQM33.js";import"./chunk-VIHDBGTU.js";import"./chunk-WP2B2A6N.js";import"./chunk-L5G7Q7YK.js";import{a as Q}from"./chunk-ZB23GXIF.js";import"./chunk-OCVYEX7D.js";import"./chunk-KYJPB6XG.js";import"./chunk-HWSOVV66.js";import"./chunk-H5W4AT7W.js";import"./chunk-CS6UDEWJ.js";import"./chunk-R5W7LKTI.js";import"./chunk-YRO3XTLN.js";import"./chunk-O2IAJ5L5.js";import"./chunk-EGGJNKID.js";import{a as Z}from"./chunk-7RLGG3YK.js";import"./chunk-5EZIUWJI.js";import"./chunk-IYMAANR5.js";import"./chunk-DUMUFVPR.js";import{a as ee}from"./chunk-GZYBMURB.js";import{a as W,c as X}from"./chunk-FKI6MOIH.js";import"./chunk-OYPR7CJS.js";import{b as Y}from"./chunk-QLTEDVDB.js";import"./chunk-ZNXHGMTD.js";import"./chunk-IBXLELUQ.js";import{b as te}from"./chunk-OU4TLBIG.js";import"./chunk-EJRI7FQQ.js";import"./chunk-RIQ7EVWM.js";import{g as R,h as K,j,l as z,q as U,r as H,w as J}from"./chunk-U65D7S4X.js";import"./chunk-IJY46FI3.js";import"./chunk-3AJAQBMU.js";import{g as M}from"./chunk-7C5Y62SY.js";import"./chunk-VRZECYYF.js";import{a as V}from"./chunk-IIDJZWRT.js";import"./chunk-7MFI6IJ7.js";import"./chunk-HIFLNZD5.js";import"./chunk-ZALICU3N.js";import"./chunk-47OJ7DES.js";import"./chunk-UUI6UFCU.js";import"./chunk-BFCDBX46.js";import{b as L}from"./chunk-G2FIETR4.js";import"./chunk-7DQT77OQ.js";import{i as q,t as G}from"./chunk-OHR5KDYC.js";import{Cc as $,Dc as f,Hb as d,Jb as _,Lb as h,Lc as C,Mb as g,Mc as u,Nb as x,Ob as p,Pb as l,Qb as c,Rb as v,Yb as T,Za as a,ac as F,ca as y,cc as s,ia as k,ja as b,kb as E,ob as N,oc as S,p as O,qb as P,rc as w,sa as D,sc as A,tc as B}from"./chunk-FPTGDBQG.js";import"./chunk-2QKSPLSF.js";function ce(i,o){if(i&1&&v(0,"app-offering",3),i&2){let t=o.$implicit;p("details",t)}}function se(i,o){if(i&1&&(l(0,"app-item-card-switch",0),P(1,ce,1,1,"ng-template",2),c()),i&2){let t=s();p("item",t.selectedEntity)}}function me(i,o){if(i&1){let t=T();l(0,"div",13),C(1,"entityKey"),l(2,"app-item-icon",14),F("click",function(){k(t);let n=s().$implicit,r=s(5);return b(r.showDetails(n))}),c(),l(3,"label",15),v(4,"mat-checkbox",16),c()()}if(i&2){let t,e=o,n=s().$implicit,r=s(5);S("checklist-checked",(t=r.checklistForm.get(e))==null?null:t.value)("selected-icon",r.selectedEntity&&u(1,14,r.selectedEntity)===e),a(2),p("amount",n.amount)("itemName",n.item.iconName)("quality",n.quality),a(),p("for",f("entry-",e,"-input")),a(),p("id",f("entry-",e))("name",f("entry-",e))("formControlName",e)}}function pe(i,o){if(i&1&&(d(0,me,5,16,"div",12),C(1,"entityKey")),i&2){let t,e=o.$implicit;_((t=u(1,1,e.item))?0:-1,t)}}function fe(i,o){if(i&1&&(l(0,"div",7)(1,"div",8),v(2,"img",9),l(3,"div",10)(4,"div"),w(5),c(),l(6,"div"),w(7),c()()(),l(8,"div",11),g(9,pe,2,3,null,null,h),c()()),i&2){let t=o.$implicit,e=s(4);a(),S("bg-merino-300",(e.activeOffering==null?null:e.activeOffering.title)===t.title),a(),p("alt",f("",t.title," offering icon"))("ngSrc",f("",e.bundleAssetPath()+t.imageName,".webp")),a(3),A(t.title),a(2),B(" ",t.numOfItemRequired===-1?"All":t.numOfItemRequired," required: "),a(2),x(t.requiredItems)}}function de(i,o){if(i&1&&(l(0,"div",6),g(1,fe,11,8,"div",7,h),c()),i&2){let t=s().$implicit;a(),x(t.offerings)}}function _e(i,o){if(i&1&&(l(0,"mat-tab",5),C(1,"addSpacesToPascalCase"),d(2,de,3,0,"div",6),c()),i&2){let t=o.$implicit,e=s(2);p("label",$(u(1,3,t.offeringGroupTitle))),a(2),_(e.showTable?-1:2)}}function Ce(i,o){if(i&1){let t=T();l(0,"mat-tab-group",4),F("selectedTabChange",function(n){k(t);let r=s();return b(r.updateUrl(n))}),g(1,_e,3,5,"mat-tab",5,h),c()}if(i&2){let t=s();p("formGroup",t.checklistForm)("selectedIndex",t.selectedTabIndex()),a(),x(o)}}var $e=(()=>{let o=class o extends Z{constructor(){super(),this.checklistService=y(re),this.checklistForm=new j({}),this.useBeta=y(L).getSettings().useBeta,this.bundleAssetPath=D(`assets/${this.useBeta?"beta":"live"}/items/icons/`),this._altars=[],this.urlPathFromLabel=e=>{let n=e.toLowerCase().replaceAll(" ",""),r=this._altars.find(m=>m.offeringGroupTitle.toLowerCase().replaceAll(" ","")===n);return r?r.urlPath:e.toLowerCase().replaceAll(" ","")},this.checklistForm.valueChanges.pipe(V()).subscribe({next:e=>{let n=[];Object.keys(e).forEach(r=>{e[r]&&n.push(r)}),this.checklistService.set(n)}}),this.offerings$=this._database.fetchOfferings$().pipe(O(e=>{let n=e.filter(m=>m.offeringType!=="Diving"),r=n.map(m=>m.urlPath);return this._altars=n,n.forEach(m=>{m.offerings.forEach(ae=>{ae.requiredItems.forEach(le=>{let I=M(le.item);this.checklistForm.addControl(I,new z(this.checklistService.isChecked(I),{nonNullable:!0}),{emitEvent:!1})})})}),this.activateTabFromRoute(r),n}))}showDetails(e){this.entryForToDo=e,e&&"amount"in e?super.showDetails(e.item):super.showDetails(e)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=E({type:o,selectors:[["app-offerings-checklist"]],features:[N],decls:4,vars:4,consts:[["listDetail","","context","offerings",3,"item"],[3,"formGroup","selectedIndex"],["appDatabaseItemDetails",""],[3,"details"],[3,"selectedTabChange","formGroup","selectedIndex"],[3,"label"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"flex","flex-col","gap-y-2"],[1,"rounded-lg","bg-merino","flex","items-center","gap-4","p-4"],["height","64","width","64",3,"alt","ngSrc"],[1,"flex","flex-col","text-lg","font-semibold"],[1,"icon-grid","w-full"],[1,"icon-grid-item","checklist-item","flex","flex-col",3,"checklist-checked","selected-icon"],[1,"icon-grid-item","checklist-item","flex","flex-col"],[3,"click","amount","itemName","quality"],[1,"text-white","flex","justify-center",3,"for"],[1,"flex",3,"formControlName","id","name"]],template:function(n,r){if(n&1&&(l(0,"app-list-detail-container"),d(1,se,2,1,"app-item-card-switch",0),d(2,Ce,3,2,"mat-tab-group",1),C(3,"async"),c()),n&2){let m;a(),_(r.selectedEntity?1:-1),a(),_((m=u(3,2,r.offerings$))?2:-1,m)}},dependencies:[W,J,R,K,U,H,X,ne,ie,Y,te,Q,G,ee,oe,q],encapsulation:2});let i=o;return i})();export{$e as OfferingsChecklistComponent};
