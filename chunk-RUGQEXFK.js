import{a as G}from"./chunk-XOUI6RZQ.js";import{b as g}from"./chunk-3H2ZASFZ.js";import{a as R,b as k,c as H,d as $,e as L,f as P,g as N,h as B,i as Y,j as A,k as O,l as U,m as j,n as q,o as z}from"./chunk-XWGFS45Y.js";import{b as M}from"./chunk-SNYRKERH.js";import{h as F}from"./chunk-47OJ7DES.js";import{m as y}from"./chunk-OHR5KDYC.js";import{Fb as w,Hb as c,Jb as d,Jc as E,Lc as x,Mc as T,Ob as s,Pb as n,Qb as a,Rb as _,Vb as p,Wb as r,Za as o,cc as C,kb as I,ob as D,qb as m,rc as l,sc as u,tc as h,xa as b}from"./chunk-FPTGDBQG.js";var J=t=>["/locations",t];function K(t,e){if(t&1&&(n(0,"td",17),_(1,"app-item-icon",18),a()),t&2){let i=e.$implicit;o(),s("itemName",i.item.iconName)}}function Q(t,e){t&1&&(n(0,"th",19),l(1,"Item "),a()),t&2&&w("colspan",2)}function V(t,e){if(t&1&&(n(0,"td",20),l(1),a()),t&2){let i=e.$implicit;o(),h(" ",i.item.displayName," ")}}function W(t,e){t&1&&(n(0,"th",19),l(1,"Shop "),a())}function X(t,e){if(t&1&&(n(0,"td",20)(1,"a",21),l(2),a()()),t&2){let i=e.$implicit;o(),s("routerLink",E(2,J,i.festival.url)),o(),u(i.festival.displayName)}}function Z(t,e){t&1&&(n(0,"th",22),l(1,"Town Rank "),a())}function tt(t,e){if(t&1&&(n(0,"td",23),l(1),x(2,"townrank"),a()),t&2){let i=e.$implicit;o(),h(" ",T(2,1,i.townRank)," ")}}function et(t,e){t&1&&(n(0,"th",22),l(1,"Amount limit "),a())}function it(t,e){if(t&1&&(n(0,"span"),l(1),a()),t&2){let i=C().$implicit;o(),u(i.festivalSetting.itemLimit)}}function nt(t,e){if(t&1&&(n(0,"span"),l(1),a()),t&2){let i=C().$implicit;o(),h("",i.festivalSetting.itemLimitPerYear," per year")}}function at(t,e){t&1&&(n(0,"span"),l(1,"-"),a())}function ot(t,e){if(t&1&&(n(0,"td",24),c(1,it,2,1,"span"),c(2,nt,2,1,"span"),c(3,at,2,0,"span"),a()),t&2){let i=e.$implicit;o(),d(i.festivalSetting.isLimitedItem?1:-1),o(),d(i.festivalSetting.hasYearlyLimit?2:-1),o(),d(!i.festivalSetting.isLimitedItem&&!i.festivalSetting.hasYearlyLimit?3:-1)}}function lt(t,e){t&1&&(n(0,"th",22),l(1," Discount "),a())}function mt(t,e){if(t&1&&(n(0,"span"),l(1),x(2,"percent"),a()),t&2){let i=C().$implicit;o(),u(T(2,1,i.festivalSetting.discount))}}function pt(t,e){t&1&&(n(0,"span"),l(1,"-"),a())}function rt(t,e){if(t&1&&(n(0,"td",24),c(1,mt,3,3,"span"),c(2,pt,2,0,"span"),a()),t&2){let i=e.$implicit;o(),d(i.festivalSetting.hasDiscount?1:-1),o(),d(i.festivalSetting.hasDiscount?-1:2)}}function ct(t,e){t&1&&(n(0,"th",22),l(1,"Price "),a())}function dt(t,e){if(t&1&&(n(0,"span",25),l(1),a()),t&2){let i=C().$implicit;o(),u(i.item.price)}}function st(t,e){if(t&1&&(n(0,"td",24),c(1,dt,2,1,"span",25),_(2,"app-money",26),a()),t&2){let i=e.$implicit;o(),d(i.festivalSetting.hasDiscount?1:-1),o(),s("amount",i.item.price*(1-(i.festivalSetting.hasDiscount?i.festivalSetting.discount:0)))}}function _t(t,e){t&1&&(n(0,"th",22),l(1,"Sell price "),a())}function Ct(t,e){if(t&1&&(n(0,"td",24),_(1,"app-money",26),a()),t&2){let i=e.$implicit;o(),s("amount",i.item.sellPrice)}}function ft(t,e){t&1&&_(0,"tr",27)}function ut(t,e){t&1&&_(0,"tr",28)}function ht(t,e){if(t&1&&(n(0,"table",0),p(1,1),m(2,K,2,1,"td",2),r(),p(3,3),m(4,Q,2,1,"th",4)(5,V,2,1,"td",5),r(),p(6,6),m(7,W,2,0,"th",4)(8,X,3,4,"td",5),r(),p(9,7),m(10,Z,2,0,"th",8)(11,tt,3,3,"td",9),r(),p(12,10),m(13,et,2,0,"th",8)(14,ot,4,3,"td",11),r(),p(15,12),m(16,lt,2,0,"th",8)(17,rt,3,2,"td",11),r(),p(18,13),m(19,ct,2,0,"th",8)(20,st,3,2,"td",11),r(),p(21,14),m(22,_t,2,0,"th",8)(23,Ct,2,1,"td",11),r(),m(24,ft,1,0,"tr",15)(25,ut,1,0,"tr",16),a()),t&2){let i=C();s("dataSource",i.matDataSource),o(24),s("matHeaderRowDef",i.displayHeaderColumns)("matHeaderRowDefSticky",!0),o(),s("matRowDefColumns",i.displayedColumns)}}var gt=(()=>{let e=class e extends q{constructor(){super(...arguments),this.BASE_DISPLAY_COLUMNS=["icon","displayName","townRank","limit","discount","price","sellPrice"]}ngOnInit(){this._dataSource().length&&this._dataSource()[0].festival&&(this.displayedColumns.splice(2,0,"shop"),this.displayHeaderColumns=this.displayedColumns.filter(f=>f!=="icon"))}};e.\u0275fac=(()=>{let f;return function(v){return(f||(f=b(e)))(v||e)}})(),e.\u0275cmp=I({type:e,selectors:[["app-festival-shop-item-table"]],features:[D],decls:2,vars:1,consts:[["mat-table","","matSort","",3,"dataSource"],["matColumnDef","icon","sticky",""],["class","!pl-2 !pr-0 w-10 text-center icon-col ","mat-cell","",4,"matCellDef"],["matColumnDef","displayName"],["class","backdrop-blur-xl","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","text-col whitespace-nowrap","mat-cell","",4,"matCellDef"],["matColumnDef","shop"],["matColumnDef","townRank"],["class","backdrop-blur-xl whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","text-col w-[1%]","mat-cell","",4,"matCellDef"],["matColumnDef","limit"],["class","text-col !text-right w-[1%]","mat-cell","",4,"matCellDef"],["matColumnDef","discount"],["matColumnDef","price"],["matColumnDef","sellPrice"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-cell","",1,"!pl-2","!pr-0","w-10","text-center","icon-col"],[3,"itemName"],["mat-header-cell","","mat-sort-header","",1,"backdrop-blur-xl"],["mat-cell","",1,"text-col","whitespace-nowrap"],[1,"underline",3,"routerLink"],["mat-header-cell","","mat-sort-header","",1,"backdrop-blur-xl","whitespace-nowrap"],["mat-cell","",1,"text-col","w-[1%]"],["mat-cell","",1,"text-col","!text-right","w-[1%]"],[1,"line-through","mr-3"],[3,"amount"],["mat-header-row",""],["mat-row",""]],template:function(S,v){S&1&&(n(0,"app-responsive-table"),c(1,ht,26,4,"table",0),a()),S&2&&(o(),d(v.matDataSource?1:-1))},dependencies:[g,F,j,M,O,R,H,N,$,k,B,L,P,Y,A,z,U,y,G],encapsulation:2});let t=e;return t})();export{gt as a};
