import{a as Nt,b as Bt}from"./chunk-D4XXG6A2.js";import"./chunk-XCXL4XHH.js";import{a as Pt,b as jt}from"./chunk-6GSJA3FK.js";import"./chunk-SDZD6YCY.js";import"./chunk-M4K5OVLF.js";import{a as B}from"./chunk-YH33I3GS.js";import"./chunk-DPHI5PSG.js";import"./chunk-XQTXOEWR.js";import"./chunk-6NCSHYGI.js";import"./chunk-OGS4EVII.js";import"./chunk-6YB7A7ZH.js";import"./chunk-GBZAIAZB.js";import"./chunk-ODWDCLXK.js";import"./chunk-F4TUYCIO.js";import{a as Et}from"./chunk-4ZSEYW2U.js";import"./chunk-SKYGTZSD.js";import"./chunk-4FC5X73U.js";import{a as T}from"./chunk-EEJJBISB.js";import"./chunk-W62UHBDW.js";import{a as gt}from"./chunk-MG3YOV2C.js";import{a as wt,b as It}from"./chunk-32PODRCK.js";import{b as vt,c as St}from"./chunk-MCZ27GCN.js";import"./chunk-XCL4JOYZ.js";import"./chunk-EAHNU44C.js";import{a as Tt,b as bt}from"./chunk-3NZE6WSA.js";import{c as kt}from"./chunk-NS43UFKU.js";import"./chunk-DS5QD6KN.js";import{e as Ft}from"./chunk-VEYYY66H.js";import"./chunk-4I65K53K.js";import{c as mt,g as ut,l as pt,m as ht,p as ft,v as _t,w as yt}from"./chunk-AZ3T5YEV.js";import"./chunk-7MLGAPHH.js";import{d as Dt}from"./chunk-IP6ODCNA.js";import"./chunk-5BU3IDKS.js";import"./chunk-I7ZNO67X.js";import{a as xt}from"./chunk-24VFFX2T.js";import{a as N}from"./chunk-7M6VBWZN.js";import"./chunk-C6P6X2N5.js";import"./chunk-YU6OV3L2.js";import"./chunk-OTWAXCZF.js";import{h as Ct}from"./chunk-NKAP6NYB.js";import{c as dt}from"./chunk-KM3RDE6Q.js";import"./chunk-JY3RTIIU.js";import"./chunk-2SASL4UW.js";import"./chunk-B7M7KWVX.js";import"./chunk-PK2RARDK.js";import{$b as g,A as U,Gb as u,Ib as p,Kb as E,Kc as ot,Lb as F,Lc as it,Mb as k,Nb as h,Ob as r,Pb as s,Qb as w,Qc as rt,Rc as st,Sc as at,Tc as lt,Xb as v,Xc as j,Ya as a,Yc as C,Zc as ct,bc as d,ca as y,cc as K,dc as W,ia as D,ja as x,jb as S,jc as H,kc as J,nb as Y,nc as I,oa as $,pb as G,qc as l,rc as _,sa as Q,sc as X,tc as Z,vc as tt,wc as et,xc as nt}from"./chunk-ELCUH6OG.js";import{f as P,g as A,h as V}from"./chunk-IGH4DTA6.js";var O=["offerings","journal_fish","journal_critter","journal_insects","journal_gems","journal_fossils","journal_artifacts","journal_crops","journal_animal_produce","journal_scavangables","journal_ocean_produce","cooking_recipes","crafting","artisan","museum","uncategorized","item_mixing","database"],q={offerings:"Offerings",journal_fish:"Fish",journal_critter:"Sea Critter",journal_insects:"Insects",journal_gems:"Gems",journal_fossils:"Fossils",journal_artifacts:"Artifacts",journal_crops:"Crops",journal_animal_produce:"Animal Produce",journal_ocean_produce:"Ocean Produce",journal_scavangables:"Scavangables",cooking_recipes:"Cooking recipes",crafting:"Crafting",artisan:"Artisan",museum:"Museum",uncategorized:"Uncategorized",item_mixing:"Item mixing",database:"Database"};var b=(function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t})(b||{});function R(t,n){return{type:b.Trigger,name:t,definitions:n,options:{}}}function z(t,n=null){return{type:b.Animate,styles:n,timings:t}}function M(t){return{type:b.Style,styles:t,offset:null}}function L(t,n,e=null){return{type:b.Transition,expr:t,animation:n,options:e}}var Ot=["*"];function Rt(t,n){if(t&1&&w(0,"app-rarity-icon",6),t&2){let e=d(2);h("quality",e.quality())}}function zt(t,n){if(t&1){let e=v();r(0,"div",3),g("click",function(){D(e);let c=d();return x(c.entrySelected.emit(c.item()))}),w(1,"app-item-icon",4),r(2,"span",5),l(3),ot(4,"translate"),s(),u(5,Rt,1,1,"app-rarity-icon",6),s()}if(t&2){let e=d();a(),h("itemName",e.item().iconName),a(),I("line-through",e.isChecked),a(),_(it(4,5,e.item().displayName)),a(2),p(e.quality()?5:-1)}}var Mt=(()=>{var n,e;let o=class o{constructor(){A(this,n);A(this,e);this.amount=C(),this.quality=C(),this.item=C.required(),this.category=C.required(),this.entrySelected=j(),this.checkbox=ct(B),this.qualities=dt,this.isChecked=!1,V(this,n,y(T)),V(this,e,y($))}ngOnInit(){P(this,n).categoryCompleted$().pipe(N(P(this,e)),U(i=>i===this.category())).subscribe({next:()=>{this.toggleCompletionStatus(!0);let i=this.checkbox();i&&(i.checked=!0)}})}toggleCompletionStatus(i){this.isChecked=i,P(this,n).updateStatus(this.category(),this.item(),i)}};n=new WeakMap,e=new WeakMap,o.\u0275fac=function(m){return new(m||o)},o.\u0275cmp=S({type:o,selectors:[["app-to-do-entry-base"]],viewQuery:function(m,f){m&1&&H(f.checkbox,B,5),m&2&&J()},hostVars:2,hostBindings:function(m,f){m&2&&I("opacity-50",f.isChecked)},inputs:{amount:[1,"amount"],quality:[1,"quality"],item:[1,"item"],category:[1,"category"]},outputs:{entrySelected:"entrySelected"},ngContentSelectors:Ot,decls:5,vars:2,consts:[[1,"flex","gap-2","items-center","cursor-pointer"],[1,"ml-auto","font-semibold","mr-4"],[3,"change"],[1,"flex","gap-2","items-center","cursor-pointer",3,"click"],[1,"!w-7",3,"itemName"],[1,"ml-1","whitespace-nowrap"],[1,"!w-4",3,"quality"]],template:function(m,f){m&1&&(K(),u(0,zt,6,7,"div",0),W(1),r(2,"span",1),l(3),s(),r(4,"mat-checkbox",2),g("change",function(Vt){return f.toggleCompletionStatus(Vt.checked)}),s()),m&2&&(p(f.item()?0:-1),a(3),_(f.amount()?"x"+f.amount():""))},dependencies:[B,Tt,bt,Dt],styles:["[_nghost-%COMP%]{display:flex;height:48px;align-items:center;gap:.5rem;border-radius:1rem;background-color:rgb(0 0 0 / var(--tw-bg-opacity));--tw-bg-opacity: .05;padding-left:1rem;padding-right:1rem;font-size:1.125rem;line-height:1.75rem;--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity))}"]});let t=o;return t})();function Lt(t,n){if(t&1){let e=v();r(0,"app-to-do-entry-base",4),g("entrySelected",function(c){D(e);let i=d(2);return x(i.entrySelected.emit(c))}),s()}if(t&2){let e=n.$implicit,o=d(2);h("amount",e.amount)("category",o.context())("item",e.itemEntry)("quality",e.quality)("@leaveAnimation",void 0)}}function Ut(t,n){if(t&1){let e=v();r(0,"header",0)(1,"h2",1),l(2),s(),r(3,"button",2),g("click",function(){D(e);let c=d();return x(c.completeList())}),l(4,"complete list"),s()(),r(5,"div"),F(6,Lt,1,5,"app-to-do-entry-base",3,E),s()}if(t&2){let e,o=d();a(2),_(o.context()==="uncategorized"||o.context()===void 0?"Uncategorized":o.ToDoContextDisplayNames[o.context()]),a(3),h("@.disabled",!((e=o.toDoId())!=null&&e.includes(o.context())||o.toDoId()===void 0)),a(),k(o.data)}}var At=(()=>{let n=class n{constructor(){this.entrySelected=j(),this.context=C.required(),this.toDoId=C(),this.hidden=st(()=>!this.toDoId()?.includes(this.context())||!this.data.length),this.ToDoContextDisplayNames=q,this.toDoService=y(T)}get data(){return this.toDoService.getCategoryList(this.context()==="uncategorized"?void 0:this.context())}completeList(){this.toDoService.completeCategory(this.context()==="uncategorized"?void 0:this.context())}};n.\u0275fac=function(c){return new(c||n)},n.\u0275cmp=S({type:n,selectors:[["app-to-do-partial"]],hostVars:2,hostBindings:function(c,i){c&2&&I("hidden",i.hidden())},inputs:{context:[1,"context"],toDoId:[1,"toDoId"]},outputs:{entrySelected:"entrySelected"},decls:1,vars:1,consts:[[1,"flex","justify-between","items-center","mt-5","mb-2"],[1,"font-semibold","text-xl","text-black"],[1,"btn-amber",3,"click"],[1,"mb-2","block",3,"amount","category","item","quality"],[1,"mb-2","block",3,"entrySelected","amount","category","item","quality"]],template:function(c,i){if(c&1&&u(0,Ut,8,2),c&2){let m;p(i.data.length&&((m=i.toDoId())!=null&&m.includes(i.context()))?0:-1)}},dependencies:[Mt],encapsulation:2,data:{animation:[R("leaveAnimation",[L(":leave",[M({height:"*",opacity:1}),z("200ms ease-in",M({height:0,opacity:0}))])])]}});let t=n;return t})();function $t(t,n){if(t&1&&w(0,"app-offering",15),t&2){let e=n.$implicit;h("details",e)}}function Qt(t,n){if(t&1&&(r(0,"app-item-card-switch",1),G(1,$t,1,1,"ng-template",14),s()),t&2){let e=d();h("item",e.selectedEntity)("context",e.selectedContext())}}function Yt(t,n){t&1&&l(0," All ")}function Gt(t,n){if(t&1&&(r(0,"span",16),l(1),s()),t&2){let e=d(3);a(),Z(" (+",e.toDoCategoryControl.value.length-1," ",e.toDoCategoryControl.value.length===2?"other":"others"," ) ")}}function Kt(t,n){if(t&1&&(l(0),u(1,Gt,2,2,"span",16)),t&2){let e=d(2);X(" ",e.toDoCategoryControl.value[0]!=="all"?e.toDoCategoryControl.value[0]==="uncategorized"?"Uncategorized":e.toDoContextDisplayNames[e.toDoCategoryControl.value[0]]:""," "),a(),p(e.toDoCategoryControl.value.length>1?1:-1)}}function Wt(t,n){if(t&1&&u(0,Kt,2,2),t&2){let e=d();p(e.toDoCategoryControl.value.length?0:-1)}}function Ht(t,n){if(t&1&&(r(0,"mat-option",7)(1,"div",2)(2,"span"),l(3),s(),r(4,"span"),l(5),s()()()),t&2){let e=n.$implicit,o=d();h("value",e),a(3),_(o.toDoContextDisplayNames[e]),a(2),_(o.toDoService.getCategoryList(e).length)}}function Jt(t,n){if(t&1){let e=v();r(0,"app-to-do-partial",17),g("entrySelected",function(c){let i=D(e).$implicit,m=d();return x(m.openEntry(c,i))}),s()}if(t&2){let e=n.$implicit,o=d();h("context",e)("toDoId",o.toDoCategoryControl.value)}}function Xt(t,n){t&1&&(r(0,"div",13)(1,"h2",9),l(2,"No entries in to-do list"),s(),r(3,"p",18),l(4," Your current to-do list is empty! Visit the "),r(5,"a",19),l(6,"journal"),s(),l(7,", the "),r(8,"a",20),l(9,"offerings"),s(),l(10," or other places to add entries to your to-do list. "),s()())}function Zt(t,n){t&1&&(r(0,"div",13)(1,"h2",9),l(2,"No entries for selection"),s(),r(3,"p",18),l(4," There are no entries for your current filter settings. "),s()())}var en=(()=>{let n=class n extends St{constructor(){super(),this.toDoContexts=O,this.toDoContextDisplayNames=q,this.toDoCategoryControl=new pt(["all",...O,"uncategorized"],{nonNullable:!0}),this.toDoService=y(T),this.userDataService=y(gt),this.todoText=lt(()=>this.userDataService.currentData().todoText),this.selectedContext=Q("uncategorized"),this.hadAllBefore=!0,this.toDoCategoryControl.valueChanges.pipe(N()).subscribe({next:o=>{this.hadAllBefore&&!o.includes("all")?(this.toDoCategoryControl.setValue([],{emitEvent:!1}),this.hadAllBefore=!1):!this.hadAllBefore&&o.includes("all")?(this.toDoCategoryControl.setValue(["all",...this.toDoContexts],{emitEvent:!1}),this.hadAllBefore=!0):this.hadAllBefore&&o.length<this.toDoContexts.length+1&&(this.toDoCategoryControl.setValue(o.filter(c=>c!=="all"),{emitEvent:!1}),this.hadAllBefore=!1)}}),at(()=>{let o=this.todoText();rt(()=>{this.userDataService.currentData().todoText=o,this.userDataService.save()})})}openEntry(o,c){this.showDetails(o),this.selectedContext.set(c)}};n.\u0275fac=function(c){return new(c||n)},n.\u0275cmp=S({type:n,selectors:[["app-to-do"]],features:[Y],decls:33,vars:10,consts:[[3,"removePlaceholder"],["listDetail","",3,"item","context"],[1,"flex","justify-between"],[1,"mb-4","font-semibold","text-2xl","text-black"],[1,"btn","btn-secondary"],["multiple","","placeholder","None",3,"formControl"],["value","all"],[3,"value"],["value","uncategorized"],[1,"mb-2","mt-4","font-semibold","text-xl","text-black"],[1,"btn","btn-secondary","mb-8"],["matInput","","cdkTextareaAutosize","false",1,"field-sizing-content","min-h-18","max-h-60",3,"ngModelChange","ngModel"],[3,"context","toDoId"],[1,"show-when-none-displayed"],["appDatabaseItemDetails",""],[3,"details"],[1,"text-sm","opacity-80"],[3,"entrySelected","context","toDoId"],[1,"text-black"],["routerLink","/journal/produce/crops",1,"underline"],["routerLink","/locations/lake-temple",1,"underline"]],template:function(c,i){c&1&&(r(0,"app-list-detail-container",0),u(1,Qt,2,2,"app-item-card-switch",1),r(2,"app-card")(3,"div",2)(4,"h1",3),l(5,"To-Dos"),s(),r(6,"mat-form-field",4)(7,"mat-select",5)(8,"mat-select-trigger"),u(9,Yt,1,0),u(10,Wt,1,1),s(),r(11,"mat-option",6)(12,"div",2)(13,"span"),l(14,"All"),s(),r(15,"span"),l(16),s()()(),F(17,Ht,6,3,"mat-option",7,E),r(19,"mat-option",8)(20,"div",2)(21,"span"),l(22,"Uncategorized"),s(),r(23,"span"),l(24),s()()()()()(),r(25,"h2",9),l(26,"Custom to-dos"),s(),r(27,"mat-form-field",10)(28,"textarea",11),nt("ngModelChange",function(f){return et(i.todoText,f)||(i.todoText=f),f}),s()(),F(29,Jt,1,2,"app-to-do-partial",12,E),u(31,Xt,11,0,"div",13),u(32,Zt,5,0,"div",13),s()()),c&2&&(h("removePlaceholder",i.showTable),a(),p(i.selectedEntity?1:-1),a(6),h("formControl",i.toDoCategoryControl),a(2),p(i.toDoCategoryControl.value.includes("all")?9:-1),a(),p(i.toDoCategoryControl.value.includes("all")?-1:10),a(6),_(i.toDoService.currentToDoAmount),a(),k(i.toDoContexts),a(7),_(i.toDoService.getCategoryList().length),a(4),tt("ngModel",i.todoText),a(),k(i.toDoContexts),a(2),p(i.toDoService.currentIsEmpty?31:-1),a(),p(i.toDoService.currentIsEmpty?-1:32))},dependencies:[At,wt,It,Ft,xt,Bt,Nt,vt,Et,kt,yt,mt,ut,ft,jt,Ct,Pt,_t,ht],styles:["app-to-do-partial[_ngcontent-%COMP%]:not(.hidden) ~ .show-when-none-displayed[_ngcontent-%COMP%]{display:none}"]});let t=n;return t})();export{en as ToDoComponent};
