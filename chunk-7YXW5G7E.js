import{a as G}from"./chunk-3KO7CVQP.js";import{b as g}from"./chunk-W62UHBDW.js";import{a as R,b as k,c as H,d as $,e as L,f as P,g as N,h as B,i as Y,j as A,k as O,l as U,m as j,n as q,o as z}from"./chunk-PEGVYEIS.js";import{b as M}from"./chunk-3NZE6WSA.js";import{d as F}from"./chunk-IP6ODCNA.js";import{h as y}from"./chunk-NKAP6NYB.js";import{m as E}from"./chunk-PK2RARDK.js";import{Eb as I,Gb as c,Ib as d,Ic as D,Kc as u,Lc as h,Nb as s,Ob as n,Pb as a,Qb as _,Sc as w,Ub as p,Vb as r,Ya as o,bc as f,jb as T,nb as b,pb as m,qc as l,rc as C,sc as v}from"./chunk-ELCUH6OG.js";var K=e=>["/locations",e];function Q(e,t){if(e&1&&(n(0,"td",17),_(1,"app-item-icon",18),a()),e&2){let i=t.$implicit;o(),s("itemName",i.item.iconName)}}function V(e,t){e&1&&(n(0,"th",19),l(1,"Item "),a()),e&2&&I("colspan",2)}function W(e,t){if(e&1&&(n(0,"td",20),l(1),u(2,"translate"),a()),e&2){let i=t.$implicit;o(),v(" ",h(2,1,i.item.displayName)," ")}}function X(e,t){e&1&&(n(0,"th",19),l(1,"Shop "),a())}function Z(e,t){if(e&1&&(n(0,"td",20)(1,"a",21),l(2),u(3,"translate"),a()()),e&2){let i=t.$implicit;o(),s("routerLink",D(4,K,i.festival.url)),o(),C(h(3,2,i.festival.displayName))}}function ee(e,t){e&1&&(n(0,"th",22),l(1,"Town Rank "),a())}function te(e,t){if(e&1&&(n(0,"td",23),l(1),u(2,"townrank"),a()),e&2){let i=t.$implicit;o(),v(" ",h(2,1,i.townRank)," ")}}function ie(e,t){e&1&&(n(0,"th",22),l(1,"Amount limit "),a())}function ne(e,t){if(e&1&&(n(0,"span"),l(1),a()),e&2){let i=f().$implicit;o(),C(i.festivalSetting.itemLimit)}}function ae(e,t){if(e&1&&(n(0,"span"),l(1),a()),e&2){let i=f().$implicit;o(),v("",i.festivalSetting.itemLimitPerYear," per year")}}function oe(e,t){e&1&&(n(0,"span"),l(1,"-"),a())}function le(e,t){if(e&1&&(n(0,"td",24),c(1,ne,2,1,"span"),c(2,ae,2,1,"span"),c(3,oe,2,0,"span"),a()),e&2){let i=t.$implicit;o(),d(i.festivalSetting.isLimitedItem?1:-1),o(),d(i.festivalSetting.hasYearlyLimit?2:-1),o(),d(!i.festivalSetting.isLimitedItem&&!i.festivalSetting.hasYearlyLimit?3:-1)}}function me(e,t){e&1&&(n(0,"th",22),l(1," Discount "),a())}function pe(e,t){if(e&1&&(n(0,"span"),l(1),u(2,"percent"),a()),e&2){let i=f().$implicit;o(),C(h(2,1,i.festivalSetting.discount))}}function re(e,t){e&1&&(n(0,"span"),l(1,"-"),a())}function ce(e,t){if(e&1&&(n(0,"td",24),c(1,pe,3,3,"span"),c(2,re,2,0,"span"),a()),e&2){let i=t.$implicit;o(),d(i.festivalSetting.hasDiscount?1:-1),o(),d(i.festivalSetting.hasDiscount?-1:2)}}function de(e,t){e&1&&(n(0,"th",22),l(1,"Price "),a())}function se(e,t){if(e&1&&(n(0,"span",25),l(1),a()),e&2){let i=f().$implicit;o(),C(i.item.price)}}function _e(e,t){if(e&1&&(n(0,"td",24),c(1,se,2,1,"span",25),_(2,"app-money",26),a()),e&2){let i=t.$implicit;o(),d(i.festivalSetting.hasDiscount?1:-1),o(),s("amount",i.item.price*(1-(i.festivalSetting.hasDiscount?i.festivalSetting.discount:0)))}}function fe(e,t){e&1&&(n(0,"th",22),l(1,"Sell price "),a())}function Ce(e,t){if(e&1&&(n(0,"td",24),_(1,"app-money",26),a()),e&2){let i=t.$implicit;o(),s("amount",i.item.sellPrice)}}function ue(e,t){e&1&&_(0,"tr",27)}function he(e,t){e&1&&_(0,"tr",28)}function Se(e,t){if(e&1&&(n(0,"table",0),p(1,1),m(2,Q,2,1,"td",2),r(),p(3,3),m(4,V,2,1,"th",4)(5,W,3,3,"td",5),r(),p(6,6),m(7,X,2,0,"th",4)(8,Z,4,6,"td",5),r(),p(9,7),m(10,ee,2,0,"th",8)(11,te,3,3,"td",9),r(),p(12,10),m(13,ie,2,0,"th",8)(14,le,4,3,"td",11),r(),p(15,12),m(16,me,2,0,"th",8)(17,ce,3,2,"td",11),r(),p(18,13),m(19,de,2,0,"th",8)(20,_e,3,2,"td",11),r(),p(21,14),m(22,fe,2,0,"th",8)(23,Ce,2,1,"td",11),r(),m(24,ue,1,0,"tr",15)(25,he,1,0,"tr",16),a()),e&2){let i=f();s("dataSource",i.matDataSource),o(24),s("matHeaderRowDef",i.displayHeaderColumns)("matHeaderRowDefSticky",!0),o(),s("matRowDefColumns",i.displayedColumns)}}var He=(()=>{let t=class t extends q{constructor(){super(),this.BASE_DISPLAY_COLUMNS=["icon","displayName","townRank","limit","discount","price","sellPrice"],w(()=>{this._dataSource().length&&this._dataSource()[0].festival&&(this.displayedColumns.splice(2,0,"shop"),this.displayHeaderColumns=this.displayedColumns.filter(x=>x!=="icon"))})}};t.\u0275fac=function(S){return new(S||t)},t.\u0275cmp=T({type:t,selectors:[["app-festival-shop-item-table"]],features:[b],decls:2,vars:1,consts:[["mat-table","","matSort","",3,"dataSource"],["matColumnDef","icon","sticky",""],["class","!pl-2 !pr-0 w-10 text-center icon-col ","mat-cell","",4,"matCellDef"],["matColumnDef","displayName"],["class","backdrop-blur-xl","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","text-col whitespace-nowrap","mat-cell","",4,"matCellDef"],["matColumnDef","shop"],["matColumnDef","townRank"],["class","backdrop-blur-xl whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","text-col w-[1%]","mat-cell","",4,"matCellDef"],["matColumnDef","limit"],["class","text-col !text-right w-[1%]","mat-cell","",4,"matCellDef"],["matColumnDef","discount"],["matColumnDef","price"],["matColumnDef","sellPrice"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-cell","",1,"!pl-2","!pr-0","w-10","text-center","icon-col"],[3,"itemName"],["mat-header-cell","","mat-sort-header","",1,"backdrop-blur-xl"],["mat-cell","",1,"text-col","whitespace-nowrap"],[1,"underline",3,"routerLink"],["mat-header-cell","","mat-sort-header","",1,"backdrop-blur-xl","whitespace-nowrap"],["mat-cell","",1,"text-col","w-[1%]"],["mat-cell","",1,"text-col","!text-right","w-[1%]"],[1,"line-through","mr-3"],[3,"amount"],["mat-header-row",""],["mat-row",""]],template:function(S,J){S&1&&(n(0,"app-responsive-table"),c(1,Se,26,4,"table",0),a()),S&2&&(o(),d(J.matDataSource?1:-1))},dependencies:[g,y,j,M,O,R,H,N,$,k,B,L,P,Y,A,z,U,E,G,F],encapsulation:2});let e=t;return e})();export{He as a};
