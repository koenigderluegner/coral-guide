import{a as ae}from"./chunk-VYGI53R3.js";import{a as re}from"./chunk-YWPVSJQY.js";import{a as ne,b as oe}from"./chunk-5SUIQM33.js";import"./chunk-VIHDBGTU.js";import"./chunk-WP2B2A6N.js";import"./chunk-L5G7Q7YK.js";import{a as Q}from"./chunk-ZB23GXIF.js";import"./chunk-OCVYEX7D.js";import"./chunk-KYJPB6XG.js";import"./chunk-HWSOVV66.js";import"./chunk-H5W4AT7W.js";import"./chunk-CS6UDEWJ.js";import"./chunk-R5W7LKTI.js";import"./chunk-YRO3XTLN.js";import"./chunk-O2IAJ5L5.js";import"./chunk-EGGJNKID.js";import{a as ee}from"./chunk-7RLGG3YK.js";import"./chunk-5EZIUWJI.js";import"./chunk-IYMAANR5.js";import"./chunk-DUMUFVPR.js";import{a as te}from"./chunk-GZYBMURB.js";import{a as W,c as X}from"./chunk-FKI6MOIH.js";import"./chunk-OYPR7CJS.js";import{b as Y}from"./chunk-QLTEDVDB.js";import"./chunk-ZNXHGMTD.js";import"./chunk-IBXLELUQ.js";import{b as ie}from"./chunk-OU4TLBIG.js";import"./chunk-EJRI7FQQ.js";import"./chunk-RIQ7EVWM.js";import{g as j,h as R,j as z,l as K,q as U,r as H,w as J}from"./chunk-U65D7S4X.js";import"./chunk-IJY46FI3.js";import"./chunk-3AJAQBMU.js";import{g as M}from"./chunk-7C5Y62SY.js";import"./chunk-VRZECYYF.js";import{a as V}from"./chunk-IIDJZWRT.js";import"./chunk-7MFI6IJ7.js";import"./chunk-HIFLNZD5.js";import"./chunk-ZALICU3N.js";import"./chunk-47OJ7DES.js";import"./chunk-UUI6UFCU.js";import"./chunk-BFCDBX46.js";import{b as L}from"./chunk-G2FIETR4.js";import"./chunk-7DQT77OQ.js";import{i as q,t as G}from"./chunk-OHR5KDYC.js";import{Cc as Z,Dc as d,Hb as f,Jb as _,Lb as C,Lc as h,Mb as g,Mc as u,Nb as x,Ob as p,Pb as l,Qb as c,Rb as v,Yb as F,Z as D,Za as a,ac as T,ca as y,cc as s,ia as b,ja as k,kb as N,ob as P,oc as S,p as O,qb as A,rc as w,sa as E,sc as B,tc as $}from"./chunk-FPTGDBQG.js";import"./chunk-2QKSPLSF.js";var le=(()=>{let i=class i extends re{constructor(){super("orchestra-zones")}};i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=D({token:i,factory:i.\u0275fac,providedIn:"root"});let t=i;return t})();function pe(t,i){if(t&1&&v(0,"app-offering",3),t&2){let n=i.$implicit;p("details",n)}}function de(t,i){if(t&1&&(l(0,"app-item-card-switch",0),A(1,pe,1,1,"ng-template",2),c()),t&2){let n=s();p("item",n.selectedEntity)}}function fe(t,i){if(t&1){let n=F();l(0,"div",13),h(1,"entityKey"),l(2,"app-item-icon",14),T("click",function(){b(n);let o=s().$implicit,r=s(5);return k(r.showDetails(o))}),c(),l(3,"label",15),v(4,"mat-checkbox",16),c()()}if(t&2){let n,e=i,o=s().$implicit,r=s(5);S("checklist-checked",(n=r.checklistForm.get(e))==null?null:n.value)("selected-icon",r.selectedEntity&&u(1,14,r.selectedEntity)===e),a(2),p("amount",o.amount)("itemName",o.item.iconName)("quality",o.quality),a(),p("for",d("entry-",e,"-input")),a(),p("id",d("entry-",e))("name",d("entry-",e))("formControlName",e)}}function _e(t,i){if(t&1&&(f(0,fe,5,16,"div",12),h(1,"entityKey")),t&2){let n,e=i.$implicit;_((n=u(1,1,e.item))?0:-1,n)}}function he(t,i){if(t&1&&(l(0,"div",7)(1,"div",8),v(2,"img",9),l(3,"div",10)(4,"div"),w(5),c(),l(6,"div"),w(7),c()()(),l(8,"div",11),g(9,_e,2,3,null,null,C),c()()),t&2){let n=i.$implicit,e=s(4);a(),S("bg-merino-300",(e.activeOffering==null?null:e.activeOffering.title)===n.title),a(),p("alt",d("",n.title," offering icon"))("ngSrc",d("",e.bundleAssetPath()+n.imageName,".webp")),a(3),B(n.title),a(2),$(" ",n.numOfItemRequired===-1?"All":n.numOfItemRequired," required: "),a(2),x(n.requiredItems)}}function ue(t,i){if(t&1&&(l(0,"div",6),g(1,he,11,8,"div",7,C),c()),t&2){let n=s().$implicit;a(),x(n.offerings)}}function Ce(t,i){if(t&1&&(l(0,"mat-tab",5),h(1,"addSpacesToPascalCase"),f(2,ue,3,0,"div",6),c()),t&2){let n=i.$implicit,e=s(2);p("label",Z(u(1,3,n.offeringGroupTitle))),a(2),_(e.showTable?-1:2)}}function ge(t,i){if(t&1){let n=F();l(0,"mat-tab-group",4),T("selectedTabChange",function(o){b(n);let r=s();return k(r.updateUrl(o))}),g(1,Ce,3,5,"mat-tab",5,C),c()}if(t&2){let n=s();p("formGroup",n.checklistForm)("selectedIndex",n.selectedTabIndex()),a(),x(i)}}var Me=(()=>{let i=class i extends ee{constructor(){super(),this.checklistService=y(le),this.checklistForm=new z({}),this.useBeta=y(L).getSettings().useBeta,this.bundleAssetPath=E(`assets/${this.useBeta?"beta":"live"}/items/icons/`),this._altars=[],this.urlPathFromLabel=e=>{let o=e.toLowerCase().replaceAll(" ",""),r=this._altars.find(m=>m.offeringGroupTitle.toLowerCase().replaceAll(" ","")===o);return r?r.urlPath:e.toLowerCase().replaceAll(" ","")},this.checklistForm.valueChanges.pipe(V()).subscribe({next:e=>{let o=[];Object.keys(e).forEach(r=>{e[r]&&o.push(r)}),this.checklistService.set(o)}}),this.offerings$=this._database.fetchOfferings$().pipe(O(e=>{let o=e.filter(m=>m.offeringType==="Diving"),r=o.map(m=>m.urlPath);return this._altars=o,o.forEach(m=>{m.offerings.forEach(ce=>{ce.requiredItems.forEach(se=>{let I=M(se.item);this.checklistForm.addControl(I,new K(this.checklistService.isChecked(I),{nonNullable:!0}),{emitEvent:!1})})})}),this.activateTabFromRoute(r),o}))}showDetails(e){this.entryForToDo=e,e&&"amount"in e?super.showDetails(e.item):super.showDetails(e)}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=N({type:i,selectors:[["app-orchestra-zones-checklist"]],features:[P],decls:4,vars:4,consts:[["listDetail","","context","offerings",3,"item"],[3,"formGroup","selectedIndex"],["appDatabaseItemDetails",""],[3,"details"],[3,"selectedTabChange","formGroup","selectedIndex"],[3,"label"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"flex","flex-col","gap-y-2"],[1,"rounded-lg","bg-merino","flex","items-center","gap-4","p-4"],["height","64","width","64",3,"alt","ngSrc"],[1,"flex","flex-col","text-lg","font-semibold"],[1,"icon-grid","w-full"],[1,"icon-grid-item","checklist-item","flex","flex-col",3,"checklist-checked","selected-icon"],[1,"icon-grid-item","checklist-item","flex","flex-col"],[3,"click","amount","itemName","quality"],[1,"text-white","flex","justify-center",3,"for"],[1,"flex",3,"formControlName","id","name"]],template:function(o,r){if(o&1&&(l(0,"app-list-detail-container"),f(1,de,2,1,"app-item-card-switch",0),f(2,ge,3,2,"mat-tab-group",1),h(3,"async"),c()),o&2){let m;a(),_(r.selectedEntity?1:-1),a(),_((m=u(3,2,r.offerings$))?2:-1,m)}},dependencies:[W,J,j,R,U,H,X,oe,ne,Y,ie,Q,G,te,ae,q],encapsulation:2});let t=i;return t})();export{Me as OrchestraZonesChecklistComponent};
