import{a as de}from"./chunk-DEF2ZAKD.js";import"./chunk-JSS26DYL.js";import{a as fe}from"./chunk-G5SCOV4B.js";import{a as pe}from"./chunk-MQOUN7DP.js";import{a as ce,b as le}from"./chunk-D4XXG6A2.js";import{a as _e}from"./chunk-KDKB2PV6.js";import{a as se}from"./chunk-AEQRSF3N.js";import"./chunk-TVWIYZG5.js";import"./chunk-XCXL4XHH.js";import{a as me}from"./chunk-ID6WLUT2.js";import{a as re}from"./chunk-IFP3IRQO.js";import{a as oe}from"./chunk-BF3I4LGD.js";import"./chunk-SDZD6YCY.js";import"./chunk-M4K5OVLF.js";import{a as z}from"./chunk-YH33I3GS.js";import"./chunk-DPHI5PSG.js";import"./chunk-XQTXOEWR.js";import"./chunk-6NCSHYGI.js";import"./chunk-OGS4EVII.js";import"./chunk-6YB7A7ZH.js";import"./chunk-GBZAIAZB.js";import"./chunk-ODWDCLXK.js";import"./chunk-F4TUYCIO.js";import{a as ae}from"./chunk-4ZSEYW2U.js";import"./chunk-SKYGTZSD.js";import"./chunk-4FC5X73U.js";import"./chunk-EEJJBISB.js";import{a as te}from"./chunk-W62UHBDW.js";import"./chunk-MG3YOV2C.js";import{b as Z,c as ee}from"./chunk-MCZ27GCN.js";import{a as ie}from"./chunk-XCL4JOYZ.js";import"./chunk-EAHNU44C.js";import{b as ne}from"./chunk-3NZE6WSA.js";import"./chunk-DS5QD6KN.js";import"./chunk-AZ3T5YEV.js";import"./chunk-7MLGAPHH.js";import{d as Q}from"./chunk-IP6ODCNA.js";import"./chunk-5BU3IDKS.js";import"./chunk-I7ZNO67X.js";import{a as X}from"./chunk-24VFFX2T.js";import"./chunk-7M6VBWZN.js";import{c as J}from"./chunk-C6P6X2N5.js";import"./chunk-YU6OV3L2.js";import{a as W}from"./chunk-OTWAXCZF.js";import"./chunk-NKAP6NYB.js";import{a as q}from"./chunk-KM3RDE6Q.js";import"./chunk-JY3RTIIU.js";import{b as Y,c as R}from"./chunk-2SASL4UW.js";import"./chunk-B7M7KWVX.js";import{k as B}from"./chunk-PK2RARDK.js";import{$b as k,Ac as D,Cc as G,Fc as U,Gb as l,Ib as m,Kb as v,Kc as _,Lb as x,Lc as g,Mb as h,Mc as A,Nb as f,Ob as a,Pb as r,Qb as C,Wa as L,Xb as I,Ya as n,Yc as N,bc as d,ca as w,ia as y,ja as b,jb as S,lc as F,nb as V,nc as H,pb as K,q as $,qc as o,rc as u,sc as E,tc as P,wa as M,yc as O,zc as j}from"./chunk-ELCUH6OG.js";import"./chunk-IGH4DTA6.js";function he(e,i){if(e&1&&(a(0,"div",3),o(1),r()),e&2){let t=i.$implicit;n(),P("",t.key," : ",t.value?"Has to be seen":"Has to be unseen"," ")}}function ue(e,i){if(e&1&&(x(0,he,2,2,"div",3,v),_(2,"keyvalue")),e&2){let t=i.$implicit;h(g(2,0,t))}}function Ee(e,i){if(e&1&&(a(0,"div"),o(1,"Other cutscenes requirements: "),x(2,ue,3,2,null,null,v),r()),e&2){let t=d();n(2),h(t.heartEventTrigger().otherCutscenesState)}}function Te(e,i){if(e&1&&(a(0,"div"),o(1,"Only on days: "),a(2,"span",3),o(3),r()()),e&2){let t=d();n(3),u(t.heartEventTrigger().specificDay.join(", "))}}function ye(e,i){if(e&1&&(a(0,"div"),o(1,"Only in seasons: "),a(2,"span",3),o(3),r()()),e&2){let t=d();n(3),u(t.heartEventTrigger().specificMonth.join(", "))}}function be(e,i){if(e&1&&(a(0,"div"),o(1,"Only with weather: "),a(2,"span",3),o(3),r()()),e&2){let t=d();n(3),u(t.heartEventTrigger().specificWeather.join(", "))}}function Se(e,i){if(e&1&&C(0,"app-effect",7),e&2){let t=i.$implicit;f("effect",t)}}function Ie(e,i){if(e&1&&(a(0,"div",4)(1,"span",5),o(2,"Effects when seen"),r(),a(3,"div",6),x(4,Se,1,1,"app-effect",7,v),r()()),e&2){let t=d();n(4),h(t.heartEventTrigger().effects)}}function ke(e,i){if(e&1&&o(0),e&2){d(2);let t=D(0);E(" Unlock requirements (",t.type==="And"?"all":"any"," of them): ")}}function Ne(e,i){e&1&&o(0," Unlock requirement: ")}function we(e,i){if(e&1&&C(0,"app-requirements",8),e&2){let t=i.$implicit;f("requirement",t)}}function Be(e,i){if(e&1&&(a(0,"div",4)(1,"span",5),l(2,ke,1,1),l(3,Ne,1,0),r(),a(4,"div",6),x(5,we,1,1,"app-requirements",8,v),r()()),e&2){d();let t=D(0);n(2),m(t.requirements.length>1?2:-1),n(),m(t.requirements.length<2?3:-1),n(2),h(t.requirements)}}var Ce=(()=>{let i=class i{constructor(){this.heartEventTrigger=N.required(),this.heartEventChecklist=w(de)}toggleHeartEvent(c){c?this.heartEventChecklist.add(this.heartEventTrigger().cutscene):this.heartEventChecklist.remove(this.heartEventTrigger().cutscene)}};i.\u0275fac=function(s){return new(s||i)},i.\u0275cmp=S({type:i,selectors:[["app-heart-event-trigger"]],inputs:{heartEventTrigger:[1,"heartEventTrigger"]},decls:33,vars:19,consts:[[1,"flex","justify-between","text-black","mb-1"],[1,"flex","flex-col"],[3,"change","checked"],[1,"text-black"],[1,"my-4"],[1,"text-lg","text-black"],[1,"flex","flex-col","text-black"],[3,"effect"],[3,"requirement"]],template:function(s,p){if(s&1){let T=I();O(0),a(1,"header",0)(2,"div",1)(3,"h4"),o(4),r(),a(5,"span"),o(6),r()(),a(7,"mat-checkbox",2),k("change",function(xe){return y(T),b(p.toggleHeartEvent(xe.checked))}),o(8,"Cutscene seen "),r()(),a(9,"div"),o(10,"Enabled: "),a(11,"span",3),o(12),r()(),a(13,"div"),o(14,"Location: "),a(15,"span",3),o(16),r()(),a(17,"div"),o(18,"Day Time of day: "),a(19,"span",3),o(20),_(21,"ingameTime"),_(22,"ingameTime"),r()(),a(23,"div"),o(24,"Can trigger on the same day: "),a(25,"span",3),o(26),r()(),l(27,Ee,4,0,"div"),l(28,Te,4,1,"div"),l(29,ye,4,1,"div"),l(30,be,4,1,"div"),l(31,Ie,6,0,"div",4),l(32,Be,7,2,"div",4)}if(s&2){let T=j(p.heartEventTrigger().requirements);n(4),u(p.heartEventTrigger().cutscene),n(2),E("Id: ",p.heartEventTrigger().id," "),n(),f("checked",p.heartEventChecklist.isChecked(p.heartEventTrigger().cutscene)),n(5),u(p.heartEventTrigger().enabled?"Yes":"No"),n(4),u(p.heartEventTrigger().location),n(4),P(" ",g(21,15,p.heartEventTrigger().time.fromTime),"-",g(22,17,p.heartEventTrigger().time.toTime),`
`),n(6),u(p.heartEventTrigger().canTriggerSameDay?"Yes":"No"),n(),m(p.heartEventTrigger().otherCutscenesState.length?27:-1),n(),m(p.heartEventTrigger().specificDay.length?28:-1),n(),m(p.heartEventTrigger().specificMonth.length?29:-1),n(),m(p.heartEventTrigger().specificWeather.length?30:-1),n(),m(p.heartEventTrigger().effects&&p.heartEventTrigger().effects.length?31:-1),n(),m(T&&T.requirements.length?32:-1)}},dependencies:[se,re,z,B,_e],styles:["[_nghost-%COMP%]{display:block}"]});let e=i;return e})();function Fe(e,i){e&1&&C(0,"hr",5)}function He(e,i){if(e&1&&(C(0,"app-heart-event-trigger",4),l(1,Fe,1,0,"hr",5)),e&2){let t=i.$implicit,c=i.$index,s=i.$count;H("mb-3",c===s-1),f("heartEventTrigger",t),n(),m(c!==s-1?1:-1)}}function Pe(e,i){if(e&1){let t=I();a(0,"app-expandable",1,0)(2,"h3",2),k("click",function(){y(t);let s=F(1);return b(s.toggle())}),o(3),C(4,"i",3),r(),x(5,He,2,4,null,null,v),r()}if(e&2){let t=i.$implicit,c=F(1);n(3),E(" ",t.heartLevel," hearts event "),n(),H("down",!c.isOpen())("up",c.isOpen()),n(),h(t.trigger)}}var ve=(()=>{let i=class i{constructor(){this.heartEvents=N.required()}};i.\u0275fac=function(s){return new(s||i)},i.\u0275cmp=S({type:i,selectors:[["app-heart-events"]],inputs:{heartEvents:[1,"heartEvents"]},decls:2,vars:0,consts:[["expandable",""],[1,"bg-amber-50/70","px-4","rounded-lg","mb-3","shadow-sm"],["expandableHeader","",1,"text-xl","text-black","flex","items-center","justify-between","cursor-pointer","py-4",3,"click"],[1,"arrow"],[3,"heartEventTrigger"],[1,"my-3"]],template:function(s,p){s&1&&x(0,Pe,7,5,"app-expandable",1,v),s&2&&h(p.heartEvents())},dependencies:[Ce,oe],encapsulation:2});let e=i;return e})();function De(e,i){if(e&1&&C(0,"app-offering",3),e&2){let t=i.$implicit;f("details",t)}}function qe(e,i){if(e&1&&(a(0,"app-item-card-switch",0),K(1,De,1,1,"ng-template",2),r()),e&2){let t=d();f("item",t.selectedEntity)}}function $e(e,i){if(e&1&&(C(0,"app-ui-icon",8),_(1,"translate"),_(2,"addSpacesToPascalCase")),e&2){let t=d(2);f("matTooltip",G("",g(2,5,g(1,3,t.npc.characterName))," is dateable"))("uiIcon",t.uiIcon.LOVE)}}function Me(e,i){if(e&1&&(a(0,"div",9),C(1,"app-ui-icon",16),o(2),_(3,"ingameDate"),r()),e&2){let t=d(2);n(),f("uiIcon",t.uiIcon.BIRTHDAY),n(),E(" ",g(3,2,t.npc.birthday)," ")}}function Le(e,i){if(e&1&&(a(0,"p",10),o(1),_(2,"translate"),r()),e&2){let t=d(2);n(),u(g(2,1,t.npc.description))}}function Ve(e,i){if(e&1){let t=I();a(0,"app-gifting-grid",17),k("itemClicked",function(s){y(t);let p=d(2);return b(p.showDetails(s))}),r()}if(e&2){let t=d(2);f("preferences",t.giftingPreferences)}}function Ke(e,i){if(e&1&&(a(0,"p",14),o(1),_(2,"translate"),_(3,"addSpacesToPascalCase"),r()),e&2){let t=d(2);n(),E(" ",g(3,3,g(2,1,t.npc.characterName))," has no specialized preferences. ")}}function Oe(e,i){if(e&1&&C(0,"app-heart-events",15),e&2){let t=d(2);f("heartEvents",t.heartEvents)}}function je(e,i){if(e&1&&(a(0,"p",14),o(1),_(2,"translate"),_(3,"addSpacesToPascalCase"),r()),e&2){let t=d(2);n(),E(" ",g(3,3,g(2,1,t.npc.characterName))," has no heart events. ")}}function Ge(e,i){if(e&1&&(a(0,"h3",18),o(1),r()),e&2){let t=d().$implicit;n(),E(" ",t.appearanceCategory," ")}}function Ue(e,i){if(e&1&&(a(0,"div",22)(1,"a",23),C(2,"app-ui-icon",24),r(),C(3,"app-npc-portrait",25),a(4,"span",26),o(5),r()()),e&2){let t=i.$implicit,c=d(6);n(),f("href",U("assets/",c.environment,"/portraits/",c.npc.key,"/",t.value,".webp?v=",c.version),L),n(),f("uiIcon",c.UiIcon.MAGNIFYING_GLASS),n(),f("npcKey",c.npc.key)("portraitName",t.value),n(2),u(t.key)}}function Ae(e,i){if(e&1&&(a(0,"div",19)(1,"h4",20),o(2),r(),a(3,"div",21),x(4,Ue,6,9,"div",22,v),_(6,"keyvalue"),r()()),e&2){let t=i.$implicit;n(2),u(t.key),n(2),h(g(6,1,t.value))}}function Ye(e,i){if(e&1&&x(0,Ae,7,3,"div",19,v),e&2){let t=d();h(t)}}function ze(e,i){if(e&1&&(a(0,"p",14),o(1),_(2,"translate"),r()),e&2){let t=d(4);n(),E(" ",g(2,1,t.npc.characterName)," has no appearances. ")}}function Re(e,i){if(e&1&&(l(0,Ye,2,0),l(1,ze,3,3,"p",14)),e&2){let t=i;m(t.length?0:-1),n(),m(t.length?-1:1)}}function We(e,i){if(e&1&&(l(0,Ge,2,1,"h3",18),l(1,Re,2,2),_(2,"keyvalue")),e&2){let t,c=i.$implicit;m(c.appearanceCategory?0:-1),n(),m((t=A(2,2,c.appearances,null))?1:-1,t)}}function Je(e,i){if(e&1&&(a(0,"app-card")(1,"div",4),C(2,"app-item-icon",5),a(3,"div",6)(4,"div",7),o(5),_(6,"translate"),_(7,"addSpacesToPascalCase"),l(8,$e,3,7,"app-ui-icon",8),r(),l(9,Me,4,4,"div",9),r()(),l(10,Le,3,3,"p",10),r(),a(11,"app-card",11)(12,"h2",12),o(13," Gifting "),r(),l(14,Ve,1,1,"app-gifting-grid",13),l(15,Ke,4,5,"p",14),r(),a(16,"app-card",11)(17,"h2",12),o(18," Heart events "),r(),l(19,Oe,1,1,"app-heart-events",15),l(20,je,4,5,"p",14),r(),a(21,"app-card",11)(22,"h2",12),o(23," Appearances "),r(),x(24,We,3,5,null,null,v),r()),e&2){let t=d();n(2),f("itemName",t.npc.iconName),n(3),E(" ",g(7,11,g(6,9,t.npc.characterName))," "),n(3),m(t.npc.isDateable?8:-1),n(),m(t.npc.birthday?9:-1),n(),m(t.npc.description?10:-1),n(4),m(t.giftingPreferences?14:-1),n(),m(t.giftingPreferences?-1:15),n(4),m(t.heartEvents.length?19:-1),n(),m(t.heartEvents.length?-1:20),n(4),h(t.npc.appearances)}}function Qe(e,i){e&1&&(a(0,"app-card")(1,"h1",27),o(2," NPC not found. "),r()())}function Xe(e,i){e&1&&C(0,"mat-spinner",1)}var Lt=(()=>{let i=class i extends ee{constructor(){super(...arguments),this.npcKey=N.required(),this.npc=null,this.heartEvents=[],this.UiIcon=q,this.uiIcon=q,this.environment=w(Y).getSettings().useBeta?"beta":"live",this.version=w(R).value()}ngOnInit(){$([this._database.fetchNPCs$(),this._database.fetchHeartEvents$(),this._database.fetchGiftingPreferences$()]).subscribe({next:([c,s,p])=>{this.npc=c.find(T=>T.key.toLowerCase()===this.npcKey().toLowerCase()),this.heartEvents=s[this.npcKey().toLowerCase()]??[],this.giftingPreferences=p.find(T=>T.mapKey.toLowerCase()===this.npc?.key.toLowerCase())}})}};i.\u0275fac=(()=>{let c;return function(p){return(c||(c=M(i)))(p||i)}})(),i.\u0275cmp=S({type:i,selectors:[["app-npc"]],inputs:{npcKey:[1,"npcKey"]},features:[V],decls:5,vars:2,consts:[["listDetail","",3,"item"],[1,"mx-auto","text-white"],["appDatabaseItemDetails",""],[3,"details"],[1,"text-2xl","text-black","font-semibold","flex","items-center","gifting-portrait"],[1,"h-16","mr-3",3,"itemName"],[1,"flex","flex-col"],[1,"flex","gap-2","items-center"],[1,"!text-gifting","!h-6","!w-6",3,"uiIcon","matTooltip"],[1,"text-lg","flex","gap-2"],[1,"mt-2"],[1,"mt-6"],[1,"mb-4","font-semibold","text-2xl","text-black"],[3,"preferences"],[1,"text-black","text-lg"],[3,"heartEvents"],[1,"!h-6","!w-6",3,"uiIcon"],[3,"itemClicked","preferences"],[1,"mb-4","font-semibold","text-xl","text-black"],[1,"font-semibold","text-black","mb-6"],[1,"text-lg"],[1,"grid","portrait-grid","gap-4"],[1,"flex","flex-col","shadow-lg","p-2","relative","group"],["target","_blank",1,"hidden","group-focus-visible:block","group-hover:block","absolute","top-2.5","right-2.5",3,"href"],[3,"uiIcon"],[1,"h-[400px]","flex","items-end","justify-center",3,"npcKey","portraitName"],[1,""],[1,"mb-4","font-semibold","text-3xl","text-black","flex","items-center","gap-x-4"]],template:function(s,p){s&1&&(a(0,"app-list-detail-container"),l(1,qe,2,1,"app-item-card-switch",0),l(2,Je,26,13)(3,Qe,3,0,"app-card")(4,Xe,1,0,"mat-spinner",1),r()),s&2&&(n(),m(p.selectedEntity?1:-1),n(),m(p.npc?2:p.npc===void 0?3:p.npc===null?4:-1))},dependencies:[Z,le,ce,ne,X,W,pe,ve,fe,J,ae,ie,me,B,Q,te],styles:[`.gifting-portrait .app-item-icon>img{width:auto;height:100%;aspect-ratio:unset}.portrait-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}.portrait-grid .npc-portrait img{max-height:400px}@media (min-width: 1280px){.portrait-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}}
`],encapsulation:2});let e=i;return e})();export{Lt as NpcComponent};
