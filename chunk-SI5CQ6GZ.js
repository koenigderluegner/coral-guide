import{a as Ct}from"./chunk-7YXW5G7E.js";import{a as vt}from"./chunk-PFH6XL6Y.js";import{b as St}from"./chunk-6GSJA3FK.js";import{a as D}from"./chunk-BF3I4LGD.js";import{a as bt,b as It}from"./chunk-NBL4KNJZ.js";import{a as Dt}from"./chunk-TL6QC6TM.js";import"./chunk-3KO7CVQP.js";import{b as ht}from"./chunk-GTQLKIEN.js";import{a as yt}from"./chunk-BXAGWIUB.js";import{a as gt}from"./chunk-WUH3DE3I.js";import{a as xt,b as _t}from"./chunk-M4K5OVLF.js";import{a as ut}from"./chunk-3MQSEQNY.js";import{a as j}from"./chunk-5RVYXRTM.js";import{a as ct}from"./chunk-GSFGENZ6.js";import"./chunk-6YB7A7ZH.js";import"./chunk-ODWDCLXK.js";import"./chunk-F4TUYCIO.js";import{a as it,b as rt}from"./chunk-4FC5X73U.js";import"./chunk-EEJJBISB.js";import{b as ot}from"./chunk-W62UHBDW.js";import"./chunk-MG3YOV2C.js";import{a as ft}from"./chunk-LRWPBZUX.js";import"./chunk-RUN64KB7.js";import"./chunk-XCL4JOYZ.js";import{a as ie,b as oe,c as re,d as pe,e as se,f as me,g as le,h as de,i as ce,j as fe,k as ue,l as mt,m as lt,n as dt,o as be}from"./chunk-PEGVYEIS.js";import"./chunk-EAHNU44C.js";import{b as N}from"./chunk-3NZE6WSA.js";import"./chunk-XMGSTBON.js";import{a as pt,e as st}from"./chunk-VEYYY66H.js";import"./chunk-4I65K53K.js";import{c as ze,g as We,l as Ye,p as Ze,w as Je}from"./chunk-AZ3T5YEV.js";import{z as Ke}from"./chunk-7MLGAPHH.js";import{c as nt,d as ae}from"./chunk-IP6ODCNA.js";import{b as U}from"./chunk-5BU3IDKS.js";import{g as je}from"./chunk-I7ZNO67X.js";import{a as ne}from"./chunk-24VFFX2T.js";import{c as at}from"./chunk-C6P6X2N5.js";import"./chunk-YU6OV3L2.js";import{a as tt}from"./chunk-OTWAXCZF.js";import{c as Xe,g as et}from"./chunk-NKAP6NYB.js";import{b as Ge,c as Ue}from"./chunk-KM3RDE6Q.js";import{b as qe}from"./chunk-JY3RTIIU.js";import{a as Qe}from"./chunk-2SASL4UW.js";import"./chunk-B7M7KWVX.js";import{i as te,k as Oe}from"./chunk-PK2RARDK.js";import{$b as ve,Ab as Me,Ac as v,E as Ee,Eb as ee,Fb as Re,G as Z,Gb as f,Hb as Be,Ib as u,Ic as q,Kb as A,Kc as F,Lb as H,Lc as R,Mb as k,Mc as Ae,Nb as s,Ob as m,Pb as p,Qb as c,Rb as ge,Sb as Le,Tb as Pe,Ub as L,V as xe,Vb as P,Xb as ye,Ya as n,Yc as G,ac as He,bc as b,ca as w,cc as ke,dc as Ne,ga as _e,ha as we,ia as J,ja as X,jb as C,lc as h,ld as Ve,nb as g,nc as V,p as he,pb as M,qc as l,rc as O,sc as $,t as Te,tc as $e,ub as Fe,wa as _,yc as T,zc as y}from"./chunk-ELCUH6OG.js";import{a as W,b as Y,f as De,g as Ie,h as Se}from"./chunk-IGH4DTA6.js";var I=(()=>{let t=class t{constructor(){this.databaseItem=G.required(),this.database=w(U)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=C({type:t,selectors:[["ng-component"]],inputs:{databaseItem:[1,"databaseItem"]},decls:0,vars:0,template:function(o,r){},encapsulation:2});let e=t;return e})();var Gt=["*"],S=(()=>{let t=class t{constructor(){this.templateRef=G.required()}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=C({type:t,selectors:[["app-database-header-button"]],inputs:{templateRef:[1,"templateRef"]},ngContentSelectors:Gt,decls:4,vars:6,consts:[["mat-button","",1,"hover:bg-black/10",3,"click"],[1,"flex","gap-x-2","items-center"],[1,"arrow"]],template:function(o,r){o&1&&(ke(),ge(0,"button",0),He("click",function(){return r.templateRef().toggle()}),ge(1,"div",1),Ne(2),Pe(3,"i",2),Le()()),o&2&&(n(3),V("down",!r.templateRef().isOpen())("translate-y-[-3px]",r.templateRef().isOpen())("up",r.templateRef().isOpen()))},encapsulation:2});let e=t;return e})();function Ut(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Can be dropped from enemies "),p()(),c(5,"app-bestiary-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),s("templateRef",i),n(2),s("dataSource",a)}}var Tt=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-bestiary"]],features:[g],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){if(o&1&&(T(0),f(1,Ut,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().fromEnemies);n(),u(d&&d.length?1:-1)}},dependencies:[D,S,ft],encapsulation:2});let e=t;return e})();function jt(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Is result of upgrade "),p()(),c(5,"app-item-upgrade-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),s("templateRef",i),n(2),s("dataSource",a)}}function Qt(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Is used as requirement in "),p()(),c(5,"app-item-upgrade-table",4),p()),e&2){let i=h(1);b();let a=v(1);n(3),s("templateRef",i),n(2),s("dataSource",a)}}var Et=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-item-upgrade"]],features:[g],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){if(o&1&&(T(0)(1),f(2,jt,6,2,"app-expandable",1),f(3,Qt,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().isUpgradeResult);n();let x=y(r.databaseItem().isUpgradeRequirement);n(),u(d&&d.length?2:-1),n(),u(x&&x.length?3:-1)}},dependencies:[D,S,bt],encapsulation:2});let e=t;return e})();function zt(e,t){if(e&1&&(m(0,"td",14),c(1,"app-ui-icon",15),p()),e&2){let i=t.$implicit;n(),s("uiIcon",i.pref.icon)}}function Wt(e,t){e&1&&(m(0,"th",16),l(1,"Preference"),p()),e&2&&ee("colspan",2)}function Yt(e,t){if(e&1&&(m(0,"td",17),l(1),p()),e&2){let i=t.$implicit;n(),$(" ",i.pref.label," ")}}function Zt(e,t){e&1&&(m(0,"th",16),l(1,"NPCs"),p())}function Jt(e,t){if(e&1&&(m(0,"div",21),c(1,"app-item-icon",22),l(2),p()),e&2){let i=t.$implicit,a=t.$index,o=t.$count;V("mr-4",a!==o-1),n(),s("itemName",i.iconName),n(),$(" ",i.characterName," ")}}function Xt(e,t){if(e&1&&(m(0,"td",18)(1,"div",19),H(2,Jt,3,4,"div",20,A),p()()),e&2){let i=t.$implicit;n(2),k(i.npcs)}}function ea(e,t){e&1&&c(0,"tr",23)}function ta(e,t){e&1&&c(0,"tr",24)}function aa(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Gifting"),p()(),m(5,"app-responsive-table")(6,"table",4),L(7,5),M(8,zt,2,1,"td",6),P(),L(9,7),M(10,Wt,2,1,"th",8)(11,Yt,2,1,"td",9),P(),L(12,10),M(13,Zt,2,0,"th",8)(14,Xt,4,0,"td",11),P(),M(15,ea,1,0,"tr",12)(16,ta,1,0,"tr",13),p()()()),e&2){let i=h(1),a=b(),o=v(0);n(3),s("templateRef",i),n(3),s("dataSource",o),n(9),s("matHeaderRowDef",a.displayedHeaderColumns)("matHeaderRowDefSticky",!0),n(),s("matRowDefColumns",a.displayedColumns)}}var wt=(()=>{let t=class t extends I{constructor(){super(...arguments),this.displayedHeaderColumns=["preference","npcs"],this.displayedColumns=["icon",...this.displayedHeaderColumns],this.favoritePreferences=[],this.lovePreferences=[],this.likePreferences=[],this.neutralPreferences=[],this.dislikePreferences=[],this.hatePreferences=[],this.dataSource=[],this.keys=["favoritePreferences","lovePreferences","likePreferences","neutralPreferences","dislikePreferences","hatePreferences"]}ngOnInit(){let a=this.databaseItem().item;if(!a)return;this.database.getGiftingPreferences().forEach(r=>{this.keys.forEach(d=>{r[d].findIndex(B=>B.type==="item"&&a.id===B.item.id)!==-1&&r.npc&&this[d].push(r.npc)})}),this.keys.forEach(r=>{let d=this[r];d.length&&this.dataSource.push({pref:Ge.find(x=>x.preferenceField===r),npcs:d})})}};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-gifts"]],hostAttrs:[1,"database-gifts"],features:[g],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["mat-table","",3,"dataSource"],["matColumnDef","icon","sticky",""],["class","!pl-2 !pr-0 !pt-3 w-10 text-center icon-col ","mat-cell","",4,"matCellDef"],["matColumnDef","preference"],["class","backdrop-blur-xl","mat-header-cell","",4,"matHeaderCellDef"],["class","text-col !pl-0 whitespace-nowrap","mat-cell","",4,"matCellDef"],["matColumnDef","npcs"],["class","text-col whitespace-nowrap","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-cell","",1,"!pl-2","!pr-0","!pt-3","w-10","text-center","icon-col"],[1,"!text-gifting","mr-1","sm:mr-0","!h-6","!w-6",3,"uiIcon"],["mat-header-cell","",1,"backdrop-blur-xl"],["mat-cell","",1,"text-col","!pl-0","whitespace-nowrap"],["mat-cell","",1,"text-col","whitespace-nowrap"],[1,"whitespace-nowrap"],[1,"inline-flex","shrink-0","items-center",3,"mr-4"],[1,"inline-flex","shrink-0","items-center"],[1,"h-12","mr-2","!flex","items-center","shrink-0",3,"itemName"],["mat-header-row",""],["mat-row",""]],template:function(o,r){if(o&1&&(T(0),f(1,aa,17,5,"app-expandable",1)),o&2){let d=y(r.databaseItem().asGift);n(),u(d&&d.length?1:-1)}},dependencies:[D,be,ue,ie,re,le,pe,oe,de,se,me,ce,fe,tt,N,S],styles:[`.database-gifts .app-responsive-table .app-item-icon>img{aspect-ratio:unset;width:auto;max-height:3rem}
`],encapsulation:2});let e=t;return e})();function na(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Buy at festival"),p()(),c(5,"app-festival-shop-item-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),s("templateRef",i),n(2),s("dataSource",a)}}var Ft=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-festival-shop-data"]],features:[g],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){if(o&1&&(T(0),f(1,na,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().buyAtFestivalShop);n(),u(d&&d.length?1:-1)}},dependencies:[D,S,Ct],encapsulation:2});let e=t;return e})();function ia(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Used to craft"),p()(),c(5,"app-inventory-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),s("templateRef",i),n(2),s("dataSource",a)}}function oa(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Crafting recipe"),p()(),c(5,"app-inventory-table",4),p()),e&2){let i=h(1);b();let a=v(1);n(3),s("templateRef",i),n(2),s("dataSource",a)}}var Mt=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-crafting"]],features:[g],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){if(o&1&&(T(0)(1),f(2,ia,6,2,"app-expandable",1),f(3,oa,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().usedToCraft);n();let x=y(r.databaseItem().craftedFrom);n(),u(d&&d.length?2:-1),n(),u(x&&x.length?3:-1)}},dependencies:[D,S,ht],encapsulation:2});let e=t;return e})();function ra(e,t){if(e&1&&(m(0,"td",14),c(1,"app-item-icon",15),p()),e&2){let i=t.$implicit;n(),s("itemName",i.item==null?null:i.item.iconName)}}function pa(e,t){e&1&&(m(0,"th",16),l(1," Output "),p()),e&2&&ee("colspan",2)}function sa(e,t){if(e&1&&(m(0,"td",17),l(1),F(2,"translate"),p()),e&2){let i=t.$implicit;n(),$e("",R(2,2,i.item==null?null:i.item.displayName)," (",i.amount,") ")}}function ma(e,t){e&1&&(m(0,"th",18),l(1," Ingredients"),p())}function la(e,t){e&1&&c(0,"hr",22)}function da(e,t){if(e&1&&(c(0,"app-table-item-list",20),f(1,la,1,0,"hr",22)),e&2){let i=t.$implicit,a=t.$index,o=t.$count;s("itemList",i),n(),u(a!==o-1?1:-1)}}function ca(e,t){if(e&1&&(m(0,"span",21),l(1," Either of the following"),p(),H(2,da,2,2,null,null,A)),e&2){let i=b().$implicit;n(2),k(i.eitherOrIngredients)}}function fa(e,t){if(e&1&&(m(0,"div",24),c(1,"app-item-icon",26),m(2,"span",27),l(3),F(4,"translate"),p()()),e&2){let i=b().$implicit;n(),s("itemName",i.iconName),n(2),O(R(4,2,i.displayName))}}function ua(e,t){if(e&1&&(m(0,"div",23),f(1,fa,5,4,"div",24),m(2,"div",25),l(3),p()()),e&2){let i=t.$implicit,a=b().$implicit;n(),u(i?1:-1),n(2),$("as ",a.key," ")}}function ba(e,t){if(e&1&&(H(0,ua,4,2,"div",23,A),F(2,"castToMinimalItemArray")),e&2){let i=t.$implicit;k(R(2,0,i.value))}}function Ca(e,t){if(e&1&&(m(0,"span",21),l(1," The following counting as"),p(),H(2,ba,3,2,null,null,A),F(4,"keyvalue")),e&2){let i=b().$implicit;n(2),k(R(4,0,i.additionsToGenerics))}}function ha(e,t){if(e&1&&(m(0,"td",19),c(1,"app-table-item-list",20),F(2,"cookingRecipeIngredients"),f(3,ca,4,0),f(4,Ca,5,2),p()),e&2){let i=t.$implicit;n(),s("itemList",R(2,3,i)),n(2),u(i.eitherOrIngredients.length?3:-1),n(),u(i.additionsToGenerics?4:-1)}}function xa(e,t){e&1&&(m(0,"th",28),l(1," Sell price"),p())}function _a(e,t){if(e&1&&(m(0,"td",29),c(1,"app-money",30),p()),e&2){let i=t.$implicit;n(),s("amount",i.item.sellPrice)}}function ga(e,t){e&1&&c(0,"tr",31)}function ya(e,t){e&1&&c(0,"tr",32)}function va(e,t){if(e&1&&(m(0,"table",0),L(1,1),M(2,ra,2,1,"td",2),P(),L(3,3),M(4,pa,2,1,"th",4)(5,sa,3,4,"td",5),P(),L(6,6),M(7,ma,2,0,"th",7)(8,ha,5,5,"td",8),P(),L(9,9),M(10,xa,2,0,"th",10)(11,_a,2,1,"td",11),P(),M(12,ga,1,0,"tr",12)(13,ya,1,0,"tr",13),p()),e&2){let i=b();s("dataSource",i.matDataSource),n(12),s("matHeaderRowDef",i.displayHeaderColumns)("matHeaderRowDefSticky",!0),n(),s("matRowDefColumns",i.displayedColumns)}}var Rt=(()=>{let t=class t extends dt{constructor(){super(...arguments),this.BASE_DISPLAY_COLUMNS=["icon","outputName","ingredients","sellPrice"],this.sortingDataAccessor=(a,o)=>{let r=this.sortHelper(a.item,o);return r!==null?r:0}}};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-mixing-table"]],features:[g],decls:2,vars:1,consts:[["mat-table","","matSort","",3,"dataSource"],["matColumnDef","icon","sticky",""],["class","!pl-2 !pr-0  w-10 text-center icon-col ","mat-cell","",4,"matCellDef"],["matColumnDef","outputName"],["class","backdrop-blur-xl","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","text-col whitespace-nowrap","mat-cell","",4,"matCellDef"],["matColumnDef","ingredients"],["mat-header-cell","",4,"matHeaderCellDef"],["class","list-col","mat-cell","",4,"matCellDef"],["matColumnDef","sellPrice"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","text-col !text-right w-[1%]","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-cell","",1,"!pl-2","!pr-0","w-10","text-center","icon-col"],[3,"itemName"],["mat-header-cell","","mat-sort-header","",1,"backdrop-blur-xl"],["mat-cell","",1,"text-col","whitespace-nowrap"],["mat-header-cell",""],["mat-cell","",1,"list-col"],[1,"mb-3",3,"itemList"],[1,"text-black","mt-1"],[1,"my-5"],[1,"flex","justify-between","mb-1"],[1,"flex","gap-x-3","items-center"],[1,"ml-2","flex","items-center","whitespace-nowrap"],[1,"!w-7",3,"itemName"],[1,"whitespace-nowrap"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],["mat-cell","",1,"text-col","!text-right","w-[1%]"],[3,"amount"],["mat-header-row",""],["mat-row",""]],template:function(o,r){o&1&&(m(0,"app-responsive-table"),f(1,va,14,4,"table",0),p()),o&2&&(n(),u(r.matDataSource?1:-1))},dependencies:[mt,lt,be,N,ut,ot,ue,ie,re,le,pe,oe,de,se,me,ce,fe,Oe,xt,_t,ae],encapsulation:2});let e=t;return e})();function Da(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Usage in mixing "),p()(),c(5,"app-mixing-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),s("templateRef",i),n(2),s("dataSource",a)}}function Ia(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Mixing recipe"),p()(),c(5,"app-mixing-table",4),p()),e&2){let i=h(1);b();let a=v(1);n(3),s("templateRef",i),n(2),s("dataSource",a)}}var Bt=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-mixing"]],features:[g],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){if(o&1&&(T(0)(1),f(2,Da,6,2,"app-expandable",1),f(3,Ia,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().usedToMix);n();let x=y(r.databaseItem().mixedFrom);n(),u(d&&d.length?2:-1),n(),u(x&&x.length?3:-1)}},dependencies:[D,S,Rt],encapsulation:2});let e=t;return e})();function Sa(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Usage in cooking "),p()(),c(5,"app-cooking-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),s("templateRef",i),n(2),s("dataSource",a)}}function Ta(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Cooking recipe"),p()(),c(5,"app-cooking-table",4),p()),e&2){let i=h(1);b();let a=v(1);n(3),s("templateRef",i),n(2),s("dataSource",a)}}var Lt=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-cooking"]],features:[g],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showUtensil","",3,"dataSource"]],template:function(o,r){if(o&1&&(T(0)(1),f(2,Sa,6,2,"app-expandable",1),f(3,Ta,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().usedToCook);n();let x=y(r.databaseItem().cookedFrom);n(),u(d&&d.length?2:-1),n(),u(x&&x.length?3:-1)}},dependencies:[D,S,gt],encapsulation:2});let e=t;return e})();function Ea(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Usage in processing "),p()(),c(5,"app-processor-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),s("templateRef",i),n(2),s("dataSource",a)}}function wa(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Processing"),p()(),c(5,"app-processor-table",4),p()),e&2){let i=h(1);b();let a=v(1);n(3),s("templateRef",i),n(2),s("dataSource",a)}}var Pt=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-artisan"]],features:[g],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showProcessor","",3,"dataSource"]],template:function(o,r){if(o&1&&(T(0)(1),f(2,Ea,6,2,"app-expandable",1),f(3,wa,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().artisanIngredient);n();let x=y(r.databaseItem().artisanResult);n(),u(d&&d.length?2:-1),n(),u(x&&x.length?3:-1)}},dependencies:[D,S,yt],encapsulation:2});let e=t;return e})();var Fa=e=>[e];function Ma(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Ocean critters"),p()(),c(5,"app-caught-table",4),p()),e&2){let i=h(1);n(3),s("templateRef",i),n(2),s("dataSource",q(2,Fa,t))}}var Ht=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-sea-critters"]],features:[g],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){if(o&1&&f(0,Ma,6,4,"app-expandable",1),o&2){let d;u((d=r.databaseItem().oceanCritter)?0:-1,d)}},dependencies:[D,S,j],encapsulation:2});let e=t;return e})();var Ra=e=>[e];function Ba(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Bugs and insects "),p()(),c(5,"app-caught-table",4),p()),e&2){let i=h(1);n(3),s("templateRef",i),n(2),s("dataSource",q(2,Ra,t))}}var kt=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-insects"]],features:[g],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){if(o&1&&f(0,Ba,6,4,"app-expandable",1),o&2){let d;u((d=r.databaseItem().insect)?0:-1,d)}},dependencies:[D,S,j],encapsulation:2});let e=t;return e})();var La=e=>[e];function Pa(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Fishing"),p()(),c(5,"app-caught-table",4),p()),e&2){let i=h(1),a=b();n(3),s("templateRef",i),n(2),s("dataSource",q(2,La,a.fish))}}var Nt=(()=>{let t=class t extends I{ngOnInit(){let a=this.databaseItem().fish;a&&(this.fish=Y(W({},a),{item:this.databaseItem().item}))}};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-fishing"]],features:[g],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){o&1&&f(0,Pa,6,4,"app-expandable",1),o&2&&u(r.fish?0:-1)},dependencies:[j,S,D],encapsulation:2});let e=t;return e})();function Ha(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Seed for"),p()(),c(5,"app-crop-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),s("templateRef",i),n(2),s("dataSource",a)}}function ka(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"From seed"),p()(),c(5,"app-crop-table",4),p()),e&2){let i=h(1);b();let a=v(1);n(3),s("templateRef",i),n(2),s("dataSource",a)}}var $t=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-crops"]],features:[g],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){if(o&1&&(T(0)(1),f(2,Ha,6,2,"app-expandable",1),f(3,ka,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().comesFromSeed);n();let x=y(r.databaseItem().isSeedFor);n(),u(d&&d.length?2:-1),n(),u(x&&x.length?3:-1)}},dependencies:[D,S,ct],encapsulation:2});let e=t;return e})();function Na(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Required for offering "),p()(),c(5,"app-offerings-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),s("templateRef",i),n(2),s("dataSource",a)}}function $a(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Offering reward"),p()(),c(5,"app-offerings-table",4),p()),e&2){let i=h(1);b();let a=v(1);n(3),s("templateRef",i),n(2),s("dataSource",a)}}var At=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-offerings"]],features:[g],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showAltar","",3,"dataSource"]],template:function(o,r){if(o&1&&(T(0)(1),f(2,Na,6,2,"app-expandable",1),f(3,$a,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().requiredAsOffering);n();let x=y(r.databaseItem().isBundleRewardIn);n(),u(d&&d.length?2:-1),n(),u(x&&x.length?3:-1)}},dependencies:[D,S,vt],encapsulation:2});let e=t;return e})();function Aa(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Buy at"),p()(),c(5,"app-shop-item-data-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),s("templateRef",i),n(2),s("dataSource",a)}}var Vt=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-shop-data"]],features:[g],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){if(o&1&&(T(0),f(1,Aa,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().buyAt);n(),u(d&&d.length?1:-1)}},dependencies:[D,S,Dt],encapsulation:2});let e=t;return e})();function Va(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Chance as processing result "),p()(),c(5,"app-shop-item-process-table",4),p()),e&2){let i=h(1);b();let a=v(1);n(3),s("templateRef",i),n(2),s("dataSource",a)}}function Oa(e,t){if(e&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Can be processed at "),p()(),c(5,"app-shop-item-process-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),s("templateRef",i),n(2),s("dataSource",a)}}var Ot=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-shop-item-process"]],features:[g],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){if(o&1&&(T(0)(1),f(2,Va,6,2,"app-expandable",1),f(3,Oa,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().asProcessInput);n();let x=y(r.databaseItem().chanceAsProcessResult);n(),u(x&&x.length?2:-1),n(),u(d&&d.length?3:-1)}},dependencies:[D,S,It],encapsulation:2});let e=t;return e})();function qa(e,t){if(e&1&&(m(0,"app-card")(1,"header",0),c(2,"app-item-icon",1),m(3,"div",2)(4,"h2",3),l(5),F(6,"translate"),p(),m(7,"span"),l(8),p()(),m(9,"div",4),c(10,"app-to-do-toggle",5),p(),c(11,"div",6)(12,"app-quality-grid",7),p(),m(13,"p",8),l(14),F(15,"translate"),p(),m(16,"div",9),l(17,"There's currently no data for this item. :("),p(),c(18,"app-database-shop-item-process",10)(19,"app-database-shop-data",10)(20,"app-database-offerings",10)(21,"app-database-crops",10)(22,"app-database-fishing",10)(23,"app-database-insects",10)(24,"app-database-sea-critters",10)(25,"app-database-artisan",10)(26,"app-database-cooking",10)(27,"app-database-mixing",10)(28,"app-database-crafting",10)(29,"app-database-festival-shop-data",10)(30,"app-database-gifts",10)(31,"app-database-item-upgrade",10)(32,"app-database-bestiary",10),p()),e&2){let i=t;n(2),s("itemName",i.item.iconName),n(3),O(R(6,22,i.item.displayName)),n(3),O(i.item.id),n(2),s("item",i.item),n(2),s("showOnlyBase",!i.item.qualities.bronze)("item",i.item),n(2),O(Ae(15,24,i.item.description,i.item.translateParams)),n(4),s("databaseItem",i),n(),s("databaseItem",i),n(),s("databaseItem",i),n(),s("databaseItem",i),n(),s("databaseItem",i),n(),s("databaseItem",i),n(),s("databaseItem",i),n(),s("databaseItem",i),n(),s("databaseItem",i),n(),s("databaseItem",i),n(),s("databaseItem",i),n(),s("databaseItem",i),n(),s("databaseItem",i),n(),s("databaseItem",i),n(),s("databaseItem",i)}}function Ga(e,t){e&1&&(m(0,"app-card"),c(1,"mat-spinner",11),p())}function Ua(e,t){if(e&1&&(f(0,qa,33,27,"app-card"),F(1,"async"),Be(2,Ga,2,0,"app-card")),e&2){let i,a=b();u((i=R(1,1,a.databaseItem$))?0:2,i)}}var qt=(()=>{var t;let i=class i{constructor(){Ie(this,t);this.item=G.required(),Se(this,t,w(U))}ngOnInit(){this.databaseItem$=De(this,t).fetchDatabaseItem$(this.item().id)}};t=new WeakMap,i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=C({type:i,selectors:[["app-database-details"]],hostAttrs:[1,"col-span-full","database-details"],inputs:{item:[1,"item"]},decls:1,vars:1,consts:[[1,"flex","items-center","flex-wrap","mb-5"],[1,"mr-3","w-14",3,"itemName"],[1,"flex","flex-col","gap-0.5"],[1,"!my-0","font-semibold","text-xl","text-black"],[1,"card-actions","ml-4"],["context","database",3,"item"],[1,"h-0","w-full","md:hidden"],["includePrices","",1,"md:ml-auto","mt-4","md:mt-0","quality-grid","inline-block","w-fit",3,"showOnlyBase","item"],[1,"text-lg"],[1,"empty-details","text-black","my-5","text-lg"],[3,"databaseItem"],[1,"mx-auto"]],template:function(r,d){r&1&&f(0,Ua,3,3),r&2&&u(d.databaseItem$?0:-1)},dependencies:[Tt,Et,wt,Ft,Mt,Bt,Lt,Pt,Ht,kt,Nt,$t,At,Vt,Ot,rt,it,N,ne,at,te,ae],styles:[`.database-details .empty-details{display:none}.database-details:not(:has(.database-header)) .empty-details{display:block}.database-details .expandable-body{transition:none}.quality-grid .app-item-icon>img{height:3.5rem}.database-header{color:#000;font-weight:600;font-size:1.25em;margin-top:1.2em;line-height:1.6}
`],encapsulation:2});let e=i;return e})();function ja(e,t){if(e&1){let i=ye();m(0,"app-card",1)(1,"div",5)(2,"h2"),l(3,"Important note"),p(),m(4,"p"),l(5,"The item list loads a lot of stuff, this may take a while. The list below shows everything, that got not filtered beforehand. Some of those items will never be obtainable as they only provide a technical purpose. The information shown per item are as complete as the rest of this website. When new features get added, the details in here will expand as well."),p(),m(6,"button",6),ve("click",function(){J(i);let o=b();return X(o.hideImportantNote())}),l(7,"Got it!"),p()()()}}function Qa(e,t){if(e&1){let i=ye();m(0,"app-item-icon",8),ve("mouseenter",function(){let o=J(i).$implicit,r=b(2);return X(r.prefetchItem(o))})("click",function(){let o=J(i),r=o.$implicit,d=o.$index,x=b(2);return X(x.showDetails(r,d))}),p()}if(e&2){let i=t.$implicit,a=b(2);V("selected-icon",(a.selectedItem==null?null:a.selectedItem.id)===i.id),s("itemName",i.iconName)}}function Ka(e,t){if(e&1&&(H(0,Qa,1,3,"app-item-icon",7,Re().trackById,!0),l(2)),e&2){let i=b();k(i.filteredItems),n(2),$(" ",i.initialItemLoad()," ")}}var Po=(()=>{let t=class t{constructor(){this.localStorage=w(Qe),this.searchTermControl=new Ye("",{nonNullable:!0}),this.shouldHideImportantNote=!1,this.filteredItems=[],this.environmentInjector=w(_e),this._route=w(Xe),this._router=w(et),this._database=w(U),this._appRef=w(Me),this._injector=w(_e),this._title=w(qe),this._localStorageHideNoteKey="databaseHideImportantNote",this._didInitialLoad=!1,this.translate=w(nt),this.shouldHideImportantNote=Ke(this.localStorage.getItem(this._localStorageHideNoteKey)),this.items=this._database.getItems().filter(o=>je(o.id)===Ue.BASE).map(o=>Y(W({},o),{displayName:this.translate.instant(o.displayName).toLocaleLowerCase()}));let a=he(o=>{let x=/tag:(?<tag>[a-zA-Z.]+)/gm.exec(o)?.groups?.tag.replace("tag:","").toLocaleLowerCase()??"",B=o.replace("tag:"+x,"").toLocaleLowerCase().trim(),z=this.items.filter(Q=>{let K=!0;return x&&(K=!!Q.tags?.some(Ce=>Ce.toLocaleLowerCase().includes(x))),K?Q.displayName.includes(B)||B.startsWith("item_")&&Q.id.startsWith(B):!1});return this.filteredItems=z,z});this.filteredItems$=Te(this._route.queryParams.pipe(he(o=>{let r=o.q??"";return this.searchTermControl.setValue(r,{emitEvent:!1}),r}),a,Z(1)),this.searchTermControl.valueChanges.pipe(Ee(300),xe(o=>{this.updateQueryParam(o),document.getElementById("database-details")?.remove()}),a))}showDetails(a,o,r=!1){this.updateRouteParam(a.id),this.selectedItem=void 0,document.getElementById("database-details")?.remove();let d=document.getElementById("grid");if(!d)return;let B=window.getComputedStyle(d).getPropertyValue("grid-template-columns").split(" ").length,z=Math.floor(o/B),Q=Math.min(this.filteredItems.length,(z+1)*B),K=document.querySelector(`#grid app-item-icon:nth-of-type(${Q})`);if(!K)return;let Ce=this.createComponent(a);this.insertAfter(Ce,K),this.selectedItem=a,r&&setTimeout(()=>document.getElementById("database-details")?.scrollIntoView(!0),0)}insertAfter(a,o){o.parentNode?.insertBefore(a.location.nativeElement,o.nextSibling),this._appRef.attachView(a.hostView)}createComponent(a){let o=Ve(qt,{environmentInjector:this._injector});o.setInput("item",a);let r=o.location.nativeElement;return r.id="database-details",o}hideImportantNote(){this.shouldHideImportantNote=!0,this.localStorage.setItem(this._localStorageHideNoteKey,"true")}updateQueryParam(a){this._router.navigate([],{relativeTo:this._route,queryParams:{q:a},queryParamsHandling:"merge",replaceUrl:!0})}updateRouteParam(a){this._router.navigate(["/database",a],{relativeTo:this._route,replaceUrl:!0,queryParamsHandling:"preserve"}).then(()=>!!this.selectedItem&&this.updateTitle(this.selectedItem.displayName))}initialItemLoad(){this._didInitialLoad||this._route.params.pipe(xe(a=>{let o=a.itemId;if(this._didInitialLoad=!0,!o)return;let r=this.filteredItems.findIndex(d=>d.id===o);if(r>-1)we(this.environmentInjector,()=>{Fe(()=>this.showDetails(this.filteredItems[r],r,!0))});else if(this.filteredItems.length===0){let d=this.items.findIndex(x=>x.id===o);if(d>-1){let x=this.items[d];this._setGridContent(x)}}}),Z(1)).subscribe()}trackById(a,o){return o.id}prefetchItem(a){this._database.fetchDatabaseItem$(a.id).pipe(Z(1)).subscribe()}updateTitle(a){let o=this._title.getTitle();o&&this._title.setTitle(`${a} - ${o}`)}_setGridContent(a){let o=this.createComponent(a);document.getElementById("grid")?.appendChild(o.location.nativeElement),this._appRef.attachView(o.hostView),this.selectedItem=a}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=C({type:t,selectors:[["app-database"]],decls:9,vars:5,consts:[[1,"container","mx-auto","pb-6","database-grid","px-2"],[1,"my-3"],[1,"semi-transparent-form-field","my-3"],["matInput","",3,"formControl"],["id","grid",1,"icon-grid"],[1,"prose","lg:prose-xl"],[1,"btn","btn-secondary",3,"click"],[1,"icon-grid-item",3,"selected-icon","itemName"],[1,"icon-grid-item",3,"mouseenter","click","itemName"]],template:function(o,r){o&1&&(m(0,"div",0),f(1,ja,8,0,"app-card",1),m(2,"mat-form-field",2)(3,"mat-label"),l(4,"Search term"),p(),c(5,"input",3),p(),m(6,"div",4),f(7,Ka,3,1),F(8,"async"),p()()),o&2&&(n(),u(r.shouldHideImportantNote?-1:1),n(4),s("formControl",r.searchTermControl),n(2),u(R(8,3,r.filteredItems$)?7:-1))},dependencies:[pt,st,ne,Je,ze,We,Ze,N,St,te],encapsulation:2});let e=t;return e})();export{Po as DatabaseComponent};
