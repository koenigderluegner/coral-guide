import{a as ft}from"./chunk-RUGQEXFK.js";import{a as _t}from"./chunk-4CWZZR3W.js";import{b as vt}from"./chunk-OKR7QHIK.js";import{a as D}from"./chunk-5PS4YV7K.js";import{a as ct,b as yt}from"./chunk-7CYD5ENA.js";import{a as gt}from"./chunk-ND4AA6UN.js";import"./chunk-XOUI6RZQ.js";import{b as ut}from"./chunk-Q4UGYLRN.js";import{a as xt}from"./chunk-IA752XXL.js";import{a as ht}from"./chunk-H6RXNYFT.js";import{a as bt,b as Ct}from"./chunk-L5G7Q7YK.js";import{a as dt}from"./chunk-4BEFVGD6.js";import{a as j}from"./chunk-PYAZCN4G.js";import{a as st}from"./chunk-DQKX3VCP.js";import"./chunk-CS6UDEWJ.js";import"./chunk-YRO3XTLN.js";import"./chunk-BP5TLU4W.js";import{a as tt,b as nt}from"./chunk-BVOEAINN.js";import"./chunk-NTEY2CKU.js";import{b as at}from"./chunk-3H2ZASFZ.js";import"./chunk-OYPR7CJS.js";import{a as lt}from"./chunk-IMPF2BHH.js";import"./chunk-4XI3XO7A.js";import"./chunk-ZNXHGMTD.js";import{a as te,b as ae,c as ne,d as ie,e as oe,f as re,g as pe,h as me,i as se,j as le,k as de,l as rt,m as pt,n as mt,o as ce}from"./chunk-XWGFS45Y.js";import"./chunk-IBXLELUQ.js";import{b as N}from"./chunk-SNYRKERH.js";import"./chunk-XMGSTBON.js";import{a as it,e as ot}from"./chunk-7VKCZCDP.js";import"./chunk-RIQ7EVWM.js";import{c as Qe,g as Ke,l as ze,p as We,w as Ye}from"./chunk-U65D7S4X.js";import{z as je}from"./chunk-IJY46FI3.js";import{b as U}from"./chunk-CXGH7SOD.js";import{e as Ge}from"./chunk-D33HMA7I.js";import{a as ee}from"./chunk-VRZECYYF.js";import{c as et}from"./chunk-7MFI6IJ7.js";import"./chunk-HIFLNZD5.js";import{a as Xe}from"./chunk-ZALICU3N.js";import{c as Ze,g as Je}from"./chunk-47OJ7DES.js";import{b as Oe,c as qe}from"./chunk-SAY5CNC2.js";import{c as Ve}from"./chunk-BFCDBX46.js";import{a as Ue}from"./chunk-G2FIETR4.js";import"./chunk-7DQT77OQ.js";import{i as X,k as Ae}from"./chunk-OHR5KDYC.js";import{Ac as y,Bb as Fe,Bc as v,E as Te,Fb as J,G as W,Gb as Me,Hb as f,Ib as Re,Jb as u,Jc as q,Lb as A,Lc as P,Mb as L,Mc as k,Nb as H,Ob as m,Pb as s,Qb as p,Rb as c,Sb as he,Tb as Be,Ub as Le,V as be,Vb as R,Wb as B,Yb as xe,Za as n,Zc as G,ac as _e,bc as He,ca as w,cc as b,dc as Pe,ec as ke,ga as Ce,ha as Ee,ia as Y,ja as Z,kb as C,mc as h,md as $e,ob as g,oc as V,p as ue,qb as F,rc as l,sc as O,t as Se,tc as $,uc as Ne,vb as we,xa as _,zc as T}from"./chunk-FPTGDBQG.js";import{a as ge,b as ye,d as ve,e as De,f as Ie}from"./chunk-2QKSPLSF.js";var I=(()=>{let t=class t{constructor(){this.databaseItem=G.required(),this.database=w(U)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=C({type:t,selectors:[["ng-component"]],inputs:{databaseItem:[1,"databaseItem"]},decls:0,vars:0,template:function(o,r){},encapsulation:2});let e=t;return e})();var Vt=["*"],S=(()=>{let t=class t{constructor(){this.templateRef=G.required()}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=C({type:t,selectors:[["app-database-header-button"]],inputs:{templateRef:[1,"templateRef"]},ngContentSelectors:Vt,decls:4,vars:6,consts:[["mat-button","",1,"hover:bg-black/10",3,"click"],[1,"flex","gap-x-2","items-center"],[1,"arrow"]],template:function(o,r){o&1&&(Pe(),he(0,"button",0),He("click",function(){return r.templateRef().toggle()}),he(1,"div",1),ke(2),Le(3,"i",2),Be()()),o&2&&(n(3),V("down",!r.templateRef().isOpen())("translate-y-[-3px]",r.templateRef().isOpen())("up",r.templateRef().isOpen()))},encapsulation:2});let e=t;return e})();function Ot(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Can be dropped from enemies "),p()(),c(5,"app-bestiary-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),m("templateRef",i),n(2),m("dataSource",a)}}var Dt=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-bestiary"]],features:[g],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){if(o&1&&(T(0),f(1,Ot,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().fromEnemies);n(),u(d&&d.length?1:-1)}},dependencies:[D,S,lt],encapsulation:2});let e=t;return e})();function qt(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Is result of upgrade "),p()(),c(5,"app-item-upgrade-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),m("templateRef",i),n(2),m("dataSource",a)}}function Gt(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Is used as requirement in "),p()(),c(5,"app-item-upgrade-table",4),p()),e&2){let i=h(1);b();let a=v(1);n(3),m("templateRef",i),n(2),m("dataSource",a)}}var It=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-item-upgrade"]],features:[g],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){if(o&1&&(T(0)(1),f(2,qt,6,2,"app-expandable",1),f(3,Gt,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().isUpgradeResult);n();let x=y(r.databaseItem().isUpgradeRequirement);n(),u(d&&d.length?2:-1),n(),u(x&&x.length?3:-1)}},dependencies:[D,S,ct],encapsulation:2});let e=t;return e})();function jt(e,t){if(e&1&&(s(0,"td",14),c(1,"app-ui-icon",15),p()),e&2){let i=t.$implicit;n(),m("uiIcon",i.pref.icon)}}function Qt(e,t){e&1&&(s(0,"th",16),l(1,"Preference"),p()),e&2&&J("colspan",2)}function Kt(e,t){if(e&1&&(s(0,"td",17),l(1),p()),e&2){let i=t.$implicit;n(),$(" ",i.pref.label," ")}}function zt(e,t){e&1&&(s(0,"th",16),l(1,"NPCs"),p())}function Wt(e,t){if(e&1&&(s(0,"div",21),c(1,"app-item-icon",22),l(2),p()),e&2){let i=t.$implicit,a=t.$index,o=t.$count;V("mr-4",a!==o-1),n(),m("itemName",i.iconName),n(),$(" ",i.characterName," ")}}function Yt(e,t){if(e&1&&(s(0,"td",18)(1,"div",19),L(2,Wt,3,4,"div",20,A),p()()),e&2){let i=t.$implicit;n(2),H(i.npcs)}}function Zt(e,t){e&1&&c(0,"tr",23)}function Jt(e,t){e&1&&c(0,"tr",24)}function Xt(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Gifting"),p()(),s(5,"app-responsive-table")(6,"table",4),R(7,5),F(8,jt,2,1,"td",6),B(),R(9,7),F(10,Qt,2,1,"th",8)(11,Kt,2,1,"td",9),B(),R(12,10),F(13,zt,2,0,"th",8)(14,Yt,4,0,"td",11),B(),F(15,Zt,1,0,"tr",12)(16,Jt,1,0,"tr",13),p()()()),e&2){let i=h(1),a=b(),o=v(0);n(3),m("templateRef",i),n(3),m("dataSource",o),n(9),m("matHeaderRowDef",a.displayedHeaderColumns)("matHeaderRowDefSticky",!0),n(),m("matRowDefColumns",a.displayedColumns)}}var St=(()=>{let t=class t extends I{constructor(){super(...arguments),this.displayedHeaderColumns=["preference","npcs"],this.displayedColumns=["icon",...this.displayedHeaderColumns],this.favoritePreferences=[],this.lovePreferences=[],this.likePreferences=[],this.neutralPreferences=[],this.dislikePreferences=[],this.hatePreferences=[],this.dataSource=[],this.keys=["favoritePreferences","lovePreferences","likePreferences","neutralPreferences","dislikePreferences","hatePreferences"]}ngOnInit(){let a=this.databaseItem().item;if(!a)return;this.database.getGiftingPreferences().forEach(r=>{this.keys.forEach(d=>{r[d].findIndex(M=>M.type==="item"&&a.id===M.item.id)!==-1&&r.npc&&this[d].push(r.npc)})}),this.keys.forEach(r=>{let d=this[r];d.length&&this.dataSource.push({pref:Oe.find(x=>x.preferenceField===r),npcs:d})})}};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-gifts"]],hostAttrs:[1,"database-gifts"],features:[g],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["mat-table","",3,"dataSource"],["matColumnDef","icon","sticky",""],["class","!pl-2 !pr-0 !pt-3 w-10 text-center icon-col ","mat-cell","",4,"matCellDef"],["matColumnDef","preference"],["class","backdrop-blur-xl","mat-header-cell","",4,"matHeaderCellDef"],["class","text-col !pl-0 whitespace-nowrap","mat-cell","",4,"matCellDef"],["matColumnDef","npcs"],["class","text-col whitespace-nowrap","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-cell","",1,"!pl-2","!pr-0","!pt-3","w-10","text-center","icon-col"],[1,"!text-gifting","mr-1","sm:mr-0","!h-6","!w-6",3,"uiIcon"],["mat-header-cell","",1,"backdrop-blur-xl"],["mat-cell","",1,"text-col","!pl-0","whitespace-nowrap"],["mat-cell","",1,"text-col","whitespace-nowrap"],[1,"whitespace-nowrap"],[1,"inline-flex","shrink-0","items-center",3,"mr-4"],[1,"inline-flex","shrink-0","items-center"],[1,"h-12","mr-2","!flex","items-center","shrink-0",3,"itemName"],["mat-header-row",""],["mat-row",""]],template:function(o,r){if(o&1&&(T(0),f(1,Xt,17,5,"app-expandable",1)),o&2){let d=y(r.databaseItem().asGift);n(),u(d&&d.length?1:-1)}},dependencies:[D,ce,de,te,ne,pe,ie,ae,me,oe,re,se,le,Xe,N,S],styles:[`.database-gifts .app-responsive-table .app-item-icon>img{aspect-ratio:unset;width:auto;max-height:3rem}
`],encapsulation:2});let e=t;return e})();function ea(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Buy at festival"),p()(),c(5,"app-festival-shop-item-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),m("templateRef",i),n(2),m("dataSource",a)}}var Tt=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-festival-shop-data"]],features:[g],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){if(o&1&&(T(0),f(1,ea,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().buyAtFestivalShop);n(),u(d&&d.length?1:-1)}},dependencies:[D,S,ft],encapsulation:2});let e=t;return e})();function ta(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Used to craft"),p()(),c(5,"app-inventory-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),m("templateRef",i),n(2),m("dataSource",a)}}function aa(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Crafting recipe"),p()(),c(5,"app-inventory-table",4),p()),e&2){let i=h(1);b();let a=v(1);n(3),m("templateRef",i),n(2),m("dataSource",a)}}var Et=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-crafting"]],features:[g],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){if(o&1&&(T(0)(1),f(2,ta,6,2,"app-expandable",1),f(3,aa,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().usedToCraft);n();let x=y(r.databaseItem().craftedFrom);n(),u(d&&d.length?2:-1),n(),u(x&&x.length?3:-1)}},dependencies:[D,S,ut],encapsulation:2});let e=t;return e})();function na(e,t){if(e&1&&(s(0,"td",14),c(1,"app-item-icon",15),p()),e&2){let i=t.$implicit;n(),m("itemName",i.item==null?null:i.item.iconName)}}function ia(e,t){e&1&&(s(0,"th",16),l(1," Output "),p()),e&2&&J("colspan",2)}function oa(e,t){if(e&1&&(s(0,"td",17),l(1),p()),e&2){let i=t.$implicit;n(),Ne("",i.item==null?null:i.item.displayName," (",i.amount,") ")}}function ra(e,t){e&1&&(s(0,"th",18),l(1," Ingredients"),p())}function pa(e,t){e&1&&c(0,"hr",22)}function ma(e,t){if(e&1&&(c(0,"app-table-item-list",20),f(1,pa,1,0,"hr",22)),e&2){let i=t.$implicit,a=t.$index,o=t.$count;m("itemList",i),n(),u(a!==o-1?1:-1)}}function sa(e,t){if(e&1&&(s(0,"span",21),l(1," Either of the following"),p(),L(2,ma,2,2,null,null,A)),e&2){let i=b().$implicit;n(2),H(i.eitherOrIngredients)}}function la(e,t){if(e&1&&(s(0,"div",24),c(1,"app-item-icon",26),s(2,"span",27),l(3),p()()),e&2){let i=b().$implicit;n(),m("itemName",i.iconName),n(2),O(i.displayName)}}function da(e,t){if(e&1&&(s(0,"div",23),f(1,la,4,2,"div",24),s(2,"div",25),l(3),p()()),e&2){let i=t.$implicit,a=b().$implicit;n(),u(i?1:-1),n(2),$("as ",a.key," ")}}function ca(e,t){if(e&1&&(L(0,da,4,2,"div",23,A),P(2,"castToMinimalItemArray")),e&2){let i=t.$implicit;H(k(2,0,i.value))}}function fa(e,t){if(e&1&&(s(0,"span",21),l(1," The following counting as"),p(),L(2,ca,3,2,null,null,A),P(4,"keyvalue")),e&2){let i=b().$implicit;n(2),H(k(4,0,i.additionsToGenerics))}}function ua(e,t){if(e&1&&(s(0,"td",19),c(1,"app-table-item-list",20),P(2,"cookingRecipeIngredients"),f(3,sa,4,0),f(4,fa,5,2),p()),e&2){let i=t.$implicit;n(),m("itemList",k(2,3,i)),n(2),u(i.eitherOrIngredients.length?3:-1),n(),u(i.additionsToGenerics?4:-1)}}function ba(e,t){e&1&&(s(0,"th",28),l(1," Sell price"),p())}function Ca(e,t){if(e&1&&(s(0,"td",29),c(1,"app-money",30),p()),e&2){let i=t.$implicit;n(),m("amount",i.item.sellPrice)}}function ha(e,t){e&1&&c(0,"tr",31)}function xa(e,t){e&1&&c(0,"tr",32)}function _a(e,t){if(e&1&&(s(0,"table",0),R(1,1),F(2,na,2,1,"td",2),B(),R(3,3),F(4,ia,2,1,"th",4)(5,oa,2,2,"td",5),B(),R(6,6),F(7,ra,2,0,"th",7)(8,ua,5,5,"td",8),B(),R(9,9),F(10,ba,2,0,"th",10)(11,Ca,2,1,"td",11),B(),F(12,ha,1,0,"tr",12)(13,xa,1,0,"tr",13),p()),e&2){let i=b();m("dataSource",i.matDataSource),n(12),m("matHeaderRowDef",i.displayHeaderColumns)("matHeaderRowDefSticky",!0),n(),m("matRowDefColumns",i.displayedColumns)}}var wt=(()=>{let t=class t extends mt{constructor(){super(...arguments),this.BASE_DISPLAY_COLUMNS=["icon","outputName","ingredients","sellPrice"],this.sortingDataAccessor=(a,o)=>{let r=this.sortHelper(a.item,o);return r!==null?r:0}}};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-mixing-table"]],features:[g],decls:2,vars:1,consts:[["mat-table","","matSort","",3,"dataSource"],["matColumnDef","icon","sticky",""],["class","!pl-2 !pr-0  w-10 text-center icon-col ","mat-cell","",4,"matCellDef"],["matColumnDef","outputName"],["class","backdrop-blur-xl","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","text-col whitespace-nowrap","mat-cell","",4,"matCellDef"],["matColumnDef","ingredients"],["mat-header-cell","",4,"matHeaderCellDef"],["class","list-col","mat-cell","",4,"matCellDef"],["matColumnDef","sellPrice"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","text-col !text-right w-[1%]","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-cell","",1,"!pl-2","!pr-0","w-10","text-center","icon-col"],[3,"itemName"],["mat-header-cell","","mat-sort-header","",1,"backdrop-blur-xl"],["mat-cell","",1,"text-col","whitespace-nowrap"],["mat-header-cell",""],["mat-cell","",1,"list-col"],[1,"mb-3",3,"itemList"],[1,"text-black","mt-1"],[1,"my-5"],[1,"flex","justify-between","mb-1"],[1,"flex","gap-x-3","items-center"],[1,"ml-2","flex","items-center","whitespace-nowrap"],[1,"!w-7",3,"itemName"],[1,"whitespace-nowrap"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],["mat-cell","",1,"text-col","!text-right","w-[1%]"],[3,"amount"],["mat-header-row",""],["mat-row",""]],template:function(o,r){o&1&&(s(0,"app-responsive-table"),f(1,_a,14,4,"table",0),p()),o&2&&(n(),u(r.matDataSource?1:-1))},dependencies:[rt,pt,ce,N,dt,at,de,te,ne,pe,ie,ae,me,oe,re,se,le,Ae,bt,Ct],encapsulation:2});let e=t;return e})();function ga(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Usage in mixing "),p()(),c(5,"app-mixing-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),m("templateRef",i),n(2),m("dataSource",a)}}function ya(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Mixing recipe"),p()(),c(5,"app-mixing-table",4),p()),e&2){let i=h(1);b();let a=v(1);n(3),m("templateRef",i),n(2),m("dataSource",a)}}var Ft=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-mixing"]],features:[g],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){if(o&1&&(T(0)(1),f(2,ga,6,2,"app-expandable",1),f(3,ya,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().usedToMix);n();let x=y(r.databaseItem().mixedFrom);n(),u(d&&d.length?2:-1),n(),u(x&&x.length?3:-1)}},dependencies:[D,S,wt],encapsulation:2});let e=t;return e})();function va(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Usage in cooking "),p()(),c(5,"app-cooking-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),m("templateRef",i),n(2),m("dataSource",a)}}function Da(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Cooking recipe"),p()(),c(5,"app-cooking-table",4),p()),e&2){let i=h(1);b();let a=v(1);n(3),m("templateRef",i),n(2),m("dataSource",a)}}var Mt=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-cooking"]],features:[g],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showUtensil","",3,"dataSource"]],template:function(o,r){if(o&1&&(T(0)(1),f(2,va,6,2,"app-expandable",1),f(3,Da,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().usedToCook);n();let x=y(r.databaseItem().cookedFrom);n(),u(d&&d.length?2:-1),n(),u(x&&x.length?3:-1)}},dependencies:[D,S,ht],encapsulation:2});let e=t;return e})();function Ia(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Usage in processing "),p()(),c(5,"app-processor-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),m("templateRef",i),n(2),m("dataSource",a)}}function Sa(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Processing"),p()(),c(5,"app-processor-table",4),p()),e&2){let i=h(1);b();let a=v(1);n(3),m("templateRef",i),n(2),m("dataSource",a)}}var Rt=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-artisan"]],features:[g],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showProcessor","",3,"dataSource"]],template:function(o,r){if(o&1&&(T(0)(1),f(2,Ia,6,2,"app-expandable",1),f(3,Sa,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().artisanIngredient);n();let x=y(r.databaseItem().artisanResult);n(),u(d&&d.length?2:-1),n(),u(x&&x.length?3:-1)}},dependencies:[D,S,xt],encapsulation:2});let e=t;return e})();var Ta=e=>[e];function Ea(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Ocean critters"),p()(),c(5,"app-caught-table",4),p()),e&2){let i=h(1);n(3),m("templateRef",i),n(2),m("dataSource",q(2,Ta,t))}}var Bt=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-sea-critters"]],features:[g],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){if(o&1&&f(0,Ea,6,4,"app-expandable",1),o&2){let d;u((d=r.databaseItem().oceanCritter)?0:-1,d)}},dependencies:[D,S,j],encapsulation:2});let e=t;return e})();var wa=e=>[e];function Fa(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Bugs and insects "),p()(),c(5,"app-caught-table",4),p()),e&2){let i=h(1);n(3),m("templateRef",i),n(2),m("dataSource",q(2,wa,t))}}var Lt=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-insects"]],features:[g],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){if(o&1&&f(0,Fa,6,4,"app-expandable",1),o&2){let d;u((d=r.databaseItem().insect)?0:-1,d)}},dependencies:[D,S,j],encapsulation:2});let e=t;return e})();var Ma=e=>[e];function Ra(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Fishing"),p()(),c(5,"app-caught-table",4),p()),e&2){let i=h(1),a=b();n(3),m("templateRef",i),n(2),m("dataSource",q(2,Ma,a.fish))}}var Ht=(()=>{let t=class t extends I{ngOnInit(){let a=this.databaseItem().fish;a&&(this.fish=ye(ge({},a),{item:this.databaseItem().item}))}};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-fishing"]],features:[g],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){o&1&&f(0,Ra,6,4,"app-expandable",1),o&2&&u(r.fish?0:-1)},dependencies:[j,S,D],encapsulation:2});let e=t;return e})();function Ba(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Seed for"),p()(),c(5,"app-crop-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),m("templateRef",i),n(2),m("dataSource",a)}}function La(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"From seed"),p()(),c(5,"app-crop-table",4),p()),e&2){let i=h(1);b();let a=v(1);n(3),m("templateRef",i),n(2),m("dataSource",a)}}var Pt=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-crops"]],features:[g],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){if(o&1&&(T(0)(1),f(2,Ba,6,2,"app-expandable",1),f(3,La,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().comesFromSeed);n();let x=y(r.databaseItem().isSeedFor);n(),u(d&&d.length?2:-1),n(),u(x&&x.length?3:-1)}},dependencies:[D,S,st],encapsulation:2});let e=t;return e})();function Ha(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Required for offering "),p()(),c(5,"app-offerings-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),m("templateRef",i),n(2),m("dataSource",a)}}function Pa(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Offering reward"),p()(),c(5,"app-offerings-table",4),p()),e&2){let i=h(1);b();let a=v(1);n(3),m("templateRef",i),n(2),m("dataSource",a)}}var kt=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-offerings"]],features:[g],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showAltar","",3,"dataSource"]],template:function(o,r){if(o&1&&(T(0)(1),f(2,Ha,6,2,"app-expandable",1),f(3,Pa,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().requiredAsOffering);n();let x=y(r.databaseItem().isBundleRewardIn);n(),u(d&&d.length?2:-1),n(),u(x&&x.length?3:-1)}},dependencies:[D,S,_t],encapsulation:2});let e=t;return e})();function ka(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Buy at"),p()(),c(5,"app-shop-item-data-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),m("templateRef",i),n(2),m("dataSource",a)}}var Nt=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-shop-data"]],features:[g],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){if(o&1&&(T(0),f(1,ka,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().buyAt);n(),u(d&&d.length?1:-1)}},dependencies:[D,S,gt],encapsulation:2});let e=t;return e})();function Na(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Chance as processing result "),p()(),c(5,"app-shop-item-process-table",4),p()),e&2){let i=h(1);b();let a=v(1);n(3),m("templateRef",i),n(2),m("dataSource",a)}}function $a(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Can be processed at "),p()(),c(5,"app-shop-item-process-table",4),p()),e&2){let i=h(1);b();let a=v(0);n(3),m("templateRef",i),n(2),m("dataSource",a)}}var $t=(()=>{let t=class t extends I{};t.\u0275fac=(()=>{let a;return function(r){return(a||(a=_(t)))(r||t)}})(),t.\u0275cmp=C({type:t,selectors:[["app-database-shop-item-process"]],features:[g],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(o,r){if(o&1&&(T(0)(1),f(2,Na,6,2,"app-expandable",1),f(3,$a,6,2,"app-expandable",1)),o&2){let d=y(r.databaseItem().asProcessInput);n();let x=y(r.databaseItem().chanceAsProcessResult);n(),u(x&&x.length?2:-1),n(),u(d&&d.length?3:-1)}},dependencies:[D,S,yt],encapsulation:2});let e=t;return e})();function Aa(e,t){if(e&1&&(s(0,"app-card")(1,"header",0),c(2,"app-item-icon",1),s(3,"div",2)(4,"h2",3),l(5),p(),s(6,"span"),l(7),p()(),s(8,"div",4),c(9,"app-to-do-toggle",5),p(),c(10,"div",6)(11,"app-quality-grid",7),p(),s(12,"p",8),l(13),p(),s(14,"div",9),l(15,"There's currently no data for this item. :("),p(),c(16,"app-database-shop-item-process",10)(17,"app-database-shop-data",10)(18,"app-database-offerings",10)(19,"app-database-crops",10)(20,"app-database-fishing",10)(21,"app-database-insects",10)(22,"app-database-sea-critters",10)(23,"app-database-artisan",10)(24,"app-database-cooking",10)(25,"app-database-mixing",10)(26,"app-database-crafting",10)(27,"app-database-festival-shop-data",10)(28,"app-database-gifts",10)(29,"app-database-item-upgrade",10)(30,"app-database-bestiary",10),p()),e&2){let i=t;n(2),m("itemName",i.item.iconName),n(3),O(i.item.displayName),n(2),O(i.item.id),n(2),m("item",i.item),n(2),m("showOnlyBase",!i.item.qualities.bronze)("item",i.item),n(2),O(i.item.description),n(3),m("databaseItem",i),n(),m("databaseItem",i),n(),m("databaseItem",i),n(),m("databaseItem",i),n(),m("databaseItem",i),n(),m("databaseItem",i),n(),m("databaseItem",i),n(),m("databaseItem",i),n(),m("databaseItem",i),n(),m("databaseItem",i),n(),m("databaseItem",i),n(),m("databaseItem",i),n(),m("databaseItem",i),n(),m("databaseItem",i),n(),m("databaseItem",i)}}function Va(e,t){e&1&&(s(0,"app-card"),c(1,"mat-spinner",11),p())}function Oa(e,t){if(e&1&&(f(0,Aa,31,22,"app-card"),P(1,"async"),Re(2,Va,2,0,"app-card")),e&2){let i,a=b();u((i=k(1,1,a.databaseItem$))?0:2,i)}}var At=(()=>{var t;let i=class i{constructor(){De(this,t);this.item=G.required(),Ie(this,t,w(U))}ngOnInit(){this.databaseItem$=ve(this,t).fetchDatabaseItem$(this.item().id)}};t=new WeakMap,i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=C({type:i,selectors:[["app-database-details"]],hostAttrs:[1,"col-span-full","database-details"],inputs:{item:[1,"item"]},decls:1,vars:1,consts:[[1,"flex","items-center","flex-wrap","mb-5"],[1,"mr-3","w-14",3,"itemName"],[1,"flex","flex-col","gap-0.5"],[1,"!my-0","font-semibold","text-xl","text-black"],[1,"card-actions","ml-4"],["context","database",3,"item"],[1,"h-0","w-full","md:hidden"],["includePrices","",1,"md:ml-auto","mt-4","md:mt-0","quality-grid","inline-block","w-fit",3,"showOnlyBase","item"],[1,"text-lg"],[1,"empty-details","text-black","my-5","text-lg"],[3,"databaseItem"],[1,"mx-auto"]],template:function(r,d){r&1&&f(0,Oa,3,3),r&2&&u(d.databaseItem$?0:-1)},dependencies:[Dt,It,St,Tt,Et,Ft,Mt,Rt,Bt,Lt,Ht,Pt,kt,Nt,$t,nt,tt,N,ee,et,X],styles:[`.database-details .empty-details{display:none}.database-details:not(:has(.database-header)) .empty-details{display:block}.database-details .expandable-body{transition:none}.quality-grid .app-item-icon>img{height:3.5rem}.database-header{color:#000;font-weight:600;font-size:1.25em;margin-top:1.2em;line-height:1.6}
`],encapsulation:2});let e=i;return e})();function qa(e,t){if(e&1){let i=xe();s(0,"app-card",1)(1,"div",5)(2,"h2"),l(3,"Important note"),p(),s(4,"p"),l(5,"The item list loads a lot of stuff, this may take a while. The list below shows everything, that got not filtered beforehand. Some of those items will never be obtainable as they only provide a technical purpose. The information shown per item are as complete as the rest of this website. When new features get added, the details in here will expand as well."),p(),s(6,"button",6),_e("click",function(){Y(i);let o=b();return Z(o.hideImportantNote())}),l(7,"Got it!"),p()()()}}function Ga(e,t){if(e&1){let i=xe();s(0,"app-item-icon",8),_e("mouseenter",function(){let o=Y(i).$implicit,r=b(2);return Z(r.prefetchItem(o))})("click",function(){let o=Y(i),r=o.$implicit,d=o.$index,x=b(2);return Z(x.showDetails(r,d))}),p()}if(e&2){let i=t.$implicit,a=b(2);V("selected-icon",(a.selectedItem==null?null:a.selectedItem.id)===i.id),m("itemName",i.iconName)}}function Ua(e,t){if(e&1&&(L(0,Ga,1,3,"app-item-icon",7,Me().trackById,!0),l(2)),e&2){let i=b();H(i.filteredItems),n(2),$(" ",i.initialItemLoad()," ")}}var wo=(()=>{let t=class t{constructor(){this.localStorage=w(Ue),this.searchTermControl=new ze("",{nonNullable:!0}),this.shouldHideImportantNote=!1,this.filteredItems=[],this.environmentInjector=w(Ce),this._route=w(Ze),this._router=w(Je),this._database=w(U),this._appRef=w(Fe),this._injector=w(Ce),this._title=w(Ve),this._localStorageHideNoteKey="databaseHideImportantNote",this._didInitialLoad=!1,this.shouldHideImportantNote=je(this.localStorage.getItem(this._localStorageHideNoteKey)),this.items=this._database.getItems().filter(o=>Ge(o.id)===qe.BASE);let a=ue(o=>{let x=/tag:(?<tag>[a-zA-Z.]+)/gm.exec(o)?.groups?.tag.replace("tag:","").toLocaleLowerCase()??"",M=o.replace("tag:"+x,"").toLocaleLowerCase().trim(),z=this.items.filter(Q=>{let K=!0;return x&&(K=!!Q.tags?.some(fe=>fe.toLocaleLowerCase().includes(x))),K?Q.displayName.toLocaleLowerCase().includes(M)||M.startsWith("item_")&&Q.id.startsWith(M):!1});return this.filteredItems=z,z});this.filteredItems$=Se(this._route.queryParams.pipe(ue(o=>{let r=o.q??"";return this.searchTermControl.setValue(r,{emitEvent:!1}),r}),a,W(1)),this.searchTermControl.valueChanges.pipe(Te(300),be(o=>{this.updateQueryParam(o),document.getElementById("database-details")?.remove()}),a))}showDetails(a,o,r=!1){this.updateRouteParam(a.id),this.selectedItem=void 0,document.getElementById("database-details")?.remove();let d=document.getElementById("grid");if(!d)return;let M=window.getComputedStyle(d).getPropertyValue("grid-template-columns").split(" ").length,z=Math.floor(o/M),Q=Math.min(this.filteredItems.length,(z+1)*M),K=document.querySelector(`#grid app-item-icon:nth-of-type(${Q})`);if(!K)return;let fe=this.createComponent(a);this.insertAfter(fe,K),this.selectedItem=a,r&&setTimeout(()=>document.getElementById("database-details")?.scrollIntoView(!0),0)}insertAfter(a,o){o.parentNode?.insertBefore(a.location.nativeElement,o.nextSibling),this._appRef.attachView(a.hostView)}createComponent(a){let o=$e(At,{environmentInjector:this._injector});o.setInput("item",a);let r=o.location.nativeElement;return r.id="database-details",o}hideImportantNote(){this.shouldHideImportantNote=!0,this.localStorage.setItem(this._localStorageHideNoteKey,"true")}updateQueryParam(a){this._router.navigate([],{relativeTo:this._route,queryParams:{q:a},queryParamsHandling:"merge",replaceUrl:!0})}updateRouteParam(a){this._router.navigate(["/database",a],{relativeTo:this._route,replaceUrl:!0,queryParamsHandling:"preserve"}).then(()=>!!this.selectedItem&&this.updateTitle(this.selectedItem.displayName))}initialItemLoad(){this._didInitialLoad||this._route.params.pipe(be(a=>{let o=a.itemId;if(this._didInitialLoad=!0,!o)return;let r=this.filteredItems.findIndex(d=>d.id===o);if(r>-1)Ee(this.environmentInjector,()=>{we(()=>this.showDetails(this.filteredItems[r],r,!0))});else if(this.filteredItems.length===0){let d=this.items.findIndex(x=>x.id===o);if(d>-1){let x=this.items[d];this._setGridContent(x)}}}),W(1)).subscribe()}trackById(a,o){return o.id}prefetchItem(a){this._database.fetchDatabaseItem$(a.id).pipe(W(1)).subscribe()}updateTitle(a){let o=this._title.getTitle();o&&this._title.setTitle(`${a} - ${o}`)}_setGridContent(a){let o=this.createComponent(a);document.getElementById("grid")?.appendChild(o.location.nativeElement),this._appRef.attachView(o.hostView),this.selectedItem=a}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=C({type:t,selectors:[["app-database"]],decls:9,vars:5,consts:[[1,"container","mx-auto","pb-6","database-grid","px-2"],[1,"my-3"],[1,"semi-transparent-form-field","my-3"],["matInput","",3,"formControl"],["id","grid",1,"icon-grid"],[1,"prose","lg:prose-xl"],[1,"btn","btn-secondary",3,"click"],[1,"icon-grid-item",3,"selected-icon","itemName"],[1,"icon-grid-item",3,"mouseenter","click","itemName"]],template:function(o,r){o&1&&(s(0,"div",0),f(1,qa,8,0,"app-card",1),s(2,"mat-form-field",2)(3,"mat-label"),l(4,"Search term"),p(),c(5,"input",3),p(),s(6,"div",4),f(7,Ua,3,1),P(8,"async"),p()()),o&2&&(n(),u(r.shouldHideImportantNote?-1:1),n(4),m("formControl",r.searchTermControl),n(2),u(k(8,3,r.filteredItems$)?7:-1))},dependencies:[it,ot,ee,Ye,Qe,Ke,We,N,vt,X],encapsulation:2});let e=t;return e})();export{wo as DatabaseComponent};
