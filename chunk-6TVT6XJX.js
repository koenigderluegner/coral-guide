import{a as U,b as V}from"./chunk-DPHI5PSG.js";import{a as Y}from"./chunk-5RVYXRTM.js";import{a as K}from"./chunk-4ZSEYW2U.js";import{a as q}from"./chunk-GWHIDO34.js";import"./chunk-IEIN2YGJ.js";import{a as H}from"./chunk-SKYGTZSD.js";import"./chunk-4FC5X73U.js";import"./chunk-EEJJBISB.js";import"./chunk-W62UHBDW.js";import{a as G,c as O}from"./chunk-C5INTR5H.js";import"./chunk-MG3YOV2C.js";import{a as Q}from"./chunk-Q6TTGOE2.js";import"./chunk-32PODRCK.js";import{b as X}from"./chunk-MCZ27GCN.js";import"./chunk-XCL4JOYZ.js";import"./chunk-PEGVYEIS.js";import"./chunk-EAHNU44C.js";import{b as z}from"./chunk-3NZE6WSA.js";import"./chunk-NS43UFKU.js";import"./chunk-DS5QD6KN.js";import"./chunk-XMGSTBON.js";import"./chunk-VEYYY66H.js";import"./chunk-4I65K53K.js";import{i as A,l as C}from"./chunk-AZ3T5YEV.js";import"./chunk-7MLGAPHH.js";import"./chunk-IP6ODCNA.js";import"./chunk-5BU3IDKS.js";import{e as I}from"./chunk-I7ZNO67X.js";import"./chunk-24VFFX2T.js";import"./chunk-7M6VBWZN.js";import"./chunk-C6P6X2N5.js";import"./chunk-YU6OV3L2.js";import"./chunk-OTWAXCZF.js";import"./chunk-NKAP6NYB.js";import{h as S,k as F}from"./chunk-KM3RDE6Q.js";import"./chunk-JY3RTIIU.js";import"./chunk-2SASL4UW.js";import"./chunk-B7M7KWVX.js";import{i as k}from"./chunk-PK2RARDK.js";import{$b as D,Gb as d,Ib as _,Kb as b,Kc as P,Lb as T,Lc as R,Mb as y,Nb as s,Ob as l,Pb as m,Qb as u,Sc as j,Xb as x,Ya as p,Yc as B,bc as c,ia as g,ja as w,jb as f,nb as E,nc as $,pb as N,vc as W,wc as J,xc as M}from"./chunk-ELCUH6OG.js";import{g as v,i as L}from"./chunk-IGH4DTA6.js";function nt(t,o){if(t&1&&u(0,"app-fish",2),t&2){let i=c().$implicit;s("fish",i.fish)}}function at(t,o){if(t&1&&u(0,"app-insect",3),t&2){let i=c().$implicit;s("critter",i.insect)}}function ot(t,o){if(t&1&&u(0,"app-insect",3),t&2){let i=c().$implicit;s("critter",i.oceanCritter)}}function rt(t,o){if(t&1&&d(0,nt,1,1,"app-fish",2)(1,at,1,1,"app-insect",3)(2,ot,1,1,"app-insect",3),t&2){let i=o.$implicit;_(i.fish?0:i.insect?1:i.oceanCritter?2:-1)}}var Z=(()=>{var o,tt;let e=class e{constructor(){v(this,o);this.critter=B.required(),j(()=>{this.critter(),L(this,o,tt).call(this)})}};o=new WeakSet,tt=function(){let a=this.critter();this.toDoContext="fishName"in a?"journal_fish":a.item.inventoryCategory.toLocaleLowerCase()==="bug"?"journal_insects":"journal_critter"},e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=f({type:e,selectors:[["app-caught-details"]],inputs:{critter:[1,"critter"]},decls:2,vars:2,consts:[[3,"context","itemId"],["appDatabaseItemDetails",""],[3,"fish"],[3,"critter"]],template:function(r,h){r&1&&(l(0,"app-database-item-details",0),N(1,rt,3,1,"ng-template",1),m()),r&2&&s("context",h.toDoContext)("itemId",h.critter().item.id)},dependencies:[U,V,H,K],encapsulation:2});let t=e;return t})();function st(t,o){if(t&1&&u(0,"app-caught-details",1),t&2){let i=c();s("critter",i.selectedEntity)}}function ct(t,o){if(t&1){let i=x();l(0,"app-item-icon",8),D("click",function(){let n=g(i).$implicit,a=c(4);return w(a.showDetails(n))}),m()}if(t&2){let i=o.$implicit,e=c(4);$("selected-icon",(e.selectedEntity==null||e.selectedEntity.item==null?null:e.selectedEntity.item.id)===i.item.id),s("itemName",i.item.iconName)}}function lt(t,o){if(t&1&&(l(0,"div",5),T(1,ct,1,3,"app-item-icon",7,b),m()),t&2){let i=c();p(),y(i)}}function pt(t,o){if(t&1&&u(0,"app-caught-table",6),t&2){let i=c();s("dataSource",i)}}function mt(t,o){if(t&1){let i=x();l(0,"app-data-filter",4),M("showTableChange",function(n){g(i);let a=c(2);return J(a.showTable,n)||(a.showTable=n),w(n)}),m(),d(1,lt,3,0,"div",5),d(2,pt,1,1,"app-caught-table",6)}if(t&2){let i=c(2);W("showTable",i.showTable),s("parentFormGroup",i.formControl)("locations",i.getLocations(o)),p(),_(i.showTable?-1:1),p(),_(i.showTable?2:-1)}}function ht(t,o){if(t&1&&(l(0,"mat-tab",3),d(1,mt,3,5),P(2,"async"),m()),t&2){let i,e=o.$implicit;s("label",e.title),p(),_((i=R(2,2,e.data))?1:-1,i)}}var $t=(()=>{let o=class o extends q{constructor(){super(new A({season:new C([...S],{nonNullable:!0}),weather:new C([...F],{nonNullable:!0}),location:new C(null),showTable:new C(!1,{nonNullable:!0})})),this.SEA_CRITTERS_INDEX=2,this.tabs=[{title:"Fish",data:this.getFilteredJournalData(this._database.fetchJournalOrder$("journal-fish"),this._database.fetchFish$(),0)},{title:"Insects",data:this.getFilteredJournalData(this._database.fetchJournalOrder$("journal-insects"),this._database.fetchBugsAndInsects$(),1)},{title:"Sea Critters",data:this.getFilteredJournalData(this._database.fetchJournalOrder$("journal-sea-critters"),this._database.fetchOceanCritters$(),this.SEA_CRITTERS_INDEX)}],this.activateTabFromRoute(this.tabs.map(e=>e.title))}filterPredicate(e,n,a){return!n.season?.length||!n.weather?.length?!1:"spawnSettings"in e?e.spawnSettings?.some(r=>this.matchLocation(r.spawnLocation,n.location)&&this.matchSeason(r.spawnSeason,n.season)&&this.matchWeather(r.spawnWeather,a,n.weather)):this.matchLocation(e.spawnLocation,n.location)&&this.matchSeason(e.spawnSeason,n.season)&&this.matchWeather(e.spawnWeather,a,n.weather)}matchLocation(e,n){return!n||e.includes(n)}matchWeather(e,n,a){let r=I(e).toLowerCase();return n===this.SEA_CRITTERS_INDEX||r==="any"||a?.length===F.length||!!a?.some(et=>r.includes((""+et).toLowerCase()))}matchSeason(e,n){let a=I(e).toLowerCase();return a==="any"||n?.length===S.length||!!n?.some(h=>a.includes((""+h).toLowerCase()))}getLocations(e){return e.length?[...new Set(e.map(n=>"fishName"in n?n.spawnSettings.map(a=>a.spawnLocation):n.spawnLocation).flat(2))].sort():[]}resetLocationFilter(){this.formControl.get("location")?.setValue(null)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=f({type:o,selectors:[["app-caught"]],features:[E],decls:5,vars:3,consts:[[3,"removePlaceholder"],["listDetail","",3,"critter"],[3,"selectedTabChange","selectedIndex"],[3,"label"],[3,"showTableChange","showTable","parentFormGroup","locations"],[1,"icon-grid"],[3,"dataSource"],[1,"icon-grid-item",3,"itemName","selected-icon"],[1,"icon-grid-item",3,"click","itemName"]],template:function(n,a){n&1&&(l(0,"app-list-detail-container",0),d(1,st,1,1,"app-caught-details",1),l(2,"mat-tab-group",2),D("selectedTabChange",function(h){return a.updateUrl(h),a.resetLocationFilter()}),T(3,ht,3,4,"mat-tab",3,b),m()()),n&2&&(s("removePlaceholder",a.showTable),p(),_(a.selectedEntity?1:-1),p(),s("selectedIndex",a.selectedTabIndex()),p(),y(a.tabs))},dependencies:[X,Z,O,G,Q,z,Y,k],encapsulation:2});let t=o;return t})();export{$t as CaughtComponent};
