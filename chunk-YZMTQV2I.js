import{a as le}from"./chunk-EI45D5DW.js";import"./chunk-YWPVSJQY.js";import{a as se}from"./chunk-NJ4URS2A.js";import{a as re}from"./chunk-J5MV7SV4.js";import{a as oe,b as pe}from"./chunk-5SUIQM33.js";import{a as de}from"./chunk-43WL3FPX.js";import{a as me}from"./chunk-HZHWUMV5.js";import"./chunk-R36K3VH7.js";import"./chunk-VIHDBGTU.js";import{a as ce}from"./chunk-A4HPUO3F.js";import{a as ne}from"./chunk-AYHAHLTC.js";import{a as ae}from"./chunk-5PS4YV7K.js";import"./chunk-WP2B2A6N.js";import"./chunk-L5G7Q7YK.js";import{a as z}from"./chunk-ZB23GXIF.js";import"./chunk-OCVYEX7D.js";import"./chunk-KYJPB6XG.js";import"./chunk-HWSOVV66.js";import"./chunk-H5W4AT7W.js";import"./chunk-CS6UDEWJ.js";import"./chunk-R5W7LKTI.js";import"./chunk-YRO3XTLN.js";import"./chunk-O2IAJ5L5.js";import{a as ie}from"./chunk-EGGJNKID.js";import"./chunk-5EZIUWJI.js";import"./chunk-IYMAANR5.js";import"./chunk-DUMUFVPR.js";import"./chunk-GZYBMURB.js";import"./chunk-OYPR7CJS.js";import{b as X,c as Z}from"./chunk-QLTEDVDB.js";import{a as ee}from"./chunk-ZNXHGMTD.js";import"./chunk-IBXLELUQ.js";import{b as te}from"./chunk-OU4TLBIG.js";import"./chunk-EJRI7FQQ.js";import"./chunk-U65D7S4X.js";import"./chunk-IJY46FI3.js";import"./chunk-3AJAQBMU.js";import"./chunk-7C5Y62SY.js";import{a as Q}from"./chunk-VRZECYYF.js";import"./chunk-IIDJZWRT.js";import{c as J}from"./chunk-7MFI6IJ7.js";import"./chunk-HIFLNZD5.js";import{a as W}from"./chunk-ZALICU3N.js";import"./chunk-47OJ7DES.js";import{a as B}from"./chunk-UUI6UFCU.js";import"./chunk-BFCDBX46.js";import{b as Y,c as R}from"./chunk-G2FIETR4.js";import"./chunk-7DQT77OQ.js";import{k as F}from"./chunk-OHR5KDYC.js";import{Ac as j,Bc as P,Dc as G,Gc as U,Hb as l,Jb as m,Lb as g,Lc as E,Mb as v,Mc as T,Nb as C,Nc as A,Ob as _,Pb as a,Qb as r,Rb as f,Xa as L,Yb as S,Za as n,Zc as N,ac as k,ca as w,cc as d,ia as y,ja as b,kb as I,mc as H,ob as V,oc as D,q as $,qb as K,rc as o,sc as x,tc as h,uc as q,xa as M,zc as O}from"./chunk-FPTGDBQG.js";import"./chunk-2QKSPLSF.js";function Ce(e,i){if(e&1&&(a(0,"div",3),o(1),r()),e&2){let t=i.$implicit;n(),q("",t.key," : ",t.value?"Has to be seen":"Has to be unseen"," ")}}function xe(e,i){if(e&1&&(v(0,Ce,2,2,"div",3,g),E(2,"keyvalue")),e&2){let t=i.$implicit;C(T(2,0,t))}}function he(e,i){if(e&1&&(a(0,"div"),o(1,"Other cutscenes requirements: "),v(2,xe,3,2,null,null,g),r()),e&2){let t=d();n(2),C(t.heartEventTrigger().otherCutscenesState)}}function ue(e,i){if(e&1&&(a(0,"div"),o(1,"Only on days: "),a(2,"span",3),o(3),r()()),e&2){let t=d();n(3),x(t.heartEventTrigger().specificDay.join(", "))}}function Ee(e,i){if(e&1&&(a(0,"div"),o(1,"Only in seasons: "),a(2,"span",3),o(3),r()()),e&2){let t=d();n(3),x(t.heartEventTrigger().specificMonth.join(", "))}}function Te(e,i){if(e&1&&(a(0,"div"),o(1,"Only with weather: "),a(2,"span",3),o(3),r()()),e&2){let t=d();n(3),x(t.heartEventTrigger().specificWeather.join(", "))}}function ye(e,i){if(e&1&&f(0,"app-effect",7),e&2){let t=i.$implicit;_("effect",t)}}function be(e,i){if(e&1&&(a(0,"div",4)(1,"span",5),o(2,"Effects when seen"),r(),a(3,"div",6),v(4,ye,1,1,"app-effect",7,g),r()()),e&2){let t=d();n(4),C(t.heartEventTrigger().effects)}}function Ie(e,i){if(e&1&&o(0),e&2){d(2);let t=P(0);h(" Unlock requirements (",t.type==="And"?"all":"any"," of them): ")}}function Se(e,i){e&1&&o(0," Unlock requirement: ")}function ke(e,i){if(e&1&&f(0,"app-requirements",8),e&2){let t=i.$implicit;_("requirement",t)}}function Ne(e,i){if(e&1&&(a(0,"div",4)(1,"span",5),l(2,Ie,1,1),l(3,Se,1,0),r(),a(4,"div",6),v(5,ke,1,1,"app-requirements",8,g),r()()),e&2){d();let t=P(0);n(2),m(t.requirements.length>1?2:-1),n(),m(t.requirements.length<2?3:-1),n(2),C(t.requirements)}}var fe=(()=>{let i=class i{constructor(){this.heartEventTrigger=N.required(),this.heartEventChecklist=w(le)}toggleHeartEvent(c){c?this.heartEventChecklist.add(this.heartEventTrigger().cutscene):this.heartEventChecklist.remove(this.heartEventTrigger().cutscene)}};i.\u0275fac=function(s){return new(s||i)},i.\u0275cmp=I({type:i,selectors:[["app-heart-event-trigger"]],inputs:{heartEventTrigger:[1,"heartEventTrigger"]},decls:33,vars:19,consts:[[1,"flex","justify-between","text-black","mb-1"],[1,"flex","flex-col"],[3,"change","checked"],[1,"text-black"],[1,"my-4"],[1,"text-lg","text-black"],[1,"flex","flex-col","text-black"],[3,"effect"],[3,"requirement"]],template:function(s,p){if(s&1){let u=S();O(0),a(1,"header",0)(2,"div",1)(3,"h4"),o(4),r(),a(5,"span"),o(6),r()(),a(7,"mat-checkbox",2),k("change",function(ve){return y(u),b(p.toggleHeartEvent(ve.checked))}),o(8,"Cutscene seen "),r()(),a(9,"div"),o(10,"Enabled: "),a(11,"span",3),o(12),r()(),a(13,"div"),o(14,"Location: "),a(15,"span",3),o(16),r()(),a(17,"div"),o(18,"Day Time of day: "),a(19,"span",3),o(20),E(21,"ingameTime"),E(22,"ingameTime"),r()(),a(23,"div"),o(24,"Can trigger on the same day: "),a(25,"span",3),o(26),r()(),l(27,he,4,0,"div"),l(28,ue,4,1,"div"),l(29,Ee,4,1,"div"),l(30,Te,4,1,"div"),l(31,be,6,0,"div",4),l(32,Ne,7,2,"div",4)}if(s&2){let u=j(p.heartEventTrigger().requirements);n(4),x(p.heartEventTrigger().cutscene),n(2),h("Id: ",p.heartEventTrigger().id," "),n(),_("checked",p.heartEventChecklist.isChecked(p.heartEventTrigger().cutscene)),n(5),x(p.heartEventTrigger().enabled?"Yes":"No"),n(4),x(p.heartEventTrigger().location),n(4),q(" ",T(21,15,p.heartEventTrigger().time.fromTime),"-",T(22,17,p.heartEventTrigger().time.toTime),`
`),n(6),x(p.heartEventTrigger().canTriggerSameDay?"Yes":"No"),n(),m(p.heartEventTrigger().otherCutscenesState.length?27:-1),n(),m(p.heartEventTrigger().specificDay.length?28:-1),n(),m(p.heartEventTrigger().specificMonth.length?29:-1),n(),m(p.heartEventTrigger().specificWeather.length?30:-1),n(),m(p.heartEventTrigger().effects&&p.heartEventTrigger().effects.length?31:-1),n(),m(u&&u.requirements.length?32:-1)}},dependencies:[me,ne,z,F,de],styles:["[_nghost-%COMP%]{display:block}"]});let e=i;return e})();function we(e,i){e&1&&f(0,"hr",5)}function Fe(e,i){if(e&1&&(f(0,"app-heart-event-trigger",4),l(1,we,1,0,"hr",5)),e&2){let t=i.$implicit,c=i.$index,s=i.$count;D("mb-3",c===s-1),_("heartEventTrigger",t),n(),m(c!==s-1?1:-1)}}function He(e,i){if(e&1){let t=S();a(0,"app-expandable",1,0)(2,"h3",2),k("click",function(){y(t);let s=H(1);return b(s.toggle())}),o(3),f(4,"i",3),r(),v(5,Fe,2,4,null,null,g),r()}if(e&2){let t=i.$implicit,c=H(1);n(3),h(" ",t.heartLevel," hearts event "),n(),D("down",!c.isOpen())("up",c.isOpen()),n(),C(t.trigger)}}var ge=(()=>{let i=class i{constructor(){this.heartEvents=N.required()}};i.\u0275fac=function(s){return new(s||i)},i.\u0275cmp=I({type:i,selectors:[["app-heart-events"]],inputs:{heartEvents:[1,"heartEvents"]},decls:2,vars:0,consts:[["expandable",""],[1,"bg-amber-50/70","px-4","rounded-lg","mb-3","shadow-sm"],["expandableHeader","",1,"text-xl","text-black","flex","items-center","justify-between","cursor-pointer","py-4",3,"click"],[1,"arrow"],[3,"heartEventTrigger"],[1,"my-3"]],template:function(s,p){s&1&&v(0,He,7,5,"app-expandable",1,g),s&2&&C(p.heartEvents())},dependencies:[fe,ae],encapsulation:2});let e=i;return e})();function De(e,i){if(e&1&&f(0,"app-offering",3),e&2){let t=i.$implicit;_("details",t)}}function qe(e,i){if(e&1&&(a(0,"app-item-card-switch",0),K(1,De,1,1,"ng-template",2),r()),e&2){let t=d();_("item",t.selectedEntity)}}function Pe(e,i){if(e&1&&f(0,"app-ui-icon",8),e&2){let t=d(2);_("matTooltip",G("",t.npc.characterName," is dateable"))("uiIcon",t.uiIcon.LOVE)}}function Be(e,i){if(e&1&&(a(0,"div",9),f(1,"app-ui-icon",16),o(2),E(3,"ingameDate"),r()),e&2){let t=d(2);n(),_("uiIcon",t.uiIcon.BIRTHDAY),n(),h(" ",T(3,2,t.npc.birthday)," ")}}function $e(e,i){if(e&1&&(a(0,"p",10),o(1),r()),e&2){let t=d(2);n(),x(t.npc.description)}}function Me(e,i){if(e&1){let t=S();a(0,"app-gifting-grid",17),k("itemClicked",function(s){y(t);let p=d(2);return b(p.showDetails(s))}),r()}if(e&2){let t=d(2);_("preferences",t.giftingPreferences)}}function Le(e,i){if(e&1&&(a(0,"p",14),o(1),r()),e&2){let t=d(2);n(),h(" ",t.npc.characterName," has no specialized preferences. ")}}function Ve(e,i){if(e&1&&f(0,"app-heart-events",15),e&2){let t=d(2);_("heartEvents",t.heartEvents)}}function Ke(e,i){if(e&1&&(a(0,"p",14),o(1),r()),e&2){let t=d(2);n(),h(" ",t.npc.characterName," has no heart events. ")}}function Oe(e,i){if(e&1&&(a(0,"h3",18),o(1),r()),e&2){let t=d().$implicit;n(),h(" ",t.appearanceCategory," ")}}function je(e,i){if(e&1&&(a(0,"div",22)(1,"a",23),f(2,"app-ui-icon",24),r(),f(3,"app-npc-portrait",25),a(4,"span",26),o(5),r()()),e&2){let t=i.$implicit,c=d(6);n(),_("href",U("assets/",c.environment,"/portraits/",c.npc.key,"/",t.value,".webp?v=",c.version),L),n(),_("uiIcon",c.UiIcon.MAGNIFYING_GLASS),n(),_("npcKey",c.npc.key)("portraitName",t.value),n(2),x(t.key)}}function Ge(e,i){if(e&1&&(a(0,"div",19)(1,"h4",20),o(2),r(),a(3,"div",21),v(4,je,6,9,"div",22,g),E(6,"keyvalue"),r()()),e&2){let t=i.$implicit;n(2),x(t.key),n(2),C(T(6,1,t.value))}}function Ue(e,i){if(e&1&&v(0,Ge,7,3,"div",19,g),e&2){let t=d();C(t)}}function Ae(e,i){if(e&1&&(a(0,"p",14),o(1),r()),e&2){let t=d(4);n(),h(" ",t.npc.characterName," has no appearances. ")}}function Ye(e,i){if(e&1&&(l(0,Ue,2,0),l(1,Ae,2,1,"p",14)),e&2){let t=i;m(t.length?0:-1),n(),m(t.length?-1:1)}}function ze(e,i){if(e&1&&(l(0,Oe,2,1,"h3",18),l(1,Ye,2,2),E(2,"keyvalue")),e&2){let t,c=i.$implicit;m(c.appearanceCategory?0:-1),n(),m((t=A(2,2,c.appearances,null))?1:-1,t)}}function Re(e,i){if(e&1&&(a(0,"app-card")(1,"div",4),f(2,"app-item-icon",5),a(3,"div",6)(4,"div",7),o(5),l(6,Pe,1,3,"app-ui-icon",8),r(),l(7,Be,4,4,"div",9),r()(),l(8,$e,2,1,"p",10),r(),a(9,"app-card",11)(10,"h2",12),o(11," Gifting "),r(),l(12,Me,1,1,"app-gifting-grid",13),l(13,Le,2,1,"p",14),r(),a(14,"app-card",11)(15,"h2",12),o(16," Heart events "),r(),l(17,Ve,1,1,"app-heart-events",15),l(18,Ke,2,1,"p",14),r(),a(19,"app-card",11)(20,"h2",12),o(21," Appearances "),r(),v(22,ze,3,5,null,null,g),r()),e&2){let t=d();n(2),_("itemName",t.npc.iconName),n(3),h(" ",t.npc.characterName," "),n(),m(t.npc.isDateable?6:-1),n(),m(t.npc.birthday?7:-1),n(),m(t.npc.description?8:-1),n(4),m(t.giftingPreferences?12:-1),n(),m(t.giftingPreferences?-1:13),n(4),m(t.heartEvents.length?17:-1),n(),m(t.heartEvents.length?-1:18),n(4),C(t.npc.appearances)}}function We(e,i){e&1&&(a(0,"app-card")(1,"h1",27),o(2," NPC not found. "),r()())}function Je(e,i){e&1&&f(0,"mat-spinner",1)}var Pt=(()=>{let i=class i extends Z{constructor(){super(...arguments),this.npcKey=N.required(),this.npc=null,this.heartEvents=[],this.UiIcon=B,this.uiIcon=B,this.environment=w(Y).getSettings().useBeta?"beta":"live",this.version=w(R).value()}ngOnInit(){$([this._database.fetchNPCs$(),this._database.fetchHeartEvents$(),this._database.fetchGiftingPreferences$()]).subscribe({next:([c,s,p])=>{this.npc=c.find(u=>u.key.toLowerCase()===this.npcKey().toLowerCase()),this.heartEvents=s[this.npcKey().toLowerCase()]??[],this.giftingPreferences=p.find(u=>u.mapKey.toLowerCase()===this.npc?.key.toLowerCase())}})}};i.\u0275fac=(()=>{let c;return function(p){return(c||(c=M(i)))(p||i)}})(),i.\u0275cmp=I({type:i,selectors:[["app-npc"]],inputs:{npcKey:[1,"npcKey"]},features:[V],decls:5,vars:2,consts:[["listDetail","",3,"item"],[1,"mx-auto","text-white"],["appDatabaseItemDetails",""],[3,"details"],[1,"text-2xl","text-black","font-semibold","flex","items-center","gifting-portrait"],[1,"h-16","mr-3",3,"itemName"],[1,"flex","flex-col"],[1,"flex","gap-2","items-center"],[1,"!text-gifting","!h-6","!w-6",3,"uiIcon","matTooltip"],[1,"text-lg","flex","gap-2"],[1,"mt-2"],[1,"mt-6"],[1,"mb-4","font-semibold","text-2xl","text-black"],[3,"preferences"],[1,"text-black","text-lg"],[3,"heartEvents"],[1,"!h-6","!w-6",3,"uiIcon"],[3,"itemClicked","preferences"],[1,"mb-4","font-semibold","text-xl","text-black"],[1,"font-semibold","text-black","mb-6"],[1,"text-lg"],[1,"grid","portrait-grid","gap-4"],[1,"flex","flex-col","shadow-lg","p-2","relative","group"],["target","_blank",1,"hidden","group-focus-visible:block","group-hover:block","absolute","top-2.5","right-2.5",3,"href"],[3,"uiIcon"],[1,"h-[400px]","flex","items-end","justify-center",3,"npcKey","portraitName"],[1,""],[1,"mb-4","font-semibold","text-3xl","text-black","flex","items-center","gap-x-4"]],template:function(s,p){s&1&&(a(0,"app-list-detail-container"),l(1,qe,2,1,"app-item-card-switch",0),l(2,Re,24,9)(3,We,3,0,"app-card")(4,Je,1,0,"mat-spinner",1),r()),s&2&&(n(),m(p.selectedEntity?1:-1),n(),m(p.npc?2:p.npc===void 0?3:p.npc===null?4:-1))},dependencies:[X,pe,oe,te,Q,W,re,ge,se,J,ie,ee,ce,F],styles:[`.gifting-portrait .app-item-icon>img{width:auto;height:100%;aspect-ratio:unset}.portrait-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}.portrait-grid .npc-portrait img{max-height:400px}@media (min-width: 1280px){.portrait-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}}
`],encapsulation:2});let e=i;return e})();export{Pt as NpcComponent};
