import{a as F,b as ne}from"./chunk-7BF7QRGV.js";import"./chunk-BYXBJQAS.js";import{a as oe}from"./chunk-A4HPUO3F.js";import"./chunk-OKR7QHIK.js";import"./chunk-QYM5RSKG.js";import{a as ie}from"./chunk-ZNXHGMTD.js";import"./chunk-IBXLELUQ.js";import"./chunk-YOD5VGJA.js";import"./chunk-EJRI7FQQ.js";import"./chunk-XMGSTBON.js";import"./chunk-7VKCZCDP.js";import"./chunk-RIQ7EVWM.js";import"./chunk-U65D7S4X.js";import"./chunk-IJY46FI3.js";import{b as J}from"./chunk-CXGH7SOD.js";import"./chunk-D33HMA7I.js";import{b as W}from"./chunk-IIDJZWRT.js";import{c as te}from"./chunk-7MFI6IJ7.js";import"./chunk-HIFLNZD5.js";import{a as ee}from"./chunk-ZALICU3N.js";import{h as X}from"./chunk-47OJ7DES.js";import{a as O}from"./chunk-SAY5CNC2.js";import"./chunk-BFCDBX46.js";import{b as Y,c as Z}from"./chunk-G2FIETR4.js";import"./chunk-7DQT77OQ.js";import{g as G}from"./chunk-OHR5KDYC.js";import{C as L,Dc as H,Gc as j,Hb as C,Jb as y,Jc as q,Kc as $,Lb as M,Lc as Q,Mb as V,Mc as U,Nb as P,Ob as h,Pb as c,Qb as p,Rb as m,Sc as S,Ub as k,Xa as T,Za as n,Zb as K,Zc as D,_c as R,ca as x,cc as _,k as I,kb as N,kc as z,lc as A,rc as b,sc as w,tc as B}from"./chunk-FPTGDBQG.js";import{d as l,e as u,f}from"./chunk-2QKSPLSF.js";var ae=(()=>{let t=class t{constructor(){this.portraitName=D.required(),this.npcKey=D.required(),this.environment=x(Y).getSettings().useBeta?"beta":"live",this.version=x(Z).value()}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=N({type:t,selectors:[["app-npc-head-portrait"]],hostAttrs:[1,"npc-head-portrait"],inputs:{portraitName:[1,"portraitName"],npcKey:[1,"npcKey"]},decls:1,vars:5,consts:[["alt","","loading","lazy","onerror","this.onerror=null;this.src='assets/ui/images/no-head-portrait.webp'",3,"src"]],template:function(a,r){a&1&&k(0,"img",0),a&2&&K("src",j("assets/",r.environment,"/head-portraits/",r.npcKey(),"/",r.portraitName(),".webp?v=",r.version),T)},encapsulation:2});let e=t;return e})();var pe=e=>["..",e],se=(e,t)=>({"line-clamp-2":e,"line-clamp-1":t});function ce(e,t){if(e&1&&m(0,"app-ui-icon",11),e&2){let i=_().$implicit,o=_(2);h("matTooltip",H("",i.characterName," is dateable"))("uiIcon",o.uiIcon.LOVE)}}function le(e,t){if(e&1&&(c(0,"div",12),m(1,"app-ui-icon",15),b(2),Q(3,"ingameDate"),p()),e&2){let i=_().$implicit,o=_(2);n(),h("uiIcon",o.uiIcon.BIRTHDAY),n(),B(" ",U(3,2,i.birthday)," ")}}function me(e,t){e&1&&(c(0,"div",14),b(1,"unofficial head portrait"),p())}function de(e,t){if(e&1&&(c(0,"a",4),m(1,"div",5),c(2,"div",6),m(3,"app-npc-head-portrait",7),p(),c(4,"div",8)(5,"div",9)(6,"span",10),b(7),p(),C(8,ce,1,3,"app-ui-icon",11),p(),C(9,le,4,4,"div",12),c(10,"div",13),b(11),p(),C(12,me,2,0,"div",14),p()()),e&2){let i=t.$implicit;h("routerLink",q(9,pe,i.key)),n(3),h("npcKey",i.key)("portraitName",i.headerPortraitFileName),n(4),w(i.characterName),n(),y(i.isDateable?8:-1),n(),y(i.birthday?9:-1),n(),h("ngClass",$(11,se,!i.customHead,i.customHead)),n(),w(i.description),n(),y(i.customHead?12:-1)}}function ue(e,t){e&1&&(c(0,"div",2),V(1,de,13,14,"a",4,M),p()),e&2&&(n(),P(t))}function fe(e,t){e&1&&m(0,"mat-spinner",3)}var ze=(()=>{var t,i,o,a,r;let d=class d{constructor(){u(this,t);u(this,i);u(this,o);u(this,a);u(this,r);this.npcFilter=R(F),this.uiIcon=O,f(this,t,S(()=>this.npcFilter()?.searchValueChanges()??"")),f(this,i,S(()=>this.npcFilter()?.sortValueChanges()??"default")),f(this,o,ne),this.filteredAndSortedNpcs=S(()=>{let v=l(this,a).call(this)??[];if(!l(this,t)||!l(this,i))return v;let s=l(this,t).call(this).toLowerCase(),g=l(this,i).call(this);return l(this,o).call(this,v,s,g)}),f(this,r,x(J)),f(this,a,W(l(this,r).fetchNPCs$().pipe(L(()=>I([])))))}};t=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,r=new WeakMap,d.\u0275fac=function(s){return new(s||d)},d.\u0275cmp=N({type:d,selectors:[["app-npc-list"]],viewQuery:function(s,g){s&1&&z(g.npcFilter,F,5),s&2&&A()},decls:4,vars:1,consts:[[1,"px-main-hz","py-main-vt"],[1,"z-30","relative"],[1,"grid","npc-list-grid","gap-x-4","gap-y-10"],[1,"mx-auto","text-white"],[1,"flex","bg-[#F5F1E6]","rounded-[30px]","npc-list-entry","group","relative",3,"routerLink"],[1,"frame","absolute","inset-0","rounded-[30px]","z-10","pointer-events-none"],[1,"basis-2/5","aspect-square","bg-[#F1E1CC]","rounded-l-[30px]","group-hover:bg-[#F2DBB7]"],[1,"z-20","flex","h-full","relative","rounded-l-[30px]",3,"npcKey","portraitName"],[1,"basis-3/5","p-2","flex","flex-col"],[1,"inline-flex","gap-2","mt-3","items-center"],[1,"text-black","font-semibold","text-2xl"],[1,"!text-gifting","!h-6","!w-6",3,"uiIcon","matTooltip"],[1,"text-lg","flex","gap-2","items-center"],[3,"ngClass"],["clasS","mt-auto"],[1,"!w-5","!h-5",3,"uiIcon"]],template:function(s,g){if(s&1&&(c(0,"div",0),m(1,"app-npc-filter",1),C(2,ue,3,0,"div",2)(3,fe,1,0,"mat-spinner",3),p()),s&2){let E;n(2),y((E=g.filteredAndSortedNpcs())?2:3,E)}},dependencies:[X,F,ee,ae,G,te,ie,oe],styles:[`.npc-list-entry .npc-head-portrait{display:flex;align-items:flex-end}.npc-list-entry .npc-head-portrait img{object-fit:cover;object-position:bottom;border-top-left-radius:30px;border-bottom-left-radius:30px;height:110%;margin-top:-9.0909090909%}.frame{box-shadow:inset 0 0 1px #e4b383;transition:box-shadow .2s ease-out}.npc-list-entry:hover .frame{box-shadow:inset 0 0 1px 10px #e4b383}.npc-list-entry:hover .npc-head-portrait img{height:120%;margin-top:-18.1818181818%}.npc-list-grid{grid-template-columns:repeat(auto-fill,minmax(360px,1fr))}
`],encapsulation:2});let e=d;return e})();export{ze as NpcListComponent};
