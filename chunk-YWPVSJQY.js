import{a as m}from"./chunk-OYPR7CJS.js";import{a as k,b as u}from"./chunk-G2FIETR4.js";import{Z as n,ca as a,eb as o}from"./chunk-FPTGDBQG.js";import{d as i,e as h,f as l}from"./chunk-2QKSPLSF.js";var v=(()=>{var s;let e=class e{constructor(t){h(this,s);if(this.checklistName=t,this.versionSuffix=a(u).getSettings().useBeta?"_beta":"_live",this.userData=a(m),l(this,s,a(k)),t.trim()==="")throw new Error("checklistName can't be empty!");this.read()}read(){let t=i(this,s).getItem(this.getChecklistStorageKey());if(t&&!this.userData.currentData().checklists[this.checklistName]){let r=JSON.parse(t);this.userData.currentData().checklists[this.checklistName]=r[0]??[],this.userData.save(),i(this,s).removeItem(this.getChecklistStorageKey())}}save(){this.userData.save()}getCurrentChecklist(){let t=this.userData.currentData().checklists[this.checklistName];return t||(this.userData.currentData().checklists[this.checklistName]=this._createEmptyChecklist(),t=this.userData.currentData().checklists[this.checklistName]),t}set(t){this.getCurrentChecklist().entries=[...new Set([...Array.isArray(t)?t:[t]])],this.save()}add(t){this.getCurrentChecklist().entries=[...new Set([...this.getCurrentChecklist().entries,...Array.isArray(t)?t:[t]])],this.save()}remove(t){Array.isArray(t)||(t=[t]),this.getCurrentChecklist().entries=this.getCurrentChecklist().entries.filter(r=>!t.includes(r)),this.save()}isChecked(t){return this.getCurrentChecklist().entries.includes(t)}getChecklistStorageKey(){return e._TO_DO_STORE_KEY+this.checklistName+this.versionSuffix}resetLiveChecklist(){i(this,s).setItem(e._TO_DO_STORE_KEY+this.checklistName+"_live",JSON.stringify([this._createEmptyChecklist()])),this.read()}resetBetaChecklist(){i(this,s).setItem(e._TO_DO_STORE_KEY+this.checklistName+"_beta",JSON.stringify([this._createEmptyChecklist()])),this.read()}_createEmptyChecklist(){return{version:1,entries:[]}}};s=new WeakMap,e._TO_DO_STORE_KEY="checklist_",e.\u0275fac=function(r){o()},e.\u0275prov=n({token:e,factory:e.\u0275fac});let c=e;return c})();export{v as a};
