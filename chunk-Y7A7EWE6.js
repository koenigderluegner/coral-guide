import{a as w,b as le}from"./chunk-ENPHFC7B.js";import"./chunk-BYXBJQAS.js";import{a as me}from"./chunk-ID6WLUT2.js";import"./chunk-6GSJA3FK.js";import"./chunk-32PODRCK.js";import{a as ce}from"./chunk-XCL4JOYZ.js";import"./chunk-EAHNU44C.js";import"./chunk-NS43UFKU.js";import"./chunk-DS5QD6KN.js";import"./chunk-XMGSTBON.js";import"./chunk-VEYYY66H.js";import"./chunk-4I65K53K.js";import"./chunk-AZ3T5YEV.js";import"./chunk-7MLGAPHH.js";import{c as pe,d as se}from"./chunk-IP6ODCNA.js";import{b as te}from"./chunk-5BU3IDKS.js";import{f as Z}from"./chunk-I7ZNO67X.js";import{c as ie}from"./chunk-7M6VBWZN.js";import{c as re}from"./chunk-C6P6X2N5.js";import"./chunk-YU6OV3L2.js";import{a as ae}from"./chunk-OTWAXCZF.js";import{h as ne}from"./chunk-NKAP6NYB.js";import{a as X}from"./chunk-KM3RDE6Q.js";import"./chunk-JY3RTIIU.js";import{b as ee,c as oe}from"./chunk-2SASL4UW.js";import"./chunk-B7M7KWVX.js";import{g as W}from"./chunk-PK2RARDK.js";import{C as B,Cc as R,Fc as G,Gb as y,Ib as _,Ic as O,Jc as Y,Kb as z,Kc as E,Lb as A,Lc as T,Mb as H,Nb as g,Ob as l,Pb as s,Qb as f,Rc as F,Tb as j,Wa as K,Ya as a,Yb as q,Yc as I,Zc as J,bc as b,ca as v,jb as S,jc as $,k as P,kc as Q,p as k,qc as N,rc as D,sc as U}from"./chunk-ELCUH6OG.js";import{a as M,b as V,f as c,g as d,h as u}from"./chunk-IGH4DTA6.js";var de=(()=>{let t=class t{constructor(){this.portraitName=I.required(),this.npcKey=I.required(),this.environment=v(ee).getSettings().useBeta?"beta":"live",this.version=v(oe).value()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=S({type:t,selectors:[["app-npc-head-portrait"]],hostAttrs:[1,"npc-head-portrait"],inputs:{portraitName:[1,"portraitName"],npcKey:[1,"npcKey"]},decls:1,vars:5,consts:[["alt","","loading","lazy","onerror","this.onerror=null;this.src='assets/ui/images/no-head-portrait.webp'",3,"src"]],template:function(r,p){r&1&&j(0,"img",0),r&2&&q("src",G("assets/",p.environment,"/head-portraits/",p.npcKey(),"/",p.portraitName(),".webp?v=",p.version),K)},encapsulation:2});let e=t;return e})();var fe=e=>["..",e],he=(e,t)=>({"line-clamp-2":e,"line-clamp-1":t});function ve(e,t){if(e&1&&f(0,"app-ui-icon",11),e&2){let i=b().$implicit,n=b(2);g("matTooltip",R("",i.characterName," is dateable"))("uiIcon",n.uiIcon.LOVE)}}function ge(e,t){if(e&1&&(l(0,"div",12),f(1,"app-ui-icon",15),N(2),E(3,"ingameDate"),s()),e&2){let i=b().$implicit,n=b(2);a(),g("uiIcon",n.uiIcon.BIRTHDAY),a(),U(" ",T(3,2,i.birthday)," ")}}function xe(e,t){e&1&&(l(0,"div",14),N(1,"unofficial head portrait"),s())}function Ce(e,t){if(e&1&&(l(0,"a",4),f(1,"div",5),l(2,"div",6),f(3,"app-npc-head-portrait",7),s(),l(4,"div",8)(5,"div",9)(6,"span",10),N(7),s(),y(8,ve,1,3,"app-ui-icon",11),s(),y(9,ge,4,4,"div",12),l(10,"div",13),N(11),E(12,"translate"),s(),y(13,xe,2,0,"div",14),s()()),e&2){let i=t.$implicit;g("routerLink",O(11,fe,i.key)),a(3),g("npcKey",i.key)("portraitName",i.headerPortraitFileName),a(4),D(i.characterName),a(),_(i.isDateable?8:-1),a(),_(i.birthday?9:-1),a(),g("ngClass",Y(13,he,!i.customHead,i.customHead)),a(),D(T(12,9,i.description)),a(2),_(i.customHead?13:-1)}}function ye(e,t){e&1&&(l(0,"div",2),A(1,Ce,14,16,"a",4,z),s()),e&2&&(a(),H(t))}function _e(e,t){e&1&&f(0,"mat-spinner",3)}var Re=(()=>{var t,i,n,r,p,x;let h=class h{constructor(){d(this,t);d(this,i);d(this,n);d(this,r);d(this,p);d(this,x);this.npcFilter=J(w),this.uiIcon=X,u(this,t,v(pe)),u(this,i,F(()=>this.npcFilter()?.searchValueChanges()??"")),u(this,n,F(()=>this.npcFilter()?.sortValueChanges()??"default")),u(this,r,le),u(this,p,v(te)),u(this,x,ie(c(this,p).fetchNPCs$().pipe(B(()=>P([])),k(m=>m.map(o=>V(M({},o),{characterName:Z(c(this,t).instant(o.characterName))})))))),this.filteredAndSortedNpcs=F(()=>{let m=c(this,x).call(this)??[];if(!c(this,i)||!c(this,n))return m;let o=c(this,i).call(this).toLowerCase(),C=c(this,n).call(this);return c(this,r).call(this,m,o,C)})}};t=new WeakMap,i=new WeakMap,n=new WeakMap,r=new WeakMap,p=new WeakMap,x=new WeakMap,h.\u0275fac=function(o){return new(o||h)},h.\u0275cmp=S({type:h,selectors:[["app-npc-list"]],viewQuery:function(o,C){o&1&&$(C.npcFilter,w,5),o&2&&Q()},decls:4,vars:1,consts:[[1,"px-main-hz","py-main-vt"],[1,"z-30","relative"],[1,"grid","npc-list-grid","gap-x-4","gap-y-10"],[1,"mx-auto","text-white"],[1,"flex","bg-[#F5F1E6]","rounded-[30px]","npc-list-entry","group","relative",3,"routerLink"],[1,"frame","absolute","inset-0","rounded-[30px]","z-10","pointer-events-none"],[1,"basis-2/5","aspect-square","bg-[#F1E1CC]","rounded-l-[30px]","group-hover:bg-[#F2DBB7]"],[1,"z-20","flex","h-full","relative","rounded-l-[30px]",3,"npcKey","portraitName"],[1,"basis-3/5","p-2","flex","flex-col"],[1,"inline-flex","gap-2","mt-3","items-center"],[1,"text-black","font-semibold","text-2xl"],[1,"!text-gifting","!h-6","!w-6",3,"uiIcon","matTooltip"],[1,"text-lg","flex","gap-2","items-center"],[3,"ngClass"],["clasS","mt-auto"],[1,"!w-5","!h-5",3,"uiIcon"]],template:function(o,C){if(o&1&&(l(0,"div",0),f(1,"app-npc-filter",1),y(2,ye,3,0,"div",2)(3,_e,1,0,"mat-spinner",3),s()),o&2){let L;a(2),_((L=C.filteredAndSortedNpcs())?2:3,L)}},dependencies:[ne,w,ae,de,W,re,ce,me,se],styles:[`.npc-list-entry .npc-head-portrait{display:flex;align-items:flex-end}.npc-list-entry .npc-head-portrait img{object-fit:cover;object-position:bottom;border-top-left-radius:30px;border-bottom-left-radius:30px;height:110%;margin-top:-9.0909090909%}.frame{box-shadow:inset 0 0 1px #e4b383;transition:box-shadow .2s ease-out}.npc-list-entry:hover .frame{box-shadow:inset 0 0 1px 10px #e4b383}.npc-list-entry:hover .npc-head-portrait img{height:120%;margin-top:-18.1818181818%}.npc-list-grid{grid-template-columns:repeat(auto-fill,minmax(360px,1fr))}
`],encapsulation:2});let e=h;return e})();export{Re as NpcListComponent};
