import{a as ae}from"./chunk-HPKNAKWT.js";import{a as re}from"./chunk-JMLNX5PQ.js";import"./chunk-JSS26DYL.js";import{a as ne,b as oe}from"./chunk-D4XXG6A2.js";import"./chunk-XCXL4XHH.js";import"./chunk-SDZD6YCY.js";import"./chunk-M4K5OVLF.js";import{a as Q}from"./chunk-YH33I3GS.js";import"./chunk-DPHI5PSG.js";import"./chunk-XQTXOEWR.js";import"./chunk-6NCSHYGI.js";import"./chunk-OGS4EVII.js";import"./chunk-6YB7A7ZH.js";import"./chunk-GBZAIAZB.js";import"./chunk-ODWDCLXK.js";import"./chunk-F4TUYCIO.js";import"./chunk-4ZSEYW2U.js";import{a as ee}from"./chunk-IEIN2YGJ.js";import"./chunk-SKYGTZSD.js";import"./chunk-4FC5X73U.js";import"./chunk-EEJJBISB.js";import{a as te}from"./chunk-W62UHBDW.js";import{a as X,c as Y}from"./chunk-C5INTR5H.js";import"./chunk-MG3YOV2C.js";import{b as Z}from"./chunk-MCZ27GCN.js";import"./chunk-XCL4JOYZ.js";import"./chunk-EAHNU44C.js";import{b as ie}from"./chunk-3NZE6WSA.js";import"./chunk-DS5QD6KN.js";import"./chunk-4I65K53K.js";import{g as R,h as K,j,l as z,q as U,r as H,w as J}from"./chunk-AZ3T5YEV.js";import"./chunk-7MLGAPHH.js";import{d as W}from"./chunk-IP6ODCNA.js";import"./chunk-5BU3IDKS.js";import{i as M}from"./chunk-I7ZNO67X.js";import"./chunk-24VFFX2T.js";import{a as V}from"./chunk-7M6VBWZN.js";import"./chunk-C6P6X2N5.js";import"./chunk-YU6OV3L2.js";import"./chunk-OTWAXCZF.js";import"./chunk-NKAP6NYB.js";import"./chunk-KM3RDE6Q.js";import"./chunk-JY3RTIIU.js";import{b as L}from"./chunk-2SASL4UW.js";import"./chunk-B7M7KWVX.js";import{i as q,t as G}from"./chunk-PK2RARDK.js";import{$b as F,Bc as $,Cc as _,Gb as C,Ib as u,Kb as h,Kc as m,Lb as g,Lc as f,Mb as x,Nb as d,Ob as l,Pb as c,Qb as v,Xb as T,Ya as a,bc as s,ca as y,ia as k,ja as b,jb as D,nb as E,nc as S,p as O,pb as P,qc as w,rc as N,sa as B,sc as A}from"./chunk-ELCUH6OG.js";import"./chunk-IGH4DTA6.js";function se(i,o){if(i&1&&v(0,"app-offering",3),i&2){let t=o.$implicit;d("details",t)}}function pe(i,o){if(i&1&&(l(0,"app-item-card-switch",0),P(1,se,1,1,"ng-template",2),c()),i&2){let t=s();d("item",t.selectedEntity)}}function me(i,o){if(i&1){let t=T();l(0,"div",13),m(1,"entityKey"),l(2,"app-item-icon",14),F("click",function(){k(t);let n=s().$implicit,r=s(5);return b(r.showDetails(n))}),c(),l(3,"label",15),v(4,"mat-checkbox",16),c()()}if(i&2){let t,e=o,n=s().$implicit,r=s(5);S("checklist-checked",(t=r.checklistForm.get(e))==null?null:t.value)("selected-icon",r.selectedEntity&&f(1,14,r.selectedEntity)===e),a(2),d("amount",n.amount)("itemName",n.item.iconName)("quality",n.quality),a(),d("for",_("entry-",e,"-input")),a(),d("id",_("entry-",e))("name",_("entry-",e))("formControlName",e)}}function fe(i,o){if(i&1&&(C(0,me,5,16,"div",12),m(1,"entityKey")),i&2){let t,e=o.$implicit;u((t=f(1,1,e.item))?0:-1,t)}}function de(i,o){if(i&1&&(l(0,"div",7)(1,"div",8),m(2,"translate"),m(3,"translate"),v(4,"img",9),m(5,"translate"),l(6,"div",10)(7,"div"),w(8),m(9,"translate"),c(),l(10,"div"),w(11),c()()(),l(12,"div",11),g(13,fe,2,3,null,null,h),c()()),i&2){let t=o.$implicit,e=s(4);a(),S("bg-merino-300",f(2,8,e.activeOffering==null?null:e.activeOffering.title)===f(3,10,t.title)),a(3),d("alt",_("",f(5,12,t.title)," offering icon"))("ngSrc",_("",e.bundleAssetPath()+t.imageName,".webp")),a(4),N(f(9,14,t.title)),a(3),A(" ",t.numOfItemRequired===-1?"All":t.numOfItemRequired," required: "),a(2),x(t.requiredItems)}}function _e(i,o){if(i&1&&(l(0,"div",6),g(1,de,15,16,"div",7,h),c()),i&2){let t=s().$implicit;a(),x(t.offerings)}}function Ce(i,o){if(i&1&&(l(0,"mat-tab",5),m(1,"translate"),m(2,"addSpacesToPascalCase"),C(3,_e,3,0,"div",6),c()),i&2){let t=o.$implicit,e=s(2);d("label",$(f(2,5,f(1,3,t.offeringGroupTitle)))),a(3),u(e.showTable?-1:3)}}function ue(i,o){if(i&1){let t=T();l(0,"mat-tab-group",4),F("selectedTabChange",function(n){k(t);let r=s();return b(r.updateUrl(n))}),g(1,Ce,4,7,"mat-tab",5,h),c()}if(i&2){let t=s();d("formGroup",t.checklistForm)("selectedIndex",t.selectedTabIndex()),a(),x(o)}}var Ge=(()=>{let o=class o extends ee{constructor(){super(),this.checklistService=y(ae),this.checklistForm=new j({}),this.useBeta=y(L).getSettings().useBeta,this.bundleAssetPath=B(`assets/${this.useBeta?"beta":"live"}/items/icons/`),this._altars=[],this.urlPathFromLabel=e=>{let n=e.toLowerCase().replaceAll(" ",""),r=this._altars.find(p=>p.offeringGroupTitle.toLowerCase().replaceAll(" ","")===n);return r?r.urlPath:e.toLowerCase().replaceAll(" ","")},this.checklistForm.valueChanges.pipe(V()).subscribe({next:e=>{let n=[];Object.keys(e).forEach(r=>{e[r]&&n.push(r)}),this.checklistService.set(n)}}),this.offerings$=this._database.fetchOfferings$().pipe(O(e=>{let n=e.filter(p=>p.offeringType!=="Diving"),r=n.map(p=>p.urlPath);return this._altars=n,n.forEach(p=>{p.offerings.forEach(le=>{le.requiredItems.forEach(ce=>{let I=M(ce.item);this.checklistForm.addControl(I,new z(this.checklistService.isChecked(I),{nonNullable:!0}),{emitEvent:!1})})})}),this.activateTabFromRoute(r),n}))}showDetails(e){this.entryForToDo=e,e&&"amount"in e?super.showDetails(e.item):super.showDetails(e)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=D({type:o,selectors:[["app-offerings-checklist"]],features:[E],decls:4,vars:4,consts:[["listDetail","","context","offerings",3,"item"],[3,"formGroup","selectedIndex"],["appDatabaseItemDetails",""],[3,"details"],[3,"selectedTabChange","formGroup","selectedIndex"],[3,"label"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"flex","flex-col","gap-y-2"],[1,"rounded-lg","bg-merino","flex","items-center","gap-4","p-4"],["height","64","width","64",3,"alt","ngSrc"],[1,"flex","flex-col","text-lg","font-semibold"],[1,"icon-grid","w-full"],[1,"icon-grid-item","checklist-item","flex","flex-col",3,"checklist-checked","selected-icon"],[1,"icon-grid-item","checklist-item","flex","flex-col"],[3,"click","amount","itemName","quality"],[1,"text-white","flex","justify-center",3,"for"],[1,"flex",3,"formControlName","id","name"]],template:function(n,r){if(n&1&&(l(0,"app-list-detail-container"),C(1,pe,2,1,"app-item-card-switch",0),C(2,ue,3,2,"mat-tab-group",1),m(3,"async"),c()),n&2){let p;a(),u(r.selectedEntity?1:-1),a(),u((p=f(3,2,r.offerings$))?2:-1,p)}},dependencies:[X,J,R,K,U,H,Y,oe,ne,Z,ie,Q,G,te,re,q,W],encapsulation:2});let i=o;return i})();export{Ge as OfferingsChecklistComponent};
