import{a as U,b as V}from"./chunk-QCMAEIDU.js";import{a as Y}from"./chunk-PYAZCN4G.js";import{a as K}from"./chunk-EGGJNKID.js";import{a as q}from"./chunk-ZNH2YIJP.js";import"./chunk-SI42NBAZ.js";import{a as H}from"./chunk-NOBC57G4.js";import"./chunk-BVOEAINN.js";import"./chunk-NTEY2CKU.js";import"./chunk-3H2ZASFZ.js";import{a as G,c as O}from"./chunk-FKI6MOIH.js";import"./chunk-OYPR7CJS.js";import{a as Q}from"./chunk-C4GFRP34.js";import"./chunk-QYM5RSKG.js";import{b as X}from"./chunk-CMTXHUJM.js";import"./chunk-ZNXHGMTD.js";import"./chunk-XWGFS45Y.js";import"./chunk-IBXLELUQ.js";import{b as z}from"./chunk-SNYRKERH.js";import"./chunk-YOD5VGJA.js";import"./chunk-EJRI7FQQ.js";import"./chunk-XMGSTBON.js";import"./chunk-7VKCZCDP.js";import"./chunk-RIQ7EVWM.js";import{i as A,l as C}from"./chunk-U65D7S4X.js";import"./chunk-IJY46FI3.js";import"./chunk-CXGH7SOD.js";import{c as I}from"./chunk-D33HMA7I.js";import"./chunk-VRZECYYF.js";import"./chunk-IIDJZWRT.js";import"./chunk-7MFI6IJ7.js";import"./chunk-HIFLNZD5.js";import"./chunk-ZALICU3N.js";import"./chunk-47OJ7DES.js";import{h as S,k as F}from"./chunk-SAY5CNC2.js";import"./chunk-BFCDBX46.js";import"./chunk-G2FIETR4.js";import"./chunk-7DQT77OQ.js";import{i as k}from"./chunk-OHR5KDYC.js";import{Hb as d,Jb as _,Lb as b,Lc as P,Mb as T,Mc as R,Nb as y,Ob as s,Pb as l,Qb as m,Rb as u,Tc as j,Yb as x,Za as p,Zc as B,ac as D,cc as c,ia as g,ja as w,kb as f,ob as E,oc as $,qb as N,wc as W,xc as J,yc as M}from"./chunk-FPTGDBQG.js";import{e as v,g as L}from"./chunk-2QKSPLSF.js";function nt(t,o){if(t&1&&u(0,"app-fish",2),t&2){let i=c().$implicit;s("fish",i.fish)}}function at(t,o){if(t&1&&u(0,"app-insect",3),t&2){let i=c().$implicit;s("critter",i.insect)}}function ot(t,o){if(t&1&&u(0,"app-insect",3),t&2){let i=c().$implicit;s("critter",i.oceanCritter)}}function rt(t,o){if(t&1&&d(0,nt,1,1,"app-fish",2)(1,at,1,1,"app-insect",3)(2,ot,1,1,"app-insect",3),t&2){let i=o.$implicit;_(i.fish?0:i.insect?1:i.oceanCritter?2:-1)}}var Z=(()=>{var o,tt;let e=class e{constructor(){v(this,o);this.critter=B.required(),j(()=>{this.critter(),L(this,o,tt).call(this)})}};o=new WeakSet,tt=function(){let a=this.critter();this.toDoContext="fishName"in a?"journal_fish":a.item.inventoryCategory.toLocaleLowerCase()==="bug"?"journal_insects":"journal_critter"},e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=f({type:e,selectors:[["app-caught-details"]],inputs:{critter:[1,"critter"]},decls:2,vars:2,consts:[[3,"context","itemId"],["appDatabaseItemDetails",""],[3,"fish"],[3,"critter"]],template:function(r,h){r&1&&(l(0,"app-database-item-details",0),N(1,rt,3,1,"ng-template",1),m()),r&2&&s("context",h.toDoContext)("itemId",h.critter().item.id)},dependencies:[U,V,H,K],encapsulation:2});let t=e;return t})();function st(t,o){if(t&1&&u(0,"app-caught-details",1),t&2){let i=c();s("critter",i.selectedEntity)}}function ct(t,o){if(t&1){let i=x();l(0,"app-item-icon",8),D("click",function(){let n=g(i).$implicit,a=c(4);return w(a.showDetails(n))}),m()}if(t&2){let i=o.$implicit,e=c(4);$("selected-icon",(e.selectedEntity==null||e.selectedEntity.item==null?null:e.selectedEntity.item.id)===i.item.id),s("itemName",i.item.iconName)}}function lt(t,o){if(t&1&&(l(0,"div",5),T(1,ct,1,3,"app-item-icon",7,b),m()),t&2){let i=c();p(),y(i)}}function pt(t,o){if(t&1&&u(0,"app-caught-table",6),t&2){let i=c();s("dataSource",i)}}function mt(t,o){if(t&1){let i=x();l(0,"app-data-filter",4),M("showTableChange",function(n){g(i);let a=c(2);return J(a.showTable,n)||(a.showTable=n),w(n)}),m(),d(1,lt,3,0,"div",5),d(2,pt,1,1,"app-caught-table",6)}if(t&2){let i=c(2);W("showTable",i.showTable),s("parentFormGroup",i.formControl)("locations",i.getLocations(o)),p(),_(i.showTable?-1:1),p(),_(i.showTable?2:-1)}}function ht(t,o){if(t&1&&(l(0,"mat-tab",3),d(1,mt,3,5),P(2,"async"),m()),t&2){let i,e=o.$implicit;s("label",e.title),p(),_((i=R(2,2,e.data))?1:-1,i)}}var $t=(()=>{let o=class o extends q{constructor(){super(new A({season:new C([...S],{nonNullable:!0}),weather:new C([...F],{nonNullable:!0}),location:new C(null),showTable:new C(!1,{nonNullable:!0})})),this.SEA_CRITTERS_INDEX=2,this.tabs=[{title:"Fish",data:this.getFilteredJournalData(this._database.fetchJournalOrder$("journal-fish"),this._database.fetchFish$(),0)},{title:"Insects",data:this.getFilteredJournalData(this._database.fetchJournalOrder$("journal-insects"),this._database.fetchBugsAndInsects$(),1)},{title:"Sea Critters",data:this.getFilteredJournalData(this._database.fetchJournalOrder$("journal-sea-critters"),this._database.fetchOceanCritters$(),this.SEA_CRITTERS_INDEX)}],this.activateTabFromRoute(this.tabs.map(e=>e.title))}filterPredicate(e,n,a){return!n.season?.length||!n.weather?.length?!1:"spawnSettings"in e?e.spawnSettings?.some(r=>this.matchLocation(r.spawnLocation,n.location)&&this.matchSeason(r.spawnSeason,n.season)&&this.matchWeather(r.spawnWeather,a,n.weather)):this.matchLocation(e.spawnLocation,n.location)&&this.matchSeason(e.spawnSeason,n.season)&&this.matchWeather(e.spawnWeather,a,n.weather)}matchLocation(e,n){return!n||e.includes(n)}matchWeather(e,n,a){let r=I(e).toLowerCase();return n===this.SEA_CRITTERS_INDEX||r==="any"||a?.length===F.length||!!a?.some(et=>r.includes((""+et).toLowerCase()))}matchSeason(e,n){let a=I(e).toLowerCase();return a==="any"||n?.length===S.length||!!n?.some(h=>a.includes((""+h).toLowerCase()))}getLocations(e){return e.length?[...new Set(e.map(n=>"fishName"in n?n.spawnSettings.map(a=>a.spawnLocation):n.spawnLocation).flat(2))].sort():[]}resetLocationFilter(){this.formControl.get("location")?.setValue(null)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=f({type:o,selectors:[["app-caught"]],features:[E],decls:5,vars:3,consts:[[3,"removePlaceholder"],["listDetail","",3,"critter"],[3,"selectedTabChange","selectedIndex"],[3,"label"],[3,"showTableChange","showTable","parentFormGroup","locations"],[1,"icon-grid"],[3,"dataSource"],[1,"icon-grid-item",3,"itemName","selected-icon"],[1,"icon-grid-item",3,"click","itemName"]],template:function(n,a){n&1&&(l(0,"app-list-detail-container",0),d(1,st,1,1,"app-caught-details",1),l(2,"mat-tab-group",2),D("selectedTabChange",function(h){return a.updateUrl(h),a.resetLocationFilter()}),T(3,ht,3,4,"mat-tab",3,b),m()()),n&2&&(s("removePlaceholder",a.showTable),p(),_(a.selectedEntity?1:-1),p(),s("selectedIndex",a.selectedTabIndex()),p(),y(a.tabs))},dependencies:[X,Z,O,G,Q,z,Y,k],encapsulation:2});let t=o;return t})();export{$t as CaughtComponent};
